try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="af06451d-3803-4131-87f1-37f14b5762da",e._sentryDebugIdIdentifier="sentry-dbid-af06451d-3803-4131-87f1-37f14b5762da")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{87541:function(e,t,r){r.d(t,{r:function(){return a}});var n=r(2784),i=r(8043),o=r(1080);function a(e){var t={state:e instanceof Function?e():e,setState:function(e){var r;t.state=(r=t.state,"function"==typeof e?e.length?e(r):e():e),t.setters.forEach(function(e){return e(t.state)})},setters:[]};return function(){var e=(0,n.useState)(t.state),r=e[0],a=e[1];return(0,i.Z)(function(){return function(){t.setters=t.setters.filter(function(e){return e!==a})}}),(0,o.Z)(function(){t.setters.includes(a)||t.setters.push(a)}),[r,t.setState]}}},8554:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(2784);function i(e,t,r){void 0===t&&(t=0),void 0===r&&(r=[]);var i,o,a,s,u,c,l,d=(void 0===(i=t)&&(i=0),o=(0,n.useRef)(!1),a=(0,n.useRef)(),s=(0,n.useRef)(e),u=(0,n.useCallback)(function(){return o.current},[]),c=(0,n.useCallback)(function(){o.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout(function(){o.current=!0,s.current()},i)},[i]),l=(0,n.useCallback)(function(){o.current=null,a.current&&clearTimeout(a.current)},[]),(0,n.useEffect)(function(){s.current=e},[e]),(0,n.useEffect)(function(){return c(),l},[i]),[u,l,c]),f=d[0],h=d[1],p=d[2];return(0,n.useEffect)(p,r),[f,h]}},94968:function(e,t,r){var n=r(2784);t.Z=function(e,t){var r=(0,n.useRef)(function(){});(0,n.useEffect)(function(){r.current=e}),(0,n.useEffect)(function(){if(null!==t){var e=setInterval(function(){return r.current()},t||0);return function(){return clearInterval(e)}}},[t])}},1080:function(e,t,r){var n=r(2784),i=r(30155).jU?n.useLayoutEffect:n.useEffect;t.Z=i},1565:function(e,t,r){var n=r(2784),i=r(30155);t.Z=function(e,t,r){if(!i.jU)return[t,i.ZT,i.ZT];if(!e)throw Error("useLocalStorage key may not be falsy");var o=r?r.raw?function(e){return e}:r.deserializer:JSON.parse,a=(0,n.useRef)(function(e){try{var n=r?r.raw?String:r.serializer:JSON.stringify,i=localStorage.getItem(e);if(null!==i)return o(i);return t&&localStorage.setItem(e,n(t)),t}catch(e){return t}}),s=(0,n.useState)(function(){return a.current(e)}),u=s[0],c=s[1];(0,n.useLayoutEffect)(function(){return c(a.current(e))},[e]);var l=(0,n.useCallback)(function(t){try{var n="function"==typeof t?t(u):t;if(void 0===n)return;var i=void 0;i=r?r.raw?"string"==typeof n?n:JSON.stringify(n):r.serializer?r.serializer(n):JSON.stringify(n):JSON.stringify(n),localStorage.setItem(e,i),c(o(i))}catch(e){}},[e,c]);return[u,l,(0,n.useCallback)(function(){try{localStorage.removeItem(e),c(void 0)}catch(e){}},[e,c])]}},2180:function(e,t,r){var n=r(2784),i=r(1080);t.Z=function(e,t){var r=(0,n.useState)(t),o=r[0],a=r[1];return(0,i.Z)(function(){var t=e.subscribe(a);return function(){return t.unsubscribe()}},[e]),o}},64141:function(e,t,r){var n=r(2784),i=r(43100),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=n.useRef,u=n.useEffect,c=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=a(e,(d=c(function(){function e(e){if(!u){if(u=!0,a=e,e=n(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(a=e,t):(a=e,s=r)}var a,s,u=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,i]))[0],d[1]);return u(function(){f.hasValue=!0,f.value=h},[h]),l(h),h}},45070:function(e,t,r){var n=r(2784),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useSyncExternalStore,a=n.useRef,s=n.useEffect,u=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,l){var d=a(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=o(e,(d=u(function(){function e(e){if(!s){if(s=!0,o=e,e=n(e),void 0!==l&&f.hasValue){var t=f.value;if(l(t,e))return a=t}return a=e}if(t=a,i(o,e))return t;var r=n(e);return void 0!==l&&l(t,r)?(o=e,t):(o=e,a=r)}var o,a,s=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,l]))[0],d[1]);return s(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},41110:function(e,t,r){e.exports=r(64141)},69349:function(e,t,r){e.exports=r(45070)},81642:function(e,t,r){r.d(t,{$$:function(){return G},BU:function(){return $},Bc:function(){return er},EH:function(){return a},Hz:function(){return en},J6:function(){return Q},LL:function(){return ei},Nb:function(){return Z},QU:function(){return J},RN:function(){return X},RY:function(){return k},WT:function(){return A},X0:function(){return H},_A:function(){return ee},_d:function(){return es},bF:function(){return ec},bN:function(){return B},d7:function(){return Y},f8:function(){return ed},j1:function(){return el},kB:function(){return et},m8:function(){return I},qf:function(){return U},u:function(){return ea},us:function(){return K},v_:function(){return eu},x_:function(){return eo}});var n=r(2784),i=r(41225),o=r(41110);function a(e){let[t,r]=n.useState(!1);return n.useEffect(()=>{r(!0)},[]),n.createElement(n.Suspense,{fallback:e.fallback},t?"function"==typeof e.children?e.children():e.children:e.fallback)}r(43100);var s=e=>"object"==typeof e&&"string"==typeof e.startsWith,u=e=>"string"==typeof e,c=class extends Error{constructor(e,t){super("Create thread failed."),this.cause=e,this.context=t,this.name="CreateThreadError"}},l=class extends Error{constructor(e,t){super("Delete thread failed."),this.cause=e,this.context=t,this.name="DeleteThreadError"}},d=class extends Error{constructor(e,t){super("Mark thread as resolved failed."),this.cause=e,this.context=t,this.name="MarkThreadAsResolvedError"}},f=class extends Error{constructor(e,t){super("Mark thread as unresolved failed."),this.cause=e,this.context=t,this.name="MarkThreadAsUnresolvedError"}},h=class extends Error{constructor(e,t){super("Create comment failed."),this.cause=e,this.context=t,this.name="CreateCommentError"}},p=class extends Error{constructor(e,t){super("Edit comment failed."),this.cause=e,this.context=t,this.name="EditCommentError"}},m=class extends Error{constructor(e,t){super("Delete comment failed."),this.cause=e,this.context=t,this.name="DeleteCommentError"}},v=class extends Error{constructor(e,t){super("Add reaction failed."),this.cause=e,this.context=t,this.name="AddReactionError"}},b=class extends Error{constructor(e,t){super("Remove reaction failed."),this.cause=e,this.context=t,this.name="RemoveReactionError"}},y=class extends Error{constructor(e,t){super("Mark inbox notification as read failed."),this.cause=e,this.context=t,this.name="MarkInboxNotificationAsReadError"}};function g(e,t){t>=5||setTimeout(()=>{e()},5e3*Math.pow(2,t))}function E(e){let t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e},[e]),t}var w=e=>e;function x(e){return(0,n.useReducer)(w,e)[0]}function S(e){let t=x(e);if("function"!=typeof t)return t;{let t=E(e);return(0,n.useCallback)((...e)=>t.current(...e),[t])}}var C=e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e},k=(0,n.createContext)(null);function T(){return(0,n.useContext)(k)}function I(){return T()??(0,i.OU)("LiveblocksProvider is missing from the React tree.")}function D(e){return!function(e){let t=T();if(!e?.allowNesting&&null!==t)throw Error("You cannot nest multiple LiveblocksProvider instances in the same React tree.")}(e),n.createElement(k.Provider,{value:e.client},e.children)}function A(e){let{children:t,...r}=e,o={publicApiKey:x(r.publicApiKey),throttle:x(r.throttle),lostConnectionTimeout:x(r.lostConnectionTimeout),backgroundKeepAliveTimeout:x(r.backgroundKeepAliveTimeout),polyfills:x(r.polyfills),unstable_fallbackToHTTP:x(r.unstable_fallbackToHTTP),unstable_streamData:x(r.unstable_streamData),authEndpoint:S(r.authEndpoint),resolveMentionSuggestions:S(r.resolveMentionSuggestions),resolveUsers:S(r.resolveUsers),resolveRoomsInfo:S(r.resolveRoomsInfo),baseUrl:x(r.baseUrl),enableDebugLogging:x(r.enableDebugLogging)},a=(0,n.useMemo)(()=>(0,i.eI)(o),[]);return n.createElement(D,{client:a},t)}var U=function(e){return function(e,t){let r=e[i.W_].usersStore,a=(0,n.useCallback)(()=>r.getState(t),[r,t]);(0,n.useEffect)(()=>{r.get(t)},[r,t]);let s=(0,n.useCallback)(e=>{var r,n;return r=e,n=t,void 0===r||r?.isLoading?r??{isLoading:!0}:r.error?r:r.data?{isLoading:!1,user:r.data}:{isLoading:!1,error:Error(`resolveUsers didn't return anything for user '${n}'`)}},[t]);return(0,o.useSyncExternalStoreWithSelector)(r.subscribe,a,a,s,i.Xd)}(I(),e)},R=()=>{},O=e=>e;function N(e,t,r){return(0,o.useSyncExternalStoreWithSelector)(e,t,r,O)}var M=Object.freeze([]);function _(){return M}function j(){return null}function L(e){let t=e.getSelf();return null===t||void 0===t.id?"anonymous":t.id}function V(e){let t=`Request failed with status ${e.status}: ${e.message}`;if(e.details?.error==="FORBIDDEN"){let r=[t,e.details.suggestion,e.details.docs].filter(Boolean).join("\n");i.iV.error(r)}return Error(t)}var W=new WeakMap;function P(e){let t=W.get(e);return t||(t=function(e){let t=e[i.W_].cacheStore,r=new Map,n=new Map,o=new Map,a=new Map,s=(0,i.x3)(u);async function u(){let t=[];e[i.W_].getRoomIds().map(r=>{let n=e.getRoom(r);null!==n&&t.push(c(n.id))}),await Promise.allSettled(t)}async function c(n){let i=e.getRoom(n);if(null===i)return;let a=r.get(i.id);if(void 0!==a&&!0!==(o.get(i.id)??!1))try{o.set(i.id,!0);let e=await i.getThreadsSince({since:a});setTimeout(()=>{o.set(i.id,!1)},2e3),t.updateThreadsAndNotifications(e.threads.updated,e.inboxNotifications.updated,e.threads.deleted,e.inboxNotifications.deleted),r.set(i.id,e.requestedAt)}catch(e){o.set(i.id,!1);return}}async function l(e,i,o,{retryCount:a}={retryCount:0}){let u=n.get(i);if(void 0!==u)return u;let c=e.getThreads(o);n.set(i,c),t.setQueryState(i,{isLoading:!0});try{let n=await c;t.updateThreadsAndNotifications(n.threads,n.inboxNotifications,[],[],i);let o=r.get(e.id);(void 0===o||o>n.requestedAt)&&r.set(e.id,n.requestedAt),s.start(3e5)}catch(r){n.delete(i),g(()=>{l(e,i,o,{retryCount:a+1})},a),t.setQueryState(i,{isLoading:!1,error:r})}}async function d(e,r,{retryCount:i}={retryCount:0}){let o=n.get(r);if(void 0!==o)return o;try{let i=e.getNotificationSettings();n.set(r,i),t.setQueryState(r,{isLoading:!0});let o=await i;t.updateRoomInboxNotificationSettings(e.id,o,r)}catch(o){n.delete(r),g(()=>{d(e,r,{retryCount:i+1})},i),t.setQueryState(r,{isLoading:!1,error:o})}}let f=(0,i.Zb)();return{store:t,incrementQuerySubscribers:function(e){let t=a.get(e)??0;return a.set(e,t+1),s.start(3e5),()=>{let t=a.get(e);if(void 0===t||t<=0){i.iV.warn(`Internal unexpected behavior. Cannot decrease subscriber count for query "${e}"`);return}a.set(e,t-1);let r=0;for(let e of a.values())r+=e;r<=0&&s.stop()}},commentsErrorEventSource:f,getThreadsUpdates:c,getThreadsAndInboxNotifications:l,getInboxNotificationSettings:d,onMutationFailure:function(e,r,n){if(t.set(e=>({...e,optimisticUpdates:e.optimisticUpdates.filter(e=>e.id!==r)})),e instanceof i.iz){let t=V(e);f.notify(n(t));return}if(e instanceof i.VB){V(e);return}throw e}}}(e),W.set(e,t)),t}var $=n.createContext(null);function F(e){let t=I(),{id:r,stableEnterRoom:o}=e,a=x({initialPresence:e.initialPresence,initialStorage:e.initialStorage,unstable_batchedUpdates:e.unstable_batchedUpdates,autoConnect:e.autoConnect??"undefined"!=typeof window}),[{room:s},u]=n.useState(()=>o(r,{...a,autoConnect:!1}));return n.useEffect(()=>{let{store:e}=P(t);async function r(t){if(t.type===i.yO.THREAD_DELETED){e.deleteThread(t.threadId);return}let r=await s.getThread(t.threadId);if(!r.thread){e.deleteThread(t.threadId);return}let{thread:n,inboxNotification:o}=r,a=e.get().threads[t.threadId];switch(t.type){case i.yO.COMMENT_EDITED:case i.yO.THREAD_METADATA_UPDATED:case i.yO.THREAD_UPDATED:case i.yO.COMMENT_REACTION_ADDED:case i.yO.COMMENT_REACTION_REMOVED:case i.yO.COMMENT_DELETED:if(!a)break;e.updateThreadAndNotification(n,o);break;case i.yO.COMMENT_CREATED:e.updateThreadAndNotification(n,o)}}return s.events.comments.subscribe(e=>void r(e))},[t,s]),n.useEffect(()=>{let{getThreadsUpdates:e}=P(t);e(s.id)},[t,s.id]),n.useEffect(()=>{function e(){let{getThreadsUpdates:e}=P(t);e(s.id)}return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}},[t,s.id]),n.useEffect(()=>{let e=o(r,a);u(e);let{room:t,leave:n}=e;return a.autoConnect&&t.connect(),()=>{n()}},[r,a,o]),n.createElement($.Provider,{value:s},e.children)}function z(){let e=n.useContext($);if(null===e)throw Error("RoomProvider is missing from the React tree.");return e}function Z(e){let t=z(),r=E(e);n.useEffect(()=>t.events.error.subscribe(e=>r.current(e)),[t,r])}function q(e,t){let r=z(),i=function(){let e=z();return N(e.events.storageDidLoad.subscribeOnce,e.getStorageSnapshot,j)}(),a=n.useCallback(t=>null!==t?e(t):null,[e]),s=n.useCallback(e=>null!==i?r.subscribe(i,e,{isDeep:!0}):R,[r,i]),u=n.useCallback(()=>null===i?null:i.toImmutable(),[i]);return(0,o.useSyncExternalStoreWithSelector)(s,u,j,a,t)}function B(){let e=I(),t=z();return n.useCallback(({threadId:r,body:n})=>{let o=(0,i.F0)(),a=new Date,s={id:o,threadId:r,roomId:t.id,type:"comment",createdAt:a,userId:L(t),body:n,reactions:[]},u=(0,i.x0)(),{store:c,onMutationFailure:l}=P(e);return c.pushOptimisticUpdate({type:"create-comment",comment:s,id:u}),t.createComment({threadId:r,commentId:o,body:n}).then(e=>{c.set(t=>{let n=t.threads[r],o=t.optimisticUpdates.filter(e=>e.id!==u);if(void 0===n)return{...t,optimisticUpdates:o};let a=Object.values(t.inboxNotifications).find(e=>"thread"===e.kind&&e.threadId===r),s=void 0!==a?{...t.inboxNotifications,[a.id]:{...a,notifiedAt:e.createdAt,readAt:e.createdAt}}:t.inboxNotifications;return{...t,threads:{...t.threads,[r]:(0,i.sE)(n,e)},inboxNotifications:s,optimisticUpdates:o}})},e=>l(e,u,e=>new h(e,{roomId:t.id,threadId:r,commentId:o,body:n}))),s},[e,t])}function K(){let e=I(),t=z();return n.useCallback(({threadId:r,commentId:n,body:o})=>{let a=new Date,s=(0,i.x0)(),{store:u,onMutationFailure:c}=P(e),l=u.get().threads[r];if(void 0===l){i.iV.warn(`Internal unexpected behavior. Cannot edit comment in thread "${r}" because the thread does not exist in the cache.`);return}let d=l.comments.find(e=>e.id===n);if(void 0===d||void 0!==d.deletedAt){i.iV.warn(`Internal unexpected behavior. Cannot edit comment "${n}" in thread "${r}" because the comment does not exist in the cache.`);return}u.pushOptimisticUpdate({type:"edit-comment",comment:{...d,editedAt:a,body:o},id:s}),t.editComment({threadId:r,commentId:n,body:o}).then(e=>{u.set(t=>{let n=t.threads[r],o=t.optimisticUpdates.filter(e=>e.id!==s);return void 0===n?{...t,optimisticUpdates:o}:{...t,threads:{...t.threads,[r]:(0,i.sE)(n,e)},optimisticUpdates:o}})},e=>c(e,s,e=>new p(e,{roomId:t.id,threadId:r,commentId:n,body:o})))},[e,t])}function H(){let e=I(),t=z();return n.useCallback(({threadId:r,commentId:n})=>{let o=new Date,a=(0,i.x0)(),{store:s,onMutationFailure:u}=P(e);s.pushOptimisticUpdate({type:"delete-comment",threadId:r,commentId:n,deletedAt:o,id:a,roomId:t.id}),t.deleteComment({threadId:r,commentId:n}).then(()=>{s.set(e=>{let t=e.threads[r],s=e.optimisticUpdates.filter(e=>e.id!==a);return void 0===t?{...e,optimisticUpdates:s}:{...e,threads:{...e.threads,[r]:(0,i.YF)(t,n,o)},optimisticUpdates:s}})},e=>u(e,a,e=>new m(e,{roomId:t.id,threadId:r,commentId:n})))},[e,t])}function J(){let e=I(),t=z();return n.useCallback(({threadId:r,commentId:n,emoji:o})=>{let a=L(t),s=new Date,u=(0,i.x0)(),{store:c,onMutationFailure:l}=P(e);c.pushOptimisticUpdate({type:"remove-reaction",threadId:r,commentId:n,emoji:o,userId:a,removedAt:s,id:u}),t.removeReaction({threadId:r,commentId:n,emoji:o}).then(()=>{c.set(e=>{let t=e.threads[r],c=e.optimisticUpdates.filter(e=>e.id!==u);return void 0===t?{...e,optimisticUpdates:c}:{...e,threads:{...e.threads,[r]:(0,i.WO)(t,n,o,a,s)},optimisticUpdates:c}})},e=>l(e,u,e=>new b(e,{roomId:t.id,threadId:r,commentId:n,emoji:o})))},[e,t])}function Q(){let e=I(),t=z();return n.useCallback(r=>{let{store:n,onMutationFailure:o}=P(e),a=Object.values(n.get().inboxNotifications).find(e=>"thread"===e.kind&&e.threadId===r);if(!a)return;let s=(0,i.x0)(),u=new Date;n.pushOptimisticUpdate({type:"mark-inbox-notification-as-read",id:s,inboxNotificationId:a.id,readAt:u}),t.markInboxNotificationAsRead(a.id).then(()=>{n.set(e=>({...e,inboxNotifications:{...e.inboxNotifications,[a.id]:{...a,readAt:u}},optimisticUpdates:e.optimisticUpdates.filter(e=>e.id!==s)}))},e=>{o(e,s,e=>new y(e,{inboxNotificationId:a.id}))})},[e,t])}function Y(){let e=I(),t=z();return n.useCallback(r=>{let n=(0,i.x0)(),o=new Date,{store:a,onMutationFailure:s}=P(e);a.pushOptimisticUpdate({type:"mark-thread-as-resolved",id:n,threadId:r,updatedAt:o}),t.markThreadAsResolved(r).then(()=>{a.set(e=>{let t=e.threads[r],i=e.optimisticUpdates.filter(e=>e.id!==n);return void 0===t||void 0!==t.deletedAt||t.updatedAt&&t.updatedAt>o?{...e,optimisticUpdates:i}:{...e,threads:{...e.threads,[r]:{...t,resolved:!0}},optimisticUpdates:i}})},e=>s(e,n,e=>new d(e,{roomId:t.id,threadId:r})))},[e,t])}function X(){let e=I(),t=z();return n.useCallback(r=>{let n=(0,i.x0)(),o=new Date,{store:a,onMutationFailure:s}=P(e);a.pushOptimisticUpdate({type:"mark-thread-as-unresolved",id:n,threadId:r,updatedAt:o}),t.markThreadAsUnresolved(r).then(()=>{a.set(e=>{let t=e.threads[r],i=e.optimisticUpdates.filter(e=>e.id!==n);return void 0===t||void 0!==t.deletedAt||t.updatedAt&&t.updatedAt>o?{...e,optimisticUpdates:i}:{...e,threads:{...e.threads,[r]:{...t,resolved:!1}},optimisticUpdates:i}})},e=>s(e,n,e=>new f(e,{roomId:t.id,threadId:r})))},[e,t])}function G(e){let{store:t}=P(I()),r=n.useCallback(t=>{let r=Object.values((0,i.Wy)(t).inboxNotifications).sort((e,t)=>t.notifiedAt.getTime()-e.notifiedAt.getTime()).find(t=>"thread"===t.kind&&t.threadId===e),n=t.threads[e];return void 0===r||void 0===n?{status:"not-subscribed"}:{status:"subscribed",unreadSince:r.readAt}},[e]);return(0,o.useSyncExternalStoreWithSelector)(t.subscribe,t.get,t.get,r)}Symbol();var ee=function(e){let t=I(),[r]=n.useState(()=>new Map),i=n.useCallback((e,n)=>{let i=r.get(e);if(i)return i;let o=t.enterRoom(e,n),a=o.leave;return o.leave=()=>{a(),r.delete(e)},r.set(e,o),o},[t,r]);return n.createElement(F,{...e,stableEnterRoom:i})},et=z,er=function(){let e=I(),t=z();return n.useCallback(({threadId:r,commentId:n,emoji:o})=>{let a=new Date,s=L(t),u=(0,i.x0)(),{store:c,onMutationFailure:l}=P(e);c.pushOptimisticUpdate({type:"add-reaction",threadId:r,commentId:n,reaction:{emoji:o,userId:s,createdAt:a},id:u}),t.addReaction({threadId:r,commentId:n,emoji:o}).then(e=>{c.set(t=>{let o=t.threads[r],a=t.optimisticUpdates.filter(e=>e.id!==u);return void 0===o?{...t,optimisticUpdates:a}:{...t,threads:{...t.threads,[r]:(0,i.rU)(o,n,e)},optimisticUpdates:a}})},e=>l(e,u,e=>new v(e,{roomId:t.id,threadId:r,commentId:n,emoji:o})))},[e,t])},en=function(e,t){let r=z();return n.useMemo(()=>(...t)=>r.batch(()=>e(function(e){let t="This mutation cannot be used until",r=`${t} connected to the Liveblocks room`,n=`${t} storage has been loaded`;return{get storage(){let t=e.getStorageSnapshot();if(null===t)throw Error(n);return t},get self(){let t=e.getSelf();if(null===t)throw Error(r);return t},get others(){let t=e.getOthers();if(null===e.getSelf())throw Error(r);return t},setMyPresence:e.updatePresence}}(r),...t)),[r,...t])},ei=function(){let e=I(),t=z();return n.useCallback(r=>{let n=r.body,o=r.metadata??{},a=(0,i.iK)(),s=(0,i.F0)(),u=new Date,l={id:s,threadId:a,roomId:t.id,createdAt:u,type:"comment",userId:L(t),body:n,reactions:[]},d={id:a,type:"thread",createdAt:u,updatedAt:u,roomId:t.id,metadata:o,comments:[l],resolved:!1},f=(0,i.x0)(),{store:h,onMutationFailure:p}=P(e);return h.pushOptimisticUpdate({type:"create-thread",thread:d,id:f,roomId:t.id}),t.createThread({threadId:a,commentId:s,body:n,metadata:o}).then(e=>{h.set(t=>({...t,threads:{...t.threads,[a]:e},optimisticUpdates:t.optimisticUpdates.filter(e=>e.id!==f)}))},e=>p(e,f,e=>new c(e,{roomId:t.id,threadId:a,commentId:s,body:n,metadata:o}))),d},[e,t])},eo=function(){let e=I(),t=z();return n.useCallback(r=>{let n=(0,i.x0)(),{store:o,onMutationFailure:a}=P(e),s=o.get().threads[r],u=L(t);if(s?.comments?.[0]?.userId!==u)throw Error("Only the thread creator can delete the thread");o.pushOptimisticUpdate({type:"delete-thread",id:n,roomId:t.id,threadId:r,deletedAt:new Date}),t.deleteThread(r).then(()=>{o.set(e=>{let t=e.threads[r];return void 0===t?e:{...e,threads:{...e.threads,[r]:{...t,updatedAt:new Date,deletedAt:new Date}},optimisticUpdates:e.optimisticUpdates.filter(e=>e.id!==n)}})},e=>a(e,n,e=>new l(e,{roomId:t.id,threadId:r})))},[e,t])},ea=function(){let e=z(),t=e.events.myPresence.subscribe,r=e.getPresence;return[N(t,r,r),e.updatePresence]},es=function(e={query:{metadata:{}}}){let{scrollOnLoad:t=!0}=e,r=I(),a=z(),c=n.useMemo(()=>{var t,r;return t=a.id,r=e.query,`${t}-${(0,i.Pz)(r??{})}`},[a,e]),{store:l,getThreadsAndInboxNotifications:d}=P(r),f=l.get().queries[c];if(void 0===f||f.isLoading)throw d(a,c,e);if(f.error)throw f.error;let h=n.useCallback(t=>{var r;return{threads:(r=a.id,Object.values((0,i.Wy)(t).threads).filter(t=>{if(t.roomId!==r||void 0!==t.deletedAt)return!1;let n=e.query;if(!n)return!0;if(void 0!==n.resolved&&t.resolved!==n.resolved)return!1;for(let e in n.metadata){let r=t.metadata[e],i=n.metadata[e];if(s(i)&&u(r)&&r.startsWith(i.startsWith))break;if(r!==i)return!1}return!0}).sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime())),isLoading:!1}},[a,c]);n.useEffect(()=>{let{incrementQuerySubscribers:e}=P(r);return e(c)},[r,c]);let p=(0,o.useSyncExternalStoreWithSelector)(l.subscribe,l.get,l.get,h);return n.useEffect(()=>{!function(e,t){if(!1===e||t.isLoading||!("undefined"!=typeof window))return;let r=window.location.hash.slice(1);if(!r.startsWith("cm_"))return;let n=document.getElementById(r);null!==n&&t.threads.flatMap(e=>e.comments).some(e=>e.id===r)&&n.scrollIntoView()}(t,p)},[p.isLoading]),p};function eu(...e){return function(e,t){let r=z(),n=r.events.others.subscribe,i=r.getOthers;return(0,o.useSyncExternalStoreWithSelector)(n,i,_,e??O,t)}(...e)}var ec=q,el=function(e,t){return!function(){if("undefined"==typeof window)throw Error("You cannot use the Suspense version of this hook on the server side. Make sure to only call them on the client side.\nFor tips, see https://liveblocks.io/docs/api-reference/liveblocks-react#suspense-avoid-ssr")}(),C(z().waitUntilStorageReady()),q(e,t)};function ed(...e){return function(e,t){let r=z(),i=r.events.self.subscribe,a=r.getSelf,s=e??O,u=n.useCallback(e=>null!==e?s(e):null,[s]);return(0,o.useSyncExternalStoreWithSelector)(i,a,j,u,t)}(...e)}},67994:function(e,t,r){r.d(t,{_:function(){return h}});var n=r(2784),i=r.t(n,2);r(28316);var o=r(62656),a=r(52322),s=Symbol.for("react.lazy"),u=i[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===s&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var l=Symbol("radix.slottable");function d(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}var f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...i}=e;if(c(r)&&"function"==typeof u&&(r=u(r._payload)),n.isValidElement(r)){var a;let e,s;let u=(a=r,(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.props.ref:a.props.ref||a.ref),c=function(e,t){let r={...t};for(let n in t){let i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...e)=>{let t=o(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...o}:"className"===n&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==n.Fragment&&(c.ref=t?(0,o.F)(t,u):u),n.cloneElement(r,c)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:i,...o}=e;c(i)&&"function"==typeof u&&(i=u(i._payload));let s=n.Children.toArray(i),l=s.find(d);if(l){let e=l.props.children,i=s.map(t=>t!==l?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...o,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,i):null})}return(0,a.jsx)(t,{...o,ref:r,children:i})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),i=n.forwardRef((e,n)=>{let{asChild:i,...o}=e,s=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(s,{...o,ref:n})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),h=n.forwardRef((e,t)=>(0,a.jsx)(f.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));h.displayName="Label"},64266:function(e,t,r){r.d(t,{VY:function(){return R},aV:function(){return A},fC:function(){return D},xz:function(){return U}});var n=r(2784),i=r(17998),o=r(92211),a=r(2923),s=r(79616),u=r(72714),c=r(59241),l=r(87695),d=r(23372),f=r(52322),h="Tabs",[p,m]=(0,o.b)(h,[a.Pc]),v=(0,a.Pc)(),[b,y]=p(h),g=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:i,defaultValue:o,orientation:a="horizontal",dir:s,activationMode:p="automatic",...m}=e,v=(0,c.gm)(s),[y,g]=(0,l.T)({prop:n,onChange:i,defaultProp:o??"",caller:h});return(0,f.jsx)(b,{scope:r,baseId:(0,d.M)(),value:y,onValueChange:g,orientation:a,dir:v,activationMode:p,children:(0,f.jsx)(u.WV.div,{dir:v,"data-orientation":a,...m,ref:t})})});g.displayName=h;var E="TabsList",w=n.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...i}=e,o=y(E,r),s=v(r);return(0,f.jsx)(a.fC,{asChild:!0,...s,orientation:o.orientation,dir:o.dir,loop:n,children:(0,f.jsx)(u.WV.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});w.displayName=E;var x="TabsTrigger",S=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...s}=e,c=y(x,r),l=v(r),d=T(c.baseId,n),h=I(c.baseId,n),p=n===c.value;return(0,f.jsx)(a.ck,{asChild:!0,...l,focusable:!o,active:p,children:(0,f.jsx)(u.WV.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...s,ref:t,onMouseDown:(0,i.Mj)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,i.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,i.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;p||o||!e||c.onValueChange(n)})})})});S.displayName=x;var C="TabsContent",k=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,forceMount:o,children:a,...c}=e,l=y(C,r),d=T(l.baseId,i),h=I(l.baseId,i),p=i===l.value,m=n.useRef(p);return n.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.jsx)(s.z,{present:o||p,children:({present:r})=>(0,f.jsx)(u.WV.div,{"data-state":p?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:h,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&a})})});function T(e,t){return`${e}-trigger-${t}`}function I(e,t){return`${e}-content-${t}`}k.displayName=C;var D=g,A=w,U=S,R=k}}]);