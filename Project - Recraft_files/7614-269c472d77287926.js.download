try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="72e7ad00-089f-430b-9bcc-ce2ff35296ac",e._sentryDebugIdIdentifier="sentry-dbid-72e7ad00-089f-430b-9bcc-ce2ff35296ac")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7614],{12288:function(e,t,n){var r,i,a=n(2784);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.Z=function(e){return a.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=a.createElement("g",{clipPath:"url(#clip0_40_1752)"},a.createElement("path",{d:"M3.73765 6.04051C3.97198 5.80644 4.35107 5.80628 4.5853 6.04051C4.81953 6.27475 4.81938 6.65384 4.5853 6.88817L3.04917 8.4243C1.8 9.67397 1.80076 11.7002 3.05015 12.9497C4.29974 14.1991 6.32589 14.199 7.57554 12.9497L9.11069 11.4145C9.34492 11.1804 9.725 11.1805 9.95933 11.4145C10.1933 11.6489 10.1935 12.029 9.95933 12.2632L8.42417 13.7983C6.70589 15.5163 3.91974 15.5164 2.20151 13.7983C0.4835 12.0802 0.48372 9.29495 2.20151 7.57665L3.73765 6.04051ZM9.76401 5.38426C9.99833 5.14995 10.3783 5.14995 10.6126 5.38426C10.8466 5.61854 10.8466 5.9977 10.6126 6.23192L6.22788 10.6157C5.99356 10.8499 5.61449 10.85 5.38023 10.6157C5.14611 10.3814 5.1461 10.0023 5.38023 9.76805L9.76401 5.38426ZM7.57554 2.20165C9.2937 0.483639 12.0789 0.483858 13.7972 2.20165C15.5155 3.91991 15.5164 6.70599 13.7982 8.4243L12.263 9.96044C12.0288 10.1945 11.6487 10.1934 11.4144 9.95946C11.1804 9.72518 11.1804 9.34604 11.4144 9.1118L12.9496 7.57567C14.199 6.32603 14.199 4.29992 12.9496 3.05028C11.6999 1.80079 9.67381 1.80079 8.42417 3.05028L6.88804 4.58544C6.65371 4.81957 6.27464 4.81968 6.04038 4.58544C5.80613 4.35118 5.80625 3.97211 6.04038 3.73778L7.57554 2.20165Z",fill:"currentColor"}))),i||(i=a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_40_1752"},a.createElement("rect",{width:16,height:16,fill:"white"})))))}},27147:function(e,t,n){n.d(t,{g:function(){return w}});var r,i=n(52322),a=n(15254),o=n(2784),l=n(96220),s=n(75131),c=n(53171),d=n(81792),u=n(44574),p=n(46132),h=n(47973),g=n(76992);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var f=function(e){return o.createElement("svg",m({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("path",{d:"M4.50003 10L8.5 6L4.5 2",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})))},x=n(12288),v=n(60485),C=n(4984),b=n(65503);let w=e=>{var t,n;let{project:r,onDelete:m,onDuplicate:w,onRename:j,source:y,align:k,children:E,...L}=e,S=(0,a.T)(),{user:T}=(0,u.a)(),O=(0,d.f4)(),{open:z}=(0,l.Rh)(),{mutateAsync:M}=(0,s.L8)(),{mutateAsync:I}=(0,s.NS)(),{mutateAsync:_}=(0,c.d)(),A=(0,o.useCallback)(()=>{(0,b.L9)("ProjectActionsDropDown",{value:"delete",source:y}),z(l.nK.ConfirmModal,{source:"".concat(y,"-delete-project"),titleLabel:S("dialogs.delete.titleLabel"),description:S("dialogs.delete.description.project"),variant:"destructive",onConfirm:async()=>{await M(r.id),null==m||m()}})},[z,y,S,M,r.id,m]),$=(0,o.useCallback)(async e=>{(0,b.L9)("ProjectActionsDropDown",{value:"duplicate",workspaceId:e,source:y});let t=await I({id:r.id,workspaceId:e});null==w||w(t,e)},[I,r.id,w,y]),N=(0,o.useCallback)(()=>{(0,b.L9)("ProjectActionsDropDown",{value:"rename",source:y}),z(l.nK.RenameProject,{source:"".concat(y,"-rename-project"),projectId:r.id,projectTitle:r.title,onSave:async e=>{await _({projectId:r.id,updateProjectPreviewRequest:{title:e}}),null==j||j()}})},[y,z,j,r,_]),P=(0,o.useCallback)(()=>{z(l.nK.ShareDialog,{projectId:r.id,titleLabel:S("dialogs.share.project.title",{name:r.title||S("projects.emptyProject")}),source:"share-project-actions-dropdown"}),(0,b.L9)("ShareButtonClick",{source:"project-actions-dropdown"})},[z,r.id,r.title,S]);return(0,i.jsxs)(p.Lt.Root,{...L,children:[(0,i.jsx)(p.Lt.Trigger,{asChild:!0,children:E}),(0,i.jsxs)(p.Lt.Content,{align:k,children:[(0,i.jsx)(p.Lt.Item,{onClick:N,disabled:r.readOnly,children:(0,i.jsx)(p.Lt.ItemContent,{startContent:(0,i.jsx)(h.Z,{}),children:S("smallAction.rename")})}),O.length>0?(0,i.jsxs)(p.Lt.Sub,{children:[(0,i.jsx)(p.Lt.SubTrigger,{asChild:!0,children:(0,i.jsx)(p.Lt.ItemWrapper,{children:(0,i.jsx)(p.Lt.ItemContent,{startContent:(0,i.jsx)(g.Z,{}),endContent:(0,i.jsx)(f,{}),children:S("smallAction.duplicate")})})}),(0,i.jsxs)(p.Lt.SubContent,{children:[T?(0,i.jsx)(p.Lt.Item,{onClick:()=>$(),children:(0,i.jsx)(p.Lt.ItemContent,{children:null!==(n=null!==(t=T.name)&&void 0!==t?t:T.email)&&void 0!==n?n:T.username})}):null,O.map((e,t)=>{let{data:n}=e;return n?(0,i.jsx)(p.Lt.Item,{onClick:()=>$(n.id),children:(0,i.jsx)(p.Lt.ItemContent,{children:n.name})},n.id):(0,i.jsx)(p.Lt.Item,{disabled:!0,children:(0,i.jsx)(p.Lt.ItemContent,{children:(0,i.jsx)(C.O,{className:"h-4 w-full"})})},t)})]})]}):(0,i.jsx)(p.Lt.Item,{onClick:()=>$(),children:(0,i.jsx)(p.Lt.ItemContent,{startContent:(0,i.jsx)(g.Z,{}),children:S("smallAction.duplicate")})}),(0,i.jsx)(p.Lt.Item,{onClick:P,children:(0,i.jsx)(p.Lt.ItemContent,{startContent:(0,i.jsx)(x.Z,{}),children:S("state.shareProject")})}),(0,i.jsx)(p.Lt.Separator,{}),(0,i.jsx)(p.Lt.Item,{onClick:A,variant:"destructive",disabled:r.readOnly,children:(0,i.jsx)(p.Lt.ItemContent,{startContent:(0,i.jsx)(v.Z,{}),children:S("smallAction.delete")})})]})]})}},5336:function(e,t,n){n.d(t,{B:function(){return N}});var r,i,a,o,l=n(52322),s=n(2784),c=n(42662),d=n(73089),u=n(5356),p=n(2113),h=n(83967),g=n(74225),m=n(63300);let f=(0,h.zo)(c.gC,{position:"relative",width:"100%"}),x=e=>{let{color:t=p.O9.white,min:n=10,max:r=170,value:i=10,disabled:a,onChange:o}=e,c=(0,s.useId)(),d=(0,g.a2)(n,r,10,32,i),{tweakingBrushSize:h}=(0,u.JJ)(),[x,v]=h,C=(0,s.useCallback)(()=>v(!0),[v]),b=(0,s.useCallback)(()=>v(!1),[v]);return(0,l.jsx)(f,{children:(0,l.jsx)(m.OX,{type:"range",list:c,name:"brush-size",onChange:e=>o(Number(e.target.value)),css:{$$size:"".concat(d,"px"),$$color:t},disabled:a,min:n,max:r,frozen:!1,hasStripe:!1,value:i,onPointerDown:C,onPointerUp:b})})};var v=n(94745),C=n(2405),b=n(17758),w=n(99104);let j=(0,h.zo)("button",{inset:0,width:30,height:30,borderRadius:"$6",cursor:"pointer",flexShrink:0,"&:disabled":{cursor:"unset"}}),y=(0,h.zo)("div",{position:"absolute",width:"100%",padding:10,top:45,right:0,background:"$white",borderRadius:"$6",fontSize:0}),k=(0,h.zo)("div",{fontSize:0}),E=e=>{let{color:t,disabled:n,onChange:r}=e,i=(0,s.useRef)(null),a=(0,s.useRef)(null),[o,c]=(0,s.useState)(!1),d=(0,s.useCallback)(()=>{c(!0)},[]),u=(0,s.useCallback)(e=>{r(e.hex)},[r]);return(0,b.V)(i,()=>{c(!1)},[a]),(0,l.jsxs)(k,{ref:i,children:[(0,l.jsx)(j,{ref:a,css:{background:t,border:"1px solid",borderColor:(0,w.H$)(t)?p.O9.mediumDarkGrey:t},disabled:n,onClick:d}),o?(0,l.jsx)(y,{children:(0,l.jsx)(C.z,{disableAlpha:!0,presetColors:!1,color:t,onChange:u})}):null]})},L=(0,h.zo)("div",{"#toAnimate":{transition:"transform $timings$default",transform:"translateY($$offsetYStart)"},"*:has(> &):hover #toAnimate":{transform:"translateY($$offsetYEnd)"},variants:{active:{true:{"#toAnimate":{transform:"translateY($$offsetYEnd)"}}},disabled:{true:{"#toAnimate":{transform:"translateY(0)"}}}}}),S=e=>{let{children:t,active:n,offsetYStart:r=-3,offsetYEnd:i=0,disabled:a}=e;return(0,l.jsx)(L,{active:n,disabled:a,css:{$$offsetYStart:r,$$offsetYEnd:i},children:t})};function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var O=function(e){return s.createElement("svg",T({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=s.createElement("g",{clipPath:"url(#clip0_668_93)"},s.createElement("path",{id:"toAnimate",fillRule:"evenodd",clipRule:"evenodd",d:"M3.59976 18.2982C4.75976 19.4682 6.29977 20.0582 7.85977 20.0582L7.87979 20.0482C9.45979 20.0482 11.0598 19.4482 12.2898 18.2382L18.1999 12.4582C19.0899 11.5882 19.3298 10.2282 18.7998 9.07824C18.2098 7.80824 17.4199 6.65824 16.4399 5.65824C15.5199 4.71824 14.4498 3.92824 13.2798 3.32824C12.1398 2.74824 10.7598 2.94824 9.84976 3.83824L5.58128 8.01022C5.55614 8.02676 5.53215 8.04571 5.50968 8.06706C5.48426 8.0912 5.46207 8.11745 5.44309 8.14529L1.8898 11.6182C0.979802 12.5082 0.739836 13.8882 1.29984 15.0382C1.86984 16.2282 2.62976 17.3082 3.59976 18.2982ZM5.85137 9.14071L2.57987 12.3382C1.97987 12.9282 1.81986 13.8382 2.19986 14.6082C2.72986 15.6982 3.42982 16.6882 4.27982 17.5582C6.26982 19.5682 9.52987 19.5482 11.5799 17.5382L12.8097 16.3355L5.85137 9.14071ZM13.5276 15.6333L6.5695 8.43881L10.5398 4.55824C10.9098 4.19824 11.3998 4.00824 11.8998 4.00824H11.9098C12.2198 4.00824 12.5299 4.07824 12.8199 4.22824C13.8899 4.77824 14.8698 5.49824 15.7198 6.36824C16.6198 7.28824 17.3398 8.34824 17.8798 9.50824C18.2398 10.2782 18.0798 11.1782 17.4898 11.7582L13.5276 15.6333ZM13.9451 13.1296C14.0451 13.2296 14.175 13.2796 14.305 13.2796V13.2896C14.435 13.2896 14.555 13.2396 14.655 13.1496C14.855 12.9596 14.865 12.6396 14.675 12.4396L9.84495 7.37961C9.65495 7.17961 9.33499 7.16961 9.13499 7.35961C8.93499 7.54961 8.92497 7.86961 9.11497 8.06961L13.9451 13.1296ZM16.2538 11.3562C16.1238 11.3562 15.9937 11.3062 15.8937 11.1962L11.0637 6.12621C10.8737 5.92621 10.8837 5.60621 11.0837 5.41621C11.2837 5.22621 11.6037 5.23621 11.7937 5.43621L16.6238 10.5062C16.8138 10.7062 16.8037 11.0262 16.6037 11.2162C16.5037 11.3062 16.3837 11.3562 16.2637 11.3562H16.2538Z",fill:"currentColor"}),s.createElement("rect",{x:7.0293,y:19.0469,width:12,height:1,rx:.5,fill:"currentColor"}))),i||(i=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_668_93"},s.createElement("rect",{width:20,height:20,fill:"white"})))))};function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var M=function(e){return s.createElement("svg",z({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=s.createElement("g",{clipPath:"url(#clip0_668_87)"},s.createElement("path",{id:"toAnimate",fillRule:"evenodd",clipRule:"evenodd",d:"M10.2535 3.12357C10.4487 3.31884 10.4487 3.63542 10.2535 3.83068L6.59687 7.48727C6.01108 8.07305 6.01108 9.0228 6.59687 9.60859L12.2537 15.2654C12.8395 15.8512 13.7893 15.8512 14.375 15.2654L18.0316 11.6089C18.2269 11.4136 18.5435 11.4136 18.7387 11.6089C18.934 11.8041 18.934 12.1207 18.7387 12.316L15.0822 15.9725C14.2268 16.8279 12.9058 16.9339 11.9351 16.2904L11.4737 16.7518C10.6186 17.6069 9.29813 17.7131 8.32748 17.0702L6.133 19.2647C5.15669 20.241 3.57378 20.241 2.59747 19.2647C1.62116 18.2884 1.62116 16.7055 2.59747 15.7292L4.79181 13.5349C4.14841 12.5641 4.25438 11.2432 5.10973 10.3878L5.57125 9.9263C4.9285 8.95566 5.03467 7.63525 5.88976 6.78016L9.54635 3.12357C9.74161 2.92831 10.0582 2.92831 10.2535 3.12357ZM5.46362 14.2773L3.30457 16.4363C2.71879 17.0221 2.71879 17.9718 3.30457 18.5576C3.89036 19.1434 4.84011 19.1434 5.4259 18.5576L7.58494 16.3986L5.46362 14.2773ZM6.24292 10.6689L11.1927 15.6186L10.7666 16.0447C10.1808 16.6305 9.23105 16.6305 8.64527 16.0447L5.81684 13.2163C5.23105 12.6305 5.23105 11.6807 5.81684 11.0949L6.24292 10.6689Z",fill:"currentColor"}),s.createElement("rect",{x:4,y:19,width:12,height:1,rx:.5,fill:"currentColor"}))),o||(o=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_668_87"},s.createElement("rect",{width:20,height:20,fill:"white"})))))};let I=(0,h.zo)("button",{inset:0,width:30,height:30,borderRadius:"$6",color:"$colors$black",cursor:"pointer","&:disabled":{color:"$colors$mediumDarkGrey",background:"transparent",cursor:"unset"},variants:{active:{true:{background:"$colors$mediumGrey"},false:{background:"transparent"}}}}),_=e=>{let{mode:t,active:n,onClick:r,disabled:i,...a}=e;return(0,l.jsx)(I,{active:n,onClick:r,disabled:i,...a,children:(0,l.jsx)(S,{active:n,offsetYStart:"-3px",offsetYEnd:"0px",disabled:i,children:"eraser"===t?(0,l.jsx)(O,{}):(0,l.jsx)(M,{})})})},A=(0,h.zo)(d.Z,{lineHeight:"$15",letterSpacing:"0.17em",textTransform:"uppercase"}),$=(0,h.zo)(c.Ug,{padding:4,borderRadius:"$8",border:"$borders$default",background:"$white",width:"fit-content",position:"relative"}),N=e=>{let{label:t,tool:n,brushSize:r,color:i,disableEraser:a,onToolChange:o,onBrushSizeChange:d,onColorChange:u,className:p}=e,h=(0,s.useRef)(null),g=(0,s.useCallback)(()=>{null==o||o("marker")},[o]),m=(0,s.useCallback)(()=>{null==o||o("eraser")},[o]);return(0,l.jsx)("div",{ref:h,style:{width:"fit-content"},children:(0,l.jsxs)($,{spacing:8,align:"center",className:p,children:[t?(0,l.jsx)(A,{variant:"InterfaceSmallHeader1114",children:t}):null,(0,l.jsxs)(c.Ug,{spacing:4,children:[(0,l.jsx)(_,{mode:"marker",active:"marker"===n,onClick:g}),(0,l.jsx)(_,{mode:"eraser",active:"eraser"===n,onClick:m,disabled:a})]}),(0,l.jsx)(x,{value:r,min:v.Up,max:v.pb,onChange:d}),"marker"===n&&i&&u?(0,l.jsx)(E,{portalRoot:h,color:i,onChange:u}):null]})})}},34477:function(e,t,n){n.r(t),n.d(t,{useLayersList:function(){return T},useLayersListSync:function(){return O}});var r=n(52322),i=n(15254),a=n(2784),o=n(87250),l=n(4286),s=n(42662),c=n(73089),d=n(74821),u=n(72918),p=n(6401),h=n(8710),g=n(96938),m=n(69550),f=n(2113),x=n(83967),v=n(65503),C=n(99104),b=n(16839);let w=(0,a.memo)(e=>{var t,n;let{id:i,handleClick:l,handleVisibleLayer:s,layer:c}=e,d=(0,h.Vw)({id:i,type:"layers"}),u=(0,a.useCallback)(()=>l(i),[i,l]),p=(0,a.useCallback)(e=>s(e,i),[i,s]);return c.image?(0,r.jsxs)(j,{id:"layerPreview-".concat(i),onClick:u,selected:d,hidden:c.hidden,align:"center",spacing:8,children:[(0,r.jsxs)(E,{children:[(0,r.jsx)(y,{onClick:p,children:c.hidden?(0,r.jsx)(o.kG,{}):(0,r.jsx)(o.tC,{})}),(0,r.jsx)(k,{width:150,height:150,imageId:c.image.id,alt:(null===(t=c.prompt)||void 0===t?void 0:t.prompt)||""})]}),(0,r.jsx)(L,{children:(0,r.jsx)(S,{variant:"InterfaceSmallHeader1114",children:null===(n=c.prompt)||void 0===n?void 0:n.prompt})})]}):null}),j=(0,x.zo)(s.Ug,{padding:8,borderRadius:"$8",height:64,cursor:"pointer",border:"1px solid transparent","&:hover":{border:"1px solid $linesGrey"},variants:{selected:{true:{backgroundColor:"$linesGrey",border:"1px solid $linesGrey"},false:{}}}}),y=(0,x.zo)("div",{position:"absolute",top:4,right:4,width:18,height:18,backgroundColor:(0,C.a7)(f.O9.black,.6),borderRadius:"$4",border:"1px solid $black",padding:1}),k=(0,x.zo)(l.G,{objectFit:"cover",width:"100%",height:"100%",borderRadius:"$8",background:"$white !important"}),E=(0,x.zo)("div",{position:"relative",height:48,width:48}),L=(0,x.zo)(s.Ug,{maxWidth:"70%"}),S=(0,x.zo)(c.Z,{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:(0,C.a7)(f.O9.black,.7)}),T=()=>{let e=(0,p.KF)(null,"layers"),t=(0,p.iy)("layers",e),n=(0,p.KF)(null,"mockups"),r=(0,p.iy)("mockups",n);return(0,a.useMemo)(()=>[...t,...r].filter(e=>{let[t,n]=e;return n.image&&!n.frameId}).reverse(),[t,r])},O=()=>{let e=(0,m.y$)(e=>e.layers,b.k),t=(0,m.y$)(e=>e.mockups,b.k);return(0,a.useMemo)(()=>Array.from([...e,...t]).filter(e=>{let[t,n]=e;return n.image&&!n.frameId}).reverse(),[e,t])};t.default=e=>{let{onClose:t}=e,n=(0,i.T)(),l=(0,g.EP)(),p=T(),h=0===p.length,m=(0,a.useCallback)(e=>{l.room.batch(()=>{let t={type:l.layer.get(e)?"layers":"mockups",id:e};l.selection.setOne({selection:t}),l.viewport.objectsCenter([t],{decreaseScaleOnly:!0,extraZoom:u.lz},l.getUIBordersInfo())}),(0,v.L9)("LayerListElementSelected")},[l]),f=(0,a.useCallback)((e,t)=>{var n,r,i,a;e.preventDefault(),e.stopPropagation();let o={type:l.layer.get(t)?"layers":"mockups",id:t};if(l.selection.isSelected(o)&&l.selection.unselect(o),l.layer.get(t)){let e=null===(n=l.layer.getLive(t))||void 0===n?void 0:n.get("hidden");(0,v.L9)(e?"LayerUnhidden":"LayerHidden"),null===(r=l.layer.getLive(t))||void 0===r||r.set("hidden",!e);return}if(l.mockup.get(t)){let e=null===(i=l.mockup.getLive(t))||void 0===i?void 0:i.get("hidden");(0,v.L9)(e?"LayerUnhidden":"LayerHidden"),null===(a=l.mockup.getLive(t))||void 0===a||a.set("hidden",!e);return}},[l]);return(0,r.jsxs)(s.gC,{spacing:10,children:[(0,r.jsxs)(s.Ug,{align:"center",children:[(0,r.jsx)(c.Z,{variant:"InterfaceBody1518",children:n(h?"workspaceNavigation.emptyList":"workspaceNavigation.layerList")}),(0,r.jsx)(s.LZ,{}),(0,r.jsx)(d.f,{onClick:t,children:(0,r.jsx)(o.bM,{})})]}),(0,r.jsx)(s.gC,{spacing:2,children:p.map(e=>{let[t,n]=e;return(0,r.jsx)(w,{id:t,handleClick:m,handleVisibleLayer:f,layer:n},t)})})]})}},7614:function(e,t,n){n.d(t,{om:function(){return tb},fv:function(){return tE},Qg:function(){return tL},im:function(){return tw}});var r,i,a,o,l,s,c,d,u,p,h,g,m,f,x,v,C,b,w,j,y,k,E,L,S,T,O,z,M,I,_,A,$,N,P,R,F,Z,D,B,U,G,X,V,H,K,W=n(52322),Y=n(15254),q=n(2784),J=n(86132),Q=n(85693),ee=n(25919),et=n(28648),en=n(45975),er=n(94968),ei=n(19204),ea=n(42662),eo=n(73089),el=n(72470),es=n(96938),ec=n(83917),ed=n(2113),eu=n(83967),ep=n(65503),eh=n(96220),eg=n(26539),em=n(94718);let ef=[{id:"vectorize-1",projectType:"vectorize",steps:[{target:'[data-testid="topbar-action-importImage"]',content:"Click import in the toolbar or simply drag and drop onto the canvas.",title:"Upload a PNG or JPG file from your computer",isFixed:!0,disableBeacon:!0,disableOverlayClose:!0,beforeStart:[{type:"dropImage",payload:{imageId:(0,n(89629).X6)()?"3f7fc267-73dd-4d56-8836-b96fa2858484":"51415ffb-7a12-440f-b7aa-109637cbac63"}},{type:"openMenu",payload:{menu:"insert"}}]},{target:'[data-testid="topbar-action-vectorize"]',title:"Click the vectorize icon",content:"Wait for the vectorization to complete.",isFixed:!0,disableBeacon:!0,disableOverlayClose:!0},{target:'[data-testid="recraft-topbar-export"]',title:"Export as SVG file",content:"When your vector artwork is ready, export as SVG",isFixed:!0,disableBeacon:!0,disableOverlayClose:!0}]}],ex=(0,eu.zo)(ea.gC,{background:"$black",padding:"16px",borderRadius:"$10",color:"$white",maxWidth:300,animation:"".concat(ec._," $timings$slow ease-in-out")}),ev=(0,eu.zo)(eo.Z,{color:"$darkGrey",cursor:"pointer",marginRight:10,"&:hover":{opacity:.8}}),eC=(0,eu.zo)(eo.Z,{color:"$darkGrey"}),eb=e=>{var t;let{run:n,onFinish:r}=e,i=(0,Y.T)(),[a]=(0,Q.v1)("projectType",(0,Q.S$)(Q.Oi)),o=(0,es.EP)(),{onboardingStatuses:l,updateOnboardingStatus:s}=(0,eg.J)(),{isOnboardingFinished:c}=(0,em.k)(),{activeDialogs:d}=(0,eh.Rh)(),[{run:u,stepIndex:p},h]=(0,et.Z)({run:!1,stepIndex:0}),g=ef[0],m=g.steps;(0,en.Z)(u);let f=()=>{m.length,h({run:!1})};return(0,er.Z)(()=>{var e;(null===(e=m[p])||void 0===e?void 0:e.spotlightClicks)&&p!==m.length-1&&"string"==typeof m[p+1].target&&document.querySelector(m[p+1].target)&&h({run:!0,stepIndex:p+1})},!u&&(null===(t=m[p])||void 0===t?void 0:t.spotlightClicks)?1e3:null),(0,q.useEffect)(()=>{var e;let t=null;return(null===(e=m[p])||void 0===e?void 0:e.spotlightClicks)&&u&&(null==(t="string"==typeof m[p].target?document.querySelector(m[p].target):m[p].target)||t.addEventListener("click",f,{capture:!0})),()=>{var e;(null===(e=m[p])||void 0===e?void 0:e.spotlightClicks)&&(null==t||t.removeEventListener("click",f,{capture:!0}))}},[p,u,m]),(0,q.useEffect)(()=>{let e=m[p];(null==e?void 0:e.beforeStart)&&u&&e.beforeStart.forEach(e=>{if("openMenu"===e.type){let{menu:t}=e.payload,n=document.querySelector('[data-testid="groupbutton-'.concat(t,'"]'));null==n||n.click()}if("dropImage"===e.type){let{imageId:t}=e.payload;null==o||o.import.internalDropMultiple([{imageId:t}])}})},[p,u,o,m]),(0,q.useEffect)(()=>{c&&r()},[c,r]),(0,q.useEffect)(()=>{a&&a[0]===g.projectType&&0===d.length&&n&&c&&(null==l?void 0:l[g.id])===void 0&&!u&&(h({run:n}),(0,ep.L9)("InternalOnboardingStart",{onboardingId:g.id}))},[d.length,a,c,n,l,g.id,g.projectType,u,h]),(0,W.jsx)(ee.ZP,{steps:m,run:u,continuous:!0,locale:{last:i("projects.onboarding.finish")},spotlightPadding:5,callback:e=>{let{status:t,type:n,action:i}=e;n===ee.FP.STEP_AFTER||n===ee.FP.TARGET_NOT_FOUND?h({stepIndex:p+(i===ee.aO.PREV?-1:1)}):(t===ee.Q_.FINISHED||t===ee.Q_.SKIPPED)&&(h({run:!1}),r(),s({onboardingId:g.id,onboardingStatus:ei.uoz.Finished}),(0,ep.L9)("InternalOnboardingFinish",{onboardingId:g.id}))},tooltipComponent:e=>{let{continuous:t,index:n,step:r,size:a,backProps:o,closeProps:l,primaryProps:s,isLastStep:c,...d}=e;return(0,W.jsxs)(ex,{...d,spacing:20,children:[r.title&&(0,W.jsx)(eo.Z,{variant:"InterfaceHeader1822",children:r.title}),(0,W.jsx)(eC,{variant:"InterfaceBody1518",color:ed.O9.darkGrey,children:r.content}),(0,W.jsxs)(ea.Ug,{spacing:10,align:"center",children:[(0,W.jsxs)(eC,{variant:"InterfaceSmallMighty1215",children:[n+1," ",i("projects.onboarding.of")," ",a]}),(0,W.jsx)(ea.LZ,{}),n>0&&(0,W.jsx)(ev,{as:"div",...o,children:r.locale.back}),t&&!r.spotlightClicks&&(0,W.jsx)(el.z,{size:"m",mode:"secondary",...s,children:c?r.locale.last:r.locale.next}),!t&&(0,W.jsx)(el.z,{size:"m",mode:"secondary",...l,children:r.locale.close})]})]})},stepIndex:p,disableScrolling:!0,floaterProps:{disableAnimation:!0,styles:{arrow:{length:7,spread:10}}},styles:{options:{zIndex:eu.I_.tour,arrowColor:ed.O9.black}}})};var ew=n(39097),ej=n.n(ew),ey=n(87250),ek=n(94819),eE=n(7589),eL=n(32814),eS=n(77970),eT=n(7616),eO=n(15952),ez=n(48145),eM=n(95832);function eI(){return(eI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var e_=function(e){return q.createElement("svg",eI({width:80,height:81,viewBox:"0 0 80 81",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=q.createElement("g",{clipPath:"url(#clip0_310_1015)"},q.createElement("circle",{cx:40.2382,cy:40.738,r:33.5317,fill:"#FFCB00"}),q.createElement("path",{d:"M27.1346 50.8886C27.9356 54.1664 30.7346 60.8571 40.2379 60.8571C49.7412 60.8571 52.5401 54.1664 53.3411 50.8886C53.5719 49.9441 52.8241 49.121 51.8518 49.121H28.624C27.6516 49.121 26.9038 49.9441 27.1346 50.8886Z",fill:"currentColor"}),q.createElement("path",{d:"M31.4853 22.2287C31.5618 22.2211 31.6385 22.2166 31.7153 22.215C33.1926 22.177 34.6434 22.7881 35.7091 23.7997C36.8284 24.862 37.4774 26.3272 37.5118 27.8701C37.5343 28.705 37.4203 29.5006 37.1748 30.2985C35.899 34.4446 31.4126 39.3293 28.4371 42.4692C26.3202 41.3151 24.2509 40.118 22.24 38.7852C20.5344 37.6488 18.907 36.4094 17.5057 34.9061C16.0605 33.3556 15.0479 31.5286 15.1351 29.3507C15.2002 27.7645 15.9014 26.2712 17.0804 25.208C18.1624 24.2147 19.6116 23.731 21.07 23.8001C23.0989 23.8962 24.6663 25.0578 25.9877 26.518C26.3607 25.7894 26.7152 25.0677 27.25 24.4392C28.3327 23.167 29.8211 22.3675 31.4853 22.2287Z",fill:"#F13E3D"}),q.createElement("path",{d:"M48.3757 22.2293C49.3364 22.172 50.3102 22.3969 51.1703 22.8213C52.6995 23.5738 53.8581 24.9141 54.3816 26.536C54.8719 25.9971 55.388 25.4862 55.9805 25.0591C57.3527 24.07 58.8989 23.5747 60.5919 23.8614C62.0804 24.1135 63.4268 25.0162 64.2911 26.2463C65.2109 27.5553 65.5261 29.1484 65.25 30.7173C64.6762 33.9785 61.3308 36.6555 58.7545 38.4484C56.6196 39.9475 54.3436 41.2473 52.0395 42.466C51.1518 41.4145 50.1796 40.4264 49.2754 39.3868C46.9868 36.7558 43.2174 32.0371 42.9656 28.5085C42.8528 26.9286 43.3226 25.4251 44.3634 24.2267C45.4048 23.0276 46.7953 22.3352 48.3757 22.2293Z",fill:"#F13E3D"}))),i||(i=q.createElement("defs",null,q.createElement("clipPath",{id:"clip0_310_1015"},q.createElement("rect",{width:80,height:80,fill:"white",transform:"translate(0 0.5)"})))))};function eA(){return(eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var e$=function(e){return q.createElement("svg",eA({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=q.createElement("circle",{cx:24,cy:24,r:19,stroke:"#999999",strokeWidth:2})),o||(o=q.createElement("path",{d:"M19 32C19.4762 31 21.1429 29 24 29C26.8571 29 28.5238 31 29 32",stroke:"#999999",strokeWidth:2,strokeLinecap:"round"})),l||(l=q.createElement("path",{d:"M19 22C19 23.8428 17.8724 25 16.5 25C15.1276 25 14 23.8428 14 22C14 20.1572 15.1276 19 16.5 19C17.8724 19 19 20.1572 19 22Z",fill:"#999999"})),s||(s=q.createElement("path",{d:"M14.0498 18.7622L19.4417 20.2378",stroke:"#999999",strokeWidth:2,strokeLinecap:"round"})),c||(c=q.createElement("path",{d:"M33.95 18.7622L28.558 20.2378",stroke:"#999999",strokeWidth:2,strokeLinecap:"round"})),d||(d=q.createElement("path",{d:"M34 22C34 23.8428 32.8724 25 31.5 25C30.1276 25 29 23.8428 29 22C29 20.1572 30.1276 19 31.5 19C32.8724 19 34 20.1572 34 22Z",fill:"#999999"})))};function eN(){return(eN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eP=function(e){return q.createElement("svg",eN({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),u||(u=q.createElement("circle",{cx:24,cy:24,r:20,fill:"#FF5010"})),p||(p=q.createElement("path",{d:"M19 32C19.4762 31 21.1429 29 24 29C26.8571 29 28.5238 31 29 32",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round"})),h||(h=q.createElement("path",{d:"M19 22C19 23.8428 17.8724 25 16.5 25C15.1276 25 14 23.8428 14 22C14 20.1572 15.1276 19 16.5 19C17.8724 19 19 20.1572 19 22Z",fill:"currentColor"})),g||(g=q.createElement("path",{d:"M14.0498 18.7622L19.4417 20.2378",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round"})),m||(m=q.createElement("path",{d:"M33.9502 18.7622L28.5583 20.2378",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round"})),f||(f=q.createElement("path",{d:"M34 22C34 23.8428 32.8724 25 31.5 25C30.1276 25 29 23.8428 29 22C29 20.1572 30.1276 19 31.5 19C32.8724 19 34 20.1572 34 22Z",fill:"currentColor"})))};function eR(){return(eR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eF=function(e){return q.createElement("svg",eR({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),x||(x=q.createElement("circle",{cx:24,cy:24,r:19,stroke:"#999999",strokeWidth:2})),v||(v=q.createElement("path",{d:"M17.1992 30C17.8659 31.3333 20.1992 34 24.1992 34C28.1992 34 30.5326 31.3333 31.1992 30",stroke:"#999999",strokeWidth:2,strokeLinecap:"round"})),C||(C=q.createElement("path",{d:"M19.1992 21C19.1992 22.8428 18.0716 24 16.6992 24C15.3268 24 14.1992 22.8428 14.1992 21C14.1992 19.1572 15.3268 18 16.6992 18C18.0716 18 19.1992 19.1572 19.1992 21Z",fill:"#999999"})),b||(b=q.createElement("path",{d:"M34.1992 21C34.1992 22.8428 33.0716 24 31.6992 24C30.3268 24 29.1992 22.8428 29.1992 21C29.1992 19.1572 30.3268 18 31.6992 18C33.0716 18 34.1992 19.1572 34.1992 21Z",fill:"#999999"})))};function eZ(){return(eZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eD=function(e){return q.createElement("svg",eZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),w||(w=q.createElement("circle",{cx:24,cy:24,r:20,fill:"#FFCB00"})),j||(j=q.createElement("path",{d:"M17 30C17.6667 31.3333 20 34 24 34C28 34 30.3333 31.3333 31 30",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round"})),y||(y=q.createElement("path",{d:"M19 21C19 22.8428 17.8724 24 16.5 24C15.1276 24 14 22.8428 14 21C14 19.1572 15.1276 18 16.5 18C17.8724 18 19 19.1572 19 21Z",fill:"currentColor"})),k||(k=q.createElement("path",{d:"M34 21C34 22.8428 32.8724 24 31.5 24C30.1276 24 29 22.8428 29 21C29 19.1572 30.1276 18 31.5 18C32.8724 18 34 19.1572 34 21Z",fill:"currentColor"})))};function eB(){return(eB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eU=function(e){return q.createElement("svg",eB({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),E||(E=q.createElement("circle",{cx:24,cy:24,r:19,stroke:"#999999",strokeWidth:2})),L||(L=q.createElement("path",{d:"M19.3994 21C19.3994 22.8428 18.2718 24 16.8994 24C15.527 24 14.3994 22.8428 14.3994 21C14.3994 19.1572 15.527 18 16.8994 18C18.2718 18 19.3994 19.1572 19.3994 21Z",fill:"#999999"})),S||(S=q.createElement("path",{d:"M34.3994 21C34.3994 22.8428 33.2718 24 31.8994 24C30.527 24 29.3994 22.8428 29.3994 21C29.3994 19.1572 30.527 18 31.8994 18C33.2718 18 34.3994 19.1572 34.3994 21Z",fill:"#999999"})),T||(T=q.createElement("path",{d:"M16.584 30.0543C17.0617 32.0094 18.7312 36 24.3994 36C30.0677 36 31.7371 32.0094 32.2148 30.0543C32.3525 29.4909 31.9065 29 31.3265 29H17.4723C16.8924 29 16.4463 29.4909 16.584 30.0543Z",fill:"#999999"})))};function eG(){return(eG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eX=function(e){return q.createElement("svg",eG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),O||(O=q.createElement("circle",{cx:24,cy:24,r:20,fill:"#FFCB00"})),z||(z=q.createElement("path",{d:"M19 21C19 22.8428 17.8724 24 16.5 24C15.1276 24 14 22.8428 14 21C14 19.1572 15.1276 18 16.5 18C17.8724 18 19 19.1572 19 21Z",fill:"currentColor"})),M||(M=q.createElement("path",{d:"M34 21C34 22.8428 32.8724 24 31.5 24C30.1276 24 29 22.8428 29 21C29 19.1572 30.1276 18 31.5 18C32.8724 18 34 19.1572 34 21Z",fill:"currentColor"})),I||(I=q.createElement("path",{d:"M16.1846 30.0543C16.6623 32.0094 18.3317 36 24 36C29.6683 36 31.3377 32.0094 31.8154 30.0543C31.9531 29.4909 31.5071 29 30.9271 29H17.0729C16.4929 29 16.0469 29.4909 16.1846 30.0543Z",fill:"currentColor"})))};function eV(){return(eV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eH=function(e){return q.createElement("svg",eV({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_||(_=q.createElement("circle",{cx:24,cy:24,r:19,stroke:"#999999",strokeWidth:2})),A||(A=q.createElement("path",{d:"M17 29H30.9998",stroke:"#999999",strokeWidth:2,strokeLinecap:"round"})),$||($=q.createElement("path",{d:"M19 21C19 22.8428 17.8724 24 16.5 24C15.1276 24 14 22.8428 14 21C14 19.1572 15.1276 18 16.5 18C17.8724 18 19 19.1572 19 21Z",fill:"#999999"})),N||(N=q.createElement("path",{d:"M34 21C34 22.8428 32.8724 24 31.5 24C30.1276 24 29 22.8428 29 21C29 19.1572 30.1276 18 31.5 18C32.8724 18 34 19.1572 34 21Z",fill:"#999999"})))};function eK(){return(eK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eW=function(e){return q.createElement("svg",eK({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),P||(P=q.createElement("circle",{cx:24,cy:24,r:20,fill:"#FFCB00"})),R||(R=q.createElement("path",{d:"M17 29H30.9998",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round"})),F||(F=q.createElement("path",{d:"M19 21C19 22.8428 17.8724 24 16.5 24C15.1276 24 14 22.8428 14 21C14 19.1572 15.1276 18 16.5 18C17.8724 18 19 19.1572 19 21Z",fill:"currentColor"})),Z||(Z=q.createElement("path",{d:"M34 21C34 22.8428 32.8724 24 31.5 24C30.1276 24 29 22.8428 29 21C29 19.1572 30.1276 18 31.5 18C32.8724 18 34 19.1572 34 21Z",fill:"currentColor"})))};function eY(){return(eY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eq=function(e){return q.createElement("svg",eY({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),D||(D=q.createElement("circle",{cx:24,cy:24,r:19,stroke:"#999999",strokeWidth:2})),B||(B=q.createElement("path",{d:"M16.7998 32C17.4665 31 19.7998 29 23.7998 29C27.7998 29 30.1331 31 30.7998 32",stroke:"#999999",strokeWidth:2,strokeLinecap:"round"})),U||(U=q.createElement("path",{d:"M18.7998 21C18.7998 22.8428 17.6722 24 16.2998 24C14.9274 24 13.7998 22.8428 13.7998 21C13.7998 19.1572 14.9274 18 16.2998 18C17.6722 18 18.7998 19.1572 18.7998 21Z",fill:"#999999"})),G||(G=q.createElement("path",{d:"M33.7998 21C33.7998 22.8428 32.6722 24 31.2998 24C29.9274 24 28.7998 22.8428 28.7998 21C28.7998 19.1572 29.9274 18 31.2998 18C32.6722 18 33.7998 19.1572 33.7998 21Z",fill:"#999999"})))};function eJ(){return(eJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eQ=function(e){return q.createElement("svg",eJ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),X||(X=q.createElement("circle",{cx:24,cy:24,r:20,fill:"#FFCB00"})),V||(V=q.createElement("path",{d:"M17 32C17.6667 31 20 29 24 29C28 29 30.3333 31 31 32",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round"})),H||(H=q.createElement("path",{d:"M19 21C19 22.8428 17.8724 24 16.5 24C15.1276 24 14 22.8428 14 21C14 19.1572 15.1276 18 16.5 18C17.8724 18 19 19.1572 19 21Z",fill:"currentColor"})),K||(K=q.createElement("path",{d:"M34 21C34 22.8428 32.8724 24 31.5 24C30.1276 24 29 22.8428 29 21C29 19.1572 30.1276 18 31.5 18C32.8724 18 34 19.1572 34 21Z",fill:"currentColor"})))};let e0=e=>[{icon:e$,iconSelected:eP,label:e("feedbackForm.score.bad")},{icon:eq,iconSelected:eQ,label:e("feedbackForm.score.poor")},{icon:eH,iconSelected:eW,label:e("feedbackForm.score.ok")},{icon:eF,iconSelected:eD,label:e("feedbackForm.score.good")},{icon:eU,iconSelected:eX,label:e("feedbackForm.score.great")}],e1=e=>[e("feedbackForm.lowScore.options.option1"),e("feedbackForm.lowScore.options.option2"),e("feedbackForm.lowScore.options.option3"),e("feedbackForm.lowScore.options.option4"),e("feedbackForm.lowScore.options.option5"),e("feedbackForm.lowScore.options.option6"),e("feedbackForm.lowScore.options.option7")],e2=e=>[e("feedbackForm.highScore.options.option1"),e("feedbackForm.highScore.options.option2"),e("feedbackForm.highScore.options.option3"),e("feedbackForm.highScore.options.option4"),e("feedbackForm.highScore.options.option5"),e("feedbackForm.highScore.options.option6"),e("feedbackForm.highScore.options.option7")],e9=(0,eT.tv)({base:"ease-in-out-quad absolute right-0 left-0 cursor-pointer text-center transition-[bottom] duration-(--timings-slow)",variants:{checked:{true:"bottom-[6px]",false:"bottom-[-15px]"}},defaultVariants:{checked:!1}}),e4=(0,eT.tv)({base:"text-title-3 text-content-1 ease-in-out-quad transition-opacity duration-(--timings-slow)",variants:{checked:{true:"opacity-100",false:"opacity-0"}},defaultVariants:{checked:!1}}),e3=e=>{let{label:t,icon:n,onChange:r,checked:i,onMouseEnter:a,onMouseLeave:o,scoreHovered:l}=e,s=null!==l&&l!==t&&!i,c="".concat(eE.So.CSAT,"-").concat(t.toLowerCase(),"-rate");return(0,W.jsxs)("div",{className:"bg-content-6 relative flex size-15 items-center justify-center rounded",children:[(0,W.jsx)("input",{type:"radio",name:eE.So.CSAT,id:c,value:t,checked:i,required:!0,onChange:r,className:"absolute m-0 inline-block appearance-none bg-transparent p-0 opacity-0"}),(0,W.jsxs)("label",{htmlFor:c,className:e9({checked:i}),children:[(0,W.jsx)("div",{className:"ease-in-out-quad transition-opacity duration-(--timings-slow)",onMouseEnter:a,onMouseLeave:o,style:{opacity:"".concat(s?.6:1)},children:n}),(0,W.jsx)("div",{className:e4({checked:i}),children:t})]})]})},e8=e=>{let{onG2ReviewClick:t,onMaybeLaterClick:n}=e,r=(0,Y.T)();return(0,W.jsx)("section",{className:"ease-in-out-quad items-between animate-in fade-in slide-in-from-bottom-4 zoom-in-95 fixed right-2 bottom-[50px] z-(--z-sidebar) mb-5 flex h-auto max-w-[348px] flex-col rounded-xl bg-white p-4 text-black transition-[height] duration-(--timings-slow)",children:(0,W.jsxs)("div",{className:"flex flex-col items-center gap-10 text-center",children:[(0,W.jsx)("div",{className:"flex justify-center",children:(0,W.jsx)(e_,{className:"mt-16 size-20"})}),(0,W.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,W.jsx)("h3",{className:"text-content-1 text-headline-4",children:r("feedbackForm.leaveG2ReviewTitle")}),(0,W.jsx)("p",{className:"text-content-2 text-body-2",children:r.rich("feedbackForm.leaveG2ReviewDescription",{credits:e=>(0,W.jsxs)("span",{className:"text-accent-purple-1 inline-flex align-middle",children:[(0,W.jsx)(ey._F,{className:"size-4"}),(0,W.jsx)("span",{children:e})]}),email:e=>(0,W.jsx)(ej(),{href:"mailto:".concat(ek.E.helpEmail),children:e})})})]}),(0,W.jsxs)("div",{className:"mt-6 flex w-full flex-col gap-2",children:[(0,W.jsx)(eO.z,{variant:"primary",size:"m",onClick:t,children:r("feedbackForm.leaveReviewButton")}),(0,W.jsx)(eO.z,{variant:"outline",size:"m",onClick:n,children:r("feedbackForm.maybeLaterButton")})]})]})})},e5=()=>{let[e,t]=(0,q.useState)(!0),[n,r]=(0,q.useState)(!1),[i,a]=(0,q.useState)(!1),[o,l]=(0,q.useState)(""),[s,c]=(0,q.useState)([]),[d,u]=(0,q.useState)(null),[p,h]=(0,q.useState)(null),g="Good"===d||"Great"===d,{onboardingStatuses:m,updateOnboardingStatus:f}=(0,eg.J)(),{data:x,isLoading:v}=(0,eS.Z)(),C=(0,Y.T)();(0,q.useEffect)(()=>{var e;let n=!!((null!==(e=null==x?void 0:x.recraftCount)&&void 0!==e?e:0)>=eL.Oo&&!v&&(null==m?void 0:m.csat)!==ei.uoz.Finished);t(n),n&&(0,ep.L9)("EditorCSATShown")},[x,v,m]);let b=(0,q.useMemo)(()=>e0(C),[C]),w=(0,q.useMemo)(()=>e2(C),[C]),j=(0,q.useMemo)(()=>e1(C),[C]),y=(0,q.useMemo)(()=>(0,eM.S)(g?w:j),[g,w,j]),k=(0,q.useCallback)(()=>{f({onboardingId:eE.So.CSAT,onboardingStatus:ei.uoz.Finished}),(0,ep.L9)("EditorCSATCloseButtonClick"),t(!1)},[f]),E=(0,q.useCallback)((e,t)=>{e.preventDefault(),s.includes(t)?c([...s.filter(e=>e!==t)]):c([...s,t])},[s]),L=(0,q.useCallback)(e=>{u(e.target.value),c([]),(0,ep.L9)("EditorCSATRateSelected",{rate:e.target.value})},[]),S=(0,q.useCallback)(e=>{h(e)},[h]),T=(0,q.useCallback)((0,ez.D)(e=>(0,ep.L9)("EditorCSATFreeFormTextAdded",{text:e}),500),[]),O=(0,q.useCallback)(e=>{l(e.target.value),T(e.target.value)},[l]),z=(0,q.useCallback)(e=>{e.preventDefault();let t={rate:d,feedback:o,selectedItems:s};(0,ep.L9)("EditorCSATFormSubmit",{data:t}),g?a(!0):(f({onboardingId:eE.So.CSAT,onboardingStatus:ei.uoz.Finished,data:t}),r(!0))},[d,o,s,g,f]),M=(0,q.useCallback)(()=>{(0,ep.L9)("EditorCSATG2ReviewClick"),window.open(ek.E.G2,"_blank"),a(!1)},[]),I=(0,q.useCallback)(()=>{(0,ep.L9)("EditorCSATMaybeLaterClick"),a(!1),f({onboardingId:eE.So.CSAT,onboardingStatus:ei.uoz.Finished,data:{rate:d,feedback:o,selectedItems:s}}),r(!0)},[d,o,s,f]);return n?(0,W.jsx)("section",{className:"ease-in-out-quad items-between animate-in fade-in slide-in-from-bottom-4 zoom-in-95 fixed right-2 bottom-[50px] z-(--z-sidebar) mb-5 flex h-auto max-w-[348px] flex-col rounded-xl bg-white p-4 text-black transition-[height] duration-(--timings-slow)",children:(0,W.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,W.jsx)("p",{className:"text-content-1 text-body-2 text-balance",children:C("feedbackForm.thanks")}),(0,W.jsx)(ey.bM,{className:"absolute top-[10px] right-[10px] box-content size-4 cursor-pointer",onClick:()=>r(!1)})]})}):i?(0,W.jsx)(e8,{onG2ReviewClick:M,onMaybeLaterClick:I}):e?(0,W.jsx)("section",{"data-testid":"feedback-form",className:"ease-in-out-quad items-between animate-in fade-in slide-in-from-bottom-4 zoom-in-95 fixed right-2 bottom-[50px] z-(--z-sidebar) mb-5 flex h-auto max-w-[348px] flex-col rounded-xl bg-white p-4 text-black transition-[height] duration-(--timings-slow)",children:(0,W.jsxs)("form",{name:eE.So.CSAT,children:[(0,W.jsx)("h2",{className:"text-content-1 text-title-1 mb-3 max-w-[90%]",children:C("feedbackForm.title")}),(0,W.jsx)(eO.z,{variant:"transparent",size:"s",onClick:k,className:"absolute top-1.5 right-1.5 size-6","aria-label":C("state.close"),"data-testid":"feedback-form-close-button",icon:!0,children:(0,W.jsx)(ey.bM,{className:"size-4"})}),(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsx)("div",{className:"flex gap-1",children:b.map(e=>(0,W.jsx)(e3,{label:e.label,icon:d===e.label?e.iconSelected():e.icon(),onChange:L,checked:d===e.label,scoreHovered:p,onMouseEnter:()=>S(e.label),onMouseLeave:()=>h(null)},e.label))}),d?(0,W.jsxs)("div",{className:"mt-3 flex flex-col gap-2",children:[(0,W.jsx)("p",{className:"text-content-1 text-title-1",children:g?C("feedbackForm.highScore.title"):C("feedbackForm.lowScore.title")}),(0,W.jsx)("textarea",{maxLength:eL.nZ,autoFocus:!0,name:"feedback",placeholder:g?C("feedbackForm.highScore.placeHolder"):C("feedbackForm.lowScore.placeHolder"),value:o,onChange:O,className:"font-display border-base-4 bg-elevated text-body-2 text-content-2 ease-in-out-quad hover:border-base-6 focus:border-base-6 h-[78px] max-h-[150px] w-full resize-none overflow-y-auto rounded-lg border p-2 leading-[18px] transition-[border-color] duration-(--timings-slow) outline-none"}),(0,W.jsx)("ul",{className:"my-2 flex flex-wrap gap-1",children:y.map(e=>(0,W.jsx)("li",{children:(0,W.jsx)(eO.z,{size:"s",type:"button","aria-checked":!!s.includes(e),onClick:t=>E(t,e),variant:s.includes(e)?"accent":"outline",style:{border:"1px solid ".concat(s.includes(e)?"var(--colors-arrancia)":"var(--colors-mediumGrey)")},children:e})},e))}),(0,W.jsx)(eO.z,{size:"m",onClick:z,children:C("feedbackForm.submit")})]}):null]})]})}):null};var e7=n(48134),e6=n(8677),te=n(41376),tt=n(89612),tn=n(23558),tr=n(71442),ti=n(21571),ta=n(79567),to=n(90419),tl=n(72918);let ts=(0,q.lazy)(()=>n.e(6188).then(n.bind(n,84017))),tc=(0,q.lazy)(()=>Promise.resolve().then(n.bind(n,34477))),td=(0,q.lazy)(()=>n.e(6581).then(n.bind(n,54333))),tu=(0,eu.zo)("div",{position:"fixed",right:0,width:272,height:"calc(100vh - ".concat(tl.po,"px)"),background:"$lightGrey",bottom:0,zIndex:1,borderLeft:"1px solid $linesGrey",padding:"12px 12px 70px 12px",overflowY:"auto"}),tp=e=>{let{activePanel:t,onChangePanel:n,className:r}=e,i=(0,q.useRef)(null);return null===t?null:(0,W.jsx)(tu,{ref:i,className:r,children:(0,W.jsxs)(q.Suspense,{fallback:(0,W.jsx)(to.a,{type:"circle"}),children:["layers"===t?(0,W.jsx)(tc,{onClose:()=>n(null)}):null,"gallery"===t?(0,W.jsx)(ts,{scrollableWrapperRef:i}):null,"help"===t?(0,W.jsx)(td,{onClose:()=>n(null)}):null]})})};var th=n(36111);let tg=(0,eu.zo)(ea.gC,{background:"$white",color:"$black",padding:12,borderRadius:"$10",maxWidth:255,marginBottom:20,position:"relative",animation:"".concat(ec._," $timings$slow ease-in-out")}),tm=(0,eu.zo)(eo.Z,{marginBottom:"10px",color:"$darkDarkGrey"}),tf=(0,eu.zo)("video",{width:232,height:"auto",borderRadius:"$4"}),tx=(0,eu.zo)(ey.bM,{cursor:"pointer",boxSizing:"content-box",position:"absolute",right:"10px",top:"10px",width:"10px"}),tv=()=>{let e=(0,Y.T)(),{set:t,value:n}=(0,tn.Fl)(tt.S.INTRODUCE_MAGIC_FRAME),r=()=>{t(!0)};return!0===n?null:(0,W.jsxs)(tg,{children:[(0,W.jsx)(tm,{as:"p",variant:"InterfaceSmallMighty1215",children:e("graphicDesignGenerator.title")}),(0,W.jsx)(ea.LZ,{}),(0,W.jsx)(tx,{onClick:r}),(0,W.jsxs)(ea.gC,{spacing:10,children:[(0,W.jsx)(tf,{src:(0,th.v)("/videos/features/newFrameTool.mp4"),muted:!0,autoPlay:!0,loop:!0}),(0,W.jsx)(eo.Z,{variant:"M",children:e("graphicDesignGenerator.featureIntroduce.title")}),(0,W.jsx)(eo.Z,{variant:"S",css:{letterSpacing:0},children:e("graphicDesignGenerator.featureIntroduce.description")}),(0,W.jsx)(el.z,{mode:"accent",size:"s",onClick:r,children:e("graphicDesignGenerator.featureIntroduce.cta")})]})]})};var tC=n(34477);let tb=(0,eu.zo)(ea.Ug,{padding:"12px 10px",border:"1px solid $linesGrey",backgroundColor:"$white",borderRadius:"$8",height:52}),tw=(0,eu.zo)("div",{position:"fixed",bottom:12,right:0,marginLeft:8,marginRight:8,zIndex:"$sidebar"}),tj=(0,eu.zo)(tb,{zIndex:"1",height:38,padding:3}),ty=(0,eu.zo)("div",{width:1,height:"100%",margin:"0 2px",backgroundColor:"$linesGrey",zIndex:"$sidebar"}),tk=(e,t)=>t&&e===eE.CQ.gallery?null:e||null,tE=()=>{let e=(0,Y.T)(),{value:t,set:n}=(0,tn.Fl)(tt.S.EDITOR_SIDE_MENU_TAB),{canShowPromoDialogs:r}=(0,ti.g)(),i=(0,es.oF)(),a=!!(null==i?void 0:i.isReadOnly),o=tk(t,a),[l,s]=(0,q.useState)(o),[c,d]=(0,q.useState)(!0),u=(0,J.ol)(),{isChatEnabled:p}=(0,tr.J)(),h=(0,tC.useLayersListSync)();(0,q.useEffect)(()=>{(0,ep.L9)("BottomMenuPanelOpenByDefault",{panel:t})},[]),(0,q.useEffect)(()=>{o&&s(o)},[o]);let g=(0,q.useCallback)(e=>{let r=e===l?null:e;s(r),(0,ep.L9)("BottomMenuChangePanel",{panel:r}),r!==t&&n(r)},[l,n,t]);return u?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(tw,{children:[(0,W.jsx)(eb,{run:c,onFinish:()=>d(!1)}),r&&!l?(0,W.jsx)(tv,{}):null,(0,W.jsx)(e5,{}),p?null:(0,W.jsxs)(tb,{"data-testid":"bottom-menu",spacing:5,align:"center",children:[(0,W.jsx)(e7.JE,{action:u[te.X.HISTORY_UNDO],source:"bottom-menu"}),(0,W.jsx)(e7.JE,{action:u[te.X.HISTORY_REDO],source:"bottom-menu"}),(0,W.jsx)(e7.JE,{action:u[te.X.CANVAS_ZOOM],source:"bottom-menu"}),(0,W.jsx)(ty,{}),(0,W.jsx)(ta.u,{content:e("bottomMenu.layers"),children:(0,W.jsx)(e6.E,{type:"layers",disabled:!h.length,active:"layers"===l,hoverable:!0,onClick:()=>g(eE.CQ.layers)})}),a?null:(0,W.jsx)(ta.u,{content:e("bottomMenu.gallery"),children:(0,W.jsx)(e6.E,{type:"history",active:"gallery"===l,hoverable:!0,onClick:()=>g(eE.CQ.gallery)})}),(0,W.jsx)(ta.u,{content:e("bottomMenu.help.help"),children:(0,W.jsx)(e6.E,{"data-testid":"bottom-menu-help",active:"help"===l,type:"roundHelp",hoverable:!0,onClick:()=>g(eE.CQ.help)})})]})]}),p?null:(0,W.jsx)(tp,{activePanel:l,onChangePanel:g})]}):null},tL=e=>{let{className:t}=e,n=(0,Y.T)(),[r,i]=(0,q.useState)(null),a=(0,q.useCallback)(e=>{let t=e===r?null:e;i(t),(0,ep.L9)("BottomMenuChangePanel",{panel:t})},[r]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(tw,{className:t,children:(0,W.jsx)(tj,{children:(0,W.jsx)(ta.u,{content:n("bottomMenu.help.help"),children:(0,W.jsx)(e6.E,{active:"help"===r,type:"roundHelp",hoverable:!0,onClick:()=>a(eE.CQ.help)})})})}),(0,W.jsx)(tp,{className:"m-3 mb-15 h-auto! rounded-md bg-white! pb-3! shadow-md",activePanel:r,onChangePanel:a})]})}},92066:function(e,t,n){n.d(t,{T:function(){return p}});var r=n(52322),i=n(15254),a=n(2784),o=n(94814);let l=e=>{let{command:t,withoutLabel:n,mode:r="light"}=e,i=(0,o.Cy)(),l=(0,a.useMemo)(()=>t?i.getByCommand(t):void 0,[t,i]);return l?n?null:l.label:null};var s=n(42662),c=n(20672),d=n(79567),u=n(65503);let p=e=>{var t,n,o;let{actionId:p,tooltip:h,command:g,mode:m}=e,f=(0,i.T)(),x=(0,a.useCallback)(()=>{var e,t;(null==h?void 0:null===(t=h.data)||void 0===t?void 0:null===(e=t.action)||void 0===e?void 0:e.url)&&window.open(h.data.action.url,"_blank"),(0,u.L9)("ActionCommandMenuTooltipActionClick",{action:null==h?void 0:h.id})},[h]),v=(0,a.useMemo)(()=>{var e;if(null==h?void 0:null===(e=h.data)||void 0===e?void 0:e.action)return{label:h.data.action.label||"",onClick:x}},[h,x]);if(!(null==h?void 0:h.data))return g?(0,r.jsx)(s.Ug,{spacing:10,align:"center",children:(0,r.jsx)(l,{command:g,mode:m})}):(0,c.H)(f,"actions.".concat(p),p);let C=h.data.title||h.data.text,b=h.data.title?h.data.text:void 0;return void 0===v&&null==h.data.video&&void 0===b?C:(0,r.jsx)(d.u.Content,{title:C,subtitle:b,topContent:(null===(t=h.data)||void 0===t?void 0:t.video)?(0,r.jsx)("video",{className:"block w-full rounded-md",autoPlay:null===(n=h.data.video)||void 0===n?void 0:n.autoplay,controls:!0,muted:!0,src:null===(o=h.data.video)||void 0===o?void 0:o.url}):null,cta:v})}},33755:function(e,t,n){n.d(t,{f:function(){return d}});var r=n(15254),i=n(2784),a=n(96220),o=n(41376),l=n(89612),s=n(23558),c=n(65503);let d=(e,t)=>{let n=(0,r.T)(),{open:d}=(0,a.Rh)(),{value:u,set:p,isLoading:h}=(0,s.Fl)(l.S.CONFIRM_EXPENSIVE_UPSCALE_ACTION),g=(0,i.useCallback)(()=>{p(!0)},[p]),m=(0,i.useCallback)(()=>{(0,c.L9)("ActionConfirmCancel",{id:e}),g()},[e,g]),f=(0,i.useCallback)(()=>{(0,c.L9)("ActionConfirmConfirm",{id:e}),g()},[e,g]);return h||u||e!==o.X.SELECTION_GENERATIVE_UPSCALE?t:async()=>{(0,c.L9)("ActionConfirmShow",{id:e}),await d(a.nK.ConfirmModal,{titleLabel:n("subscriptions.popup.creativeUpscale.title"),description:n("subscriptions.popup.creativeUpscale.description"),cancelMode:"secondary",confirmMode:"primary",cancelLabel:n("subscriptions.popup.creativeUpscale.cancelLabel"),confirmLabel:n("subscriptions.popup.creativeUpscale.confirmLabel"),onConfirm:f,onCancel:m,source:"warning-wall"}).promise&&t()}}},48134:function(e,t,n){n.d(t,{W4:function(){return ta},YS:function(){return tl},JE:function(){return td},$p:function(){return ts}});var r,i,a,o,l,s,c,d,u=n(52322),p=n(2784),h=n(42662),g=n(73089),m=n(8677),f=n(41376),x=n(44574),v=n(79567),C=n(83967),b=n(65503),w=n(89629),j=n(73008);function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let k=(0,C.zo)("div",{position:"relative",borderRadius:6,cursor:"pointer"}),E=(0,C.zo)("div",{pointerEvents:"none"}),L=(0,C.zo)(function(e){return p.createElement("svg",y({width:5,height:6,viewBox:"0 0 5 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=p.createElement("path",{d:"M3.77145 6H1.22855C0.774979 6 0.37143 5.76083 0.225002 5.40792C0.0750018 5.04333 0 4.66417 0 4.27625C0 3.86208 0.0857038 3.45667 0.257132 3.06875C0.407132 2.73042 0.807143 2.5 1.25 2.5H3.75C4.19286 2.5 4.59287 2.7275 4.74287 3.06875C4.9143 3.45667 5 3.86208 5 4.27625C5 4.66125 4.925 5.04333 4.775 5.40792C4.62857 5.76375 4.22859 6 3.77145 6ZM1.25 2.79167C0.957143 2.79167 0.692869 2.94333 0.592869 3.16792C0.435726 3.52375 0.357143 3.89708 0.357143 4.27625C0.357143 4.63208 0.424984 4.97917 0.56427 5.31458C0.660699 5.55083 0.928551 5.70833 1.22855 5.70833H3.77145C4.07145 5.70833 4.3393 5.55083 4.43573 5.31458C4.57144 4.97917 4.64286 4.63208 4.64286 4.27625C4.64286 3.89708 4.56427 3.52375 4.40713 3.16792C4.30713 2.94333 4.04643 2.79458 3.75358 2.79458H1.25357L1.25 2.79167Z",fill:"currentColor"})),i||(i=p.createElement("path",{d:"M3.9536 6C4.33217 6 4.66787 5.78045 4.78572 5.46227C4.92501 5.09 5 4.69227 5 4.27864C5 3.83636 4.91431 3.41 4.75359 3.01545C4.62859 2.70682 4.3 2.5 3.92857 2.5H1.07143C0.703571 2.5 0.371429 2.70682 0.246429 3.01545C0.0857152 3.41 0 3.83636 0 4.27864C0 4.69227 0.0750131 5.09 0.214299 5.46227C0.335727 5.78364 0.667876 6 1.04645 6H3.95002H3.9536Z",fill:"currentColor"})),a||(a=p.createElement("rect",{x:1.5,y:.5,width:2,height:3.5,rx:1,stroke:"currentColor"})))},{position:"absolute",width:5,height:6,right:0,bottom:3,variants:{faded:{true:{opacity:"0.3"},false:{}}}}),S=e=>{let{actionId:t,faded:n,enabled:r,children:i}=e,{canHandleFeature:a}=(0,j.n)(),o=(0,p.useCallback)(async()=>{(0,b.L9)("ActionWithPaywall",{actionId:t}),await a("generativeUpscale")},[t]);return r?(0,u.jsxs)(k,{onClick:o,children:[(0,u.jsx)(E,{children:i}),(0,u.jsx)(L,{faded:n})]}):i};var T=n(92066),O=n(15254),z=n(72470),M=n(64907),I=n(48334);function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let A=(0,C.zo)(function(e){return p.createElement("svg",_({width:15,height:15,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.51058 1.23494C7.57173 1.16998 7.63079 1.10589 7.68863 1.04313C8.20965 0.477748 8.63077 0.0207797 9.57805 0.011571C9.72748 -0.0143164 9.91013 0.00784506 10.0586 0.0329384C12.0227 0.364892 12.6444 3.01885 11.0721 4.12523C11.258 4.13063 11.4449 4.12883 11.6315 4.12703H11.6315H11.6315C11.7247 4.12613 11.8178 4.12523 11.9108 4.12523L14.1595 4.12448C14.5674 4.12382 14.9936 4.13718 14.9989 4.65662C15.001 4.85849 14.9997 5.06046 14.9984 5.26241C14.9974 5.41898 14.9964 5.57555 14.9969 5.73206C15.001 6.88722 14.8929 6.88607 14.0204 6.87682C13.9354 6.87592 13.8431 6.87495 13.743 6.87495L8.02248 6.87458V4.56932H6.98018V6.87458H6.47111L0.985334 6.87417C0.905533 6.8742 0.831175 6.8757 0.762051 6.8771C0.217084 6.88813 -0.00261127 6.89258 2.33948e-05 6.11446L0.000557973 4.89395C-0.000905226 4.07863 0.293511 4.09158 0.84662 4.1159H0.846624C0.95102 4.12049 1.06463 4.12548 1.18721 4.12539L3.59642 4.12585C3.63109 4.12617 3.6658 4.12701 3.70051 4.12784L3.70056 4.12784H3.70057C3.7858 4.1299 3.8711 4.13195 3.95614 4.12643L3.97378 4.12523C2.70178 3.22914 2.74927 1.42649 3.93023 0.488895C4.91982 -0.296766 6.28673 -0.0569894 7.14322 0.801094C7.27793 0.936027 7.39368 1.08471 7.51058 1.23494ZM5.21729 0.996656C3.99927 1.1433 3.57496 2.5717 4.49473 3.302C4.88446 3.61147 5.22197 3.60724 5.66033 3.60174C5.71278 3.60108 5.76668 3.6004 5.82228 3.60024H7.01258L7.0134 2.96844C7.01342 2.94013 7.01379 2.9115 7.01417 2.88272V2.88269C7.01541 2.78714 7.01667 2.68988 7.00514 2.59655C6.90641 1.79809 6.06287 0.844458 5.21729 0.996656ZM9.57805 0.996656C8.75882 1.0783 8.08433 1.79131 8.0076 2.60441C7.99311 2.75824 8.00299 3.00736 8.01216 3.23836V3.23837V3.23838C8.01748 3.37251 8.02256 3.50053 8.02248 3.60024H9.44445C9.93756 3.59991 10.2375 3.56985 10.6072 3.1982C11.5402 2.26026 10.6008 0.776725 9.57805 0.996656ZM6.98045 14.9893L2.23653 14.9897C1.23961 14.9898 1.23961 14.9771 1.23978 13.9186L1.23979 13.8877L1.23962 7.88773H6.98045L6.98054 12.3527C6.98054 12.5884 6.97925 12.8243 6.97796 13.0603V13.0604C6.97446 13.6993 6.97097 14.3389 6.99304 14.9762L6.98045 14.9893ZM8.02258 7.88773V14.9893L12.7828 14.9897C12.8356 14.9897 12.8905 14.9922 12.9462 14.9947C13.18 15.0053 13.4296 15.0165 13.605 14.8508C13.802 14.6314 13.7859 14.3313 13.7704 14.0443C13.7664 13.969 13.7624 13.8946 13.7623 13.8228L13.762 9.38365C13.762 9.21701 13.7629 9.05024 13.7638 8.88344C13.7655 8.55145 13.7673 8.21931 13.7622 7.88773C13.644 7.90301 13.525 7.89802 13.406 7.89303C13.3491 7.89065 13.2923 7.88827 13.2355 7.8881L8.02258 7.88773Z",fill:"white"})))},{height:"15px !important",width:"15px !important",flex:"0 0 15px !important"});var $=n(85976),N=n(96220),P=n(87250),R=n(61186),F=n(40714),Z=n(94745),D=n(72918),B=n(89612),U=n(23558),G=n(8710),X=n(64169),V=n(17758),H=n(96938),K=n(28608),W=n(84465),Y=n(42444),q=n(24513),J=n(7616),Q=n(15952),ee=n(7374),et=n(11261),en=n(94526);function er(){return(er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var ei=function(e){return p.createElement("svg",er({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=p.createElement("path",{d:"M11.2002 14.7969C11.8628 14.797 12.4004 15.3344 12.4004 15.9971C12.4004 16.6597 11.8628 17.1972 11.2002 17.1973C10.5375 17.1973 10 16.6598 10 15.9971C10 15.3343 10.5375 14.7969 11.2002 14.7969ZM16 14.7969C16.6627 14.797 17.2002 15.3344 17.2002 15.9971C17.2002 16.6597 16.6627 17.1972 16 17.1973C15.3373 17.1973 14.7998 16.6598 14.7998 15.9971C14.7998 15.3343 15.3373 14.7969 16 14.7969ZM20.7998 14.7969C21.4625 14.7969 22 15.3343 22 15.9971C22 16.6598 21.4625 17.1973 20.7998 17.1973C20.1372 17.1971 19.6006 16.6597 19.6006 15.9971C19.6006 15.3344 20.1372 14.797 20.7998 14.7969Z",fill:"#AAAAAA",fillOpacity:1})))};function ea(){return(ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eo=function(e){return p.createElement("svg",ea({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=p.createElement("path",{d:"M5.25 9.5L9 13.25L14.75 6",stroke:"white",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})))};function el(){return(el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let es=(0,J.tv)({slots:{popupEntry:["relative top-0","w-62","!mt-3.25 !-ml-21","bg-elevated !rounded-xl","outline-none"],sidePopupEntry:["absolute","!top-[calc(100%+2px)] !left-0","h-fit w-62","!ml-0","bg-elevated !rounded-xl","outline-none"],inputWrapper:["flex items-center","h-8 w-26","gap-1 px-2.5 py-2","bg-base-4 rounded-md"],inputLabel:"text-body-3 text-content-2",input:["flex-1","h-full w-full","text-body-3 text-content-1 caret-content-1","border-none bg-transparent outline-none"],upsaleText:"text-body-3 text-content-1",upsaleLink:["text-accent-purple-1 hover:text-accent-purple-1/90","cursor-pointer appearance-none underline"]},variants:{clickable:{true:{input:"cursor-pointer"}}}}),ec=e=>e!=$.T2.Svg&&e!=$.T2.Lottie,ed=e=>e!=$.T2.Png&&e!=$.T2.Jpeg&&e!=$.T2.TiffCMYK&&e!=$.T2.PdfAuto&&e!=$.T2.PdfRaster&&e!=$.T2.PdfVector,eu=(0,C.zo)(h.Ug,{position:"absolute",width:"0"}),ep=(0,C.zo)(function(e){return p.createElement("svg",el({width:47,height:15,viewBox:"0 0 47 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),c||(c=p.createElement("g",{clipPath:"url(#clip0_8605_83242)"},p.createElement("path",{d:"M49 -51.5C54.2467 -51.5 58.5 -47.2467 58.5 -42L58.5 -9C58.5 -3.75329 54.2467 0.5 49 0.5L37 0.499999C33.3452 0.499999 30.4414 3.6677 30.4414 7.5C30.4414 11.3323 33.3452 14.5 37 14.5L49 14.5C54.2467 14.5 58.5 18.7533 58.5 24L58.5 64C58.5 69.2467 54.2467 73.5 49 73.5L-1.00001 73.5C-6.24671 73.5 -10.5 69.2467 -10.5 64L-10.5 24C-10.5 18.7533 -6.24671 14.5 -1 14.5L10 14.5C13.6547 14.5 16.5586 11.3323 16.5586 7.5C16.5586 3.6677 13.6547 0.499998 10 0.499998L-1 0.499997C-6.24671 0.499997 -10.5 -3.7533 -10.5 -9L-10.5 -42C-10.5 -47.2467 -6.2467 -51.5 -1 -51.5L49 -51.5Z",fill:"#2C2C2C",stroke:"#2C2C2C"}))),d||(d=p.createElement("defs",null,p.createElement("clipPath",{id:"clip0_8605_83242"},p.createElement("rect",{width:15,height:47,fill:"white",transform:"translate(47) rotate(90)"})))))},{position:"absolute",top:"-14px",left:"95px",zIndex:"-1"}),eh=(0,C.zo)(h.gC,{gap:"12px"}),eg=(0,C.zo)("div",{display:"grid",gap:"8px",gridTemplateColumns:"1fr 1fr"}),em=(0,C.zo)(z.z,{height:"32px !important",width:"32px !important",backgroundColor:"#2A2A2A !important",borderRadius:"6px !important",transform:"translateZ(0)","& > svg":{height:"32px !important",width:"32px !important",flex:"0 0 32px !important"}}),ef=(0,C.zo)(z.z,{position:"relative",alignItems:"left",paddingLeft:"0 !important",backgroundColor:"$transparent !important",borderRadius:"$0 !important",transform:"translateZ(0)"}),ex=(0,C.zo)("span",{...g.L.S,color:"$colors$black !important"}),ev=(0,C.zo)(h.Ug,{...g.L.InterfaceSmall1114,color:"#2A2A2A",alignItems:"center",gap:"4px",width:"106px",heihgt:"32px"}),eC=(0,C.zo)(h.Ug,{...g.L.InterfaceSmall1114,color:"#2A2A2A",alignItems:"right",gap:"4px"}),eb=(0,C.zo)("a",{textDecoration:"none",color:"#7368F2"}),ew=(0,C.zo)(g.Z,{color:"#989898"}),ej=e=>void 0===e?"".concat(Z.Zg):null===e?"":"".concat(e),ey=(0,C.zo)(F.P,{width:"176px !important",height:"32px !important",minHeight:"32px",maxHeight:"32px",color:"$colors$black",backgroundColor:"#2A2A2A !important",boxShadow:"none !important",border:"none !important"}),ek=(0,C.zo)(q.VY,{position:"relative",overflow:"hidden",backgroundColor:"#2A2A2A",borderRadius:10,minWidth:"var(--radix-select-trigger-width)",maxHeight:"var(--radix-select-content-available-height)",zIndex:"$zIndices$selects"}),eE=(0,C.zo)("span",{position:"relative",display:"inline-block",flexShrink:"0",width:"20px",height:"20px",backgroundColor:"#29CCB1 !important",borderRadius:"6px"}),eL=(0,C.zo)("span",{width:"20px",height:"20px",backgroundColor:"#484848 !important",borderRadius:"6px"}),eS=e=>{let{onClick:t,active:n,text:r}=e;return(0,u.jsxs)(ef,{disabled:!1,mode:"secondary","data-testid":"additional-export-options",onClick:()=>t(n),children:[n?(0,u.jsxs)(eE,{children:[" ",(0,u.jsx)(eo,{})]}):(0,u.jsx)(eL,{}),(0,u.jsx)(ex,{children:r})]})},eT=(0,C.zo)(q.ck,{...g.L.InterfaceSmallMighty1215,position:"relative",background:"#2A2A2A",cursor:"pointer",padding:"5px 8px 6px 10px",color:"$colors$black",borderRadius:"$6",outline:"none",alignItems:"center",whiteSpace:"nowrap","*":{color:"#F7F7F7"},"&[data-highlighted]":{background:"$colors$arrancia"},"&[data-disabled]":{opacity:.5,cursor:"default"}}),eO=(0,C.zo)(z.z,{justifyContent:"space-between !important",paddingLeft:"7.5px !important","*":{color:"#F7F7F7"}}),ez=e=>{var t;let{visible:n,disabled:r,availableFormats:i,exportingFormats:a,targetRef:o,onApply:l,onOutsideClick:s,...c}=e,d=(0,O.T)(),g=(0,p.useRef)(null),{entity:m}=(0,W.Q_)("frames"),{entity:f}=(0,W.Q_)("mockups"),{entity:v}=(0,W.Q_)("layers"),{showPrivateRecraftUpsale:w}=(0,x.a)(),{open:j}=(0,N.Rh)(),y=(0,G.SP)(),{isExportPaywallEnabled:k}=(0,K.sX)(),{set:E,value:L}=(0,U.Fl)(B.S.PAYWALL_EXPORT_SHOWN),S=es({clickable:k}),T=(null!==(t=null==y?void 0:y.length)&&void 0!==t?t:0)>1,z=(0,et.M)(null==v?void 0:v.image),[M,I]=(0,p.useState)(!1),_=(0,Y.S)(e=>e.dpi),A=(0,p.useCallback)(()=>{M||null==s||s()},[M,s]);(0,V.V)(g,A,[o]);let F=(0,p.useMemo)(()=>{var e;let t=null==v?void 0:null===(e=v.image)||void 0===e?void 0:e.size;if(!t)return;let n=(0,X.bk)({imageBbox:{x:0,y:0,...t},transform:en.gD,effects:(null==v?void 0:v.effects)||[]});return{w:n.w,h:n.h}},[v]),{w:Z,h:q,aspectRatio:J}=(0,p.useMemo)(()=>{if(m){let e=Math.round(null==m?void 0:m.bbox.w)||D.$7,t=Math.round(null==m?void 0:m.bbox.h)||D.R$;return{w:e,h:t,aspectRatio:e/t}}if(f){let{w:e,h:t}=(0,X.I1)(f.transform,f.imageBbox);return{w:e=Math.max(1,Math.round(e)),h:t=Math.max(1,Math.round(t)),aspectRatio:e/t}}if(v){let e=(0,X.vQ)(v),t=Math.max(1,Math.round(e.w)),n=Math.max(1,Math.round(e.h));return{w:t,h:n,aspectRatio:t/n}}let e=D.$7,t=D.R$;return{w:e,h:t,aspectRatio:e/t}},[m,v]),er=(0,p.useMemo)(()=>{let e,t;let n=(null==m?void 0:m.bbox.w)||(null==F?void 0:F.w)||D.$7,r=(null==m?void 0:m.bbox.h)||(null==F?void 0:F.h)||D.R$;if((0,et.M)(null==v?void 0:v.image)||f?(e=Z,t=q):J>n/r?(e=Math.ceil(n),t=Math.ceil(n/J)):(e=Math.ceil(r*J),t=Math.ceil(r)),k){let n=(0,ee.B)(e,t,K.ZI);e=n.width,t=n.height}return{width:e,height:t}},[v,m,f,J,F,Z,q,k]),[ea,eo]=(0,p.useState)(er),el=(0,p.useRef)({width:Z,height:q}),ef=(0,p.useCallback)(e=>{eo(t=>(el.current=t,e))},[]),ex=!ea.height||!ea.width||r,eE=er.height===ea.height&&er.width===ea.width,eL=(0,p.useCallback)(e=>{k&&(j(N.nK.PaywallDialog,{paywallType:"HighQualityExport",feature:"unlimitedRecrafts",source:e}),E(!0))},[k,j,E]),ez=(0,p.useCallback)(e=>{null==e||e.preventDefault(),(0,b.L9)("ExportPaywallTriggeredFromUI",{source:"resolution-input-click"}),eL("export-resolution-input")},[eL]),eM=(0,p.useCallback)(()=>{k&&((0,b.L9)("ExportPaywallTriggeredFromUI",{source:"dpi-input-click"}),eL("export-dpi-input"))},[k,eL]),eI=(0,p.useCallback)(e=>t=>{if(k){ez();return}let n=0,r="width"===e?"height":"width";if(t.target.value)try{n=parseInt(t.target.value.slice(0,5))}catch(e){return}if(!isNaN(n)){let t="width"===e?"ExportPanelWidthChange":"ExportPanelHeightChange",i="width"===r?n*J:n/J,a={[e]:Math.ceil(n),[r]:Math.ceil(i)};(0,b.L9)(t,a),ef(a)}},[J,ef,k,ez]),e_=(0,p.useCallback)(e=>{e?((0,b.L9)("ExportPanelMaxDimensionsToggle",{isMaxSize:!e,...el.current}),ef(el.current)):((0,b.L9)("ExportPanelMaxDimensionsToggle",{isMaxSize:!e,...er}),ef(er))},[er,ef]),eA=(0,Y.S)(e=>e.optimizeSvgs),e$=Object.keys(i).filter(e=>!!i[e]).sort((e,t)=>$.go[e]-$.go[t]),[eN,eP]=(0,p.useState)(e$[0]);(0,p.useEffect)(()=>eP(i[eN]?eN:e$[0]),[e$,eN,i]);let[eR,eF]=(0,p.useState)(!1),eZ=(0,p.useCallback)(e=>()=>{k&&!L&&eL("export-button-click"),(0,b.L9)("TopbarMenuAction",{id:"export",type:e,isOptimizeSvgsEnabled:eA,dpi:k?K.kw:_,selection:T?"multi":(null==y?void 0:y.length)?y[0].type:"none"}),l({format:e,width:T?void 0:ea.width,height:T?void 0:ea.height})},[L,eA,k,_,T,y,l,ea.width,ea.height,eL]),eD=(0,p.useCallback)(e=>{null==e||e.preventDefault(),j(N.nK.PricingModal,{source:"editor-export-upsale"}),(0,b.L9)("EditorExportUpsalePrivateRecraftsClick")},[j]),eB=(0,p.useMemo)(()=>ec(eN),[eN]),eU=(0,p.useMemo)(()=>ed(eN),[eN]),eG=Z===er.width&&q===er.height,eX=(0,H.EP)(),eV=(0,p.useCallback)(e=>{let{value:t}=e;(0,b.L9)("OptimizeSvgsToggle",{isOptimizeSvgsEnabled:t}),eX.room.updatePresence({optimizeSvgs:t})},[]),eH=(0,p.useMemo)(()=>{if(!eU)return null;let e=d("menu.export.optimizeSvg");return T?e=d("menu.export.optimizeSvgs"):eN===$.T2.Lottie&&(e=d("menu.export.optimizeLottie")),(0,u.jsx)(eS,{text:e,onClick:e=>eV({value:!e}),active:!!eA})},[eN,eV,eU,T,eA,d]),eK=(0,p.useCallback)(e=>{if(k){(0,b.L9)("ExportPaywallTriggeredFromUI",{source:"dpi-input-click"}),eL("export-dpi-input");return}let t=null;if(""!==e){let n=parseInt(e.slice(0,3));!isNaN(n)&&n>=0&&n<=999&&(t=n)}(0,b.L9)("UpdateExportDPI",{dpi:t}),eX.room.updatePresence({dpi:t})},[eX.room,k,eL]);return n?(0,u.jsx)(eu,{className:C.$_,...c,ref:g,children:(0,u.jsxs)(R.LV,{"data-testid":"export-popup",className:S.popupEntry(),children:[(0,u.jsxs)("div",{className:"flex w-full flex-col gap-4 p-1",children:[T?null:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(eh,{children:[(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsxs)("div",{className:"text-title-3 text-content-2 font-display flex flex-row items-center gap-0.75",children:[d("menu.export.resolutionLabel"),k&&(0,u.jsx)(P.si,{width:10,height:12})]}),(0,u.jsx)(eg,{children:(0,u.jsxs)(h.Ug,{spacing:"8px",children:[(0,u.jsx)(ev,{children:(0,u.jsxs)("div",{className:S.inputWrapper(),children:[(0,u.jsx)("span",{className:S.inputLabel(),children:d("menu.export.dimensionsWidthLabelNew")}),(0,u.jsx)("input",{className:S.input(),value:ea.width,onChange:eI("width"),readOnly:k,onClick:k?ez:void 0})]})}),(0,u.jsx)(ev,{children:(0,u.jsxs)("div",{className:S.inputWrapper(),children:[(0,u.jsx)("span",{className:S.inputLabel(),children:d("menu.export.dimensionsHeightLabelNew")}),(0,u.jsx)("input",{className:S.input(),value:ea.height,onChange:eI("height"),readOnly:k,onClick:k?ez:void 0})]})})]})}),k?(0,u.jsx)("p",{className:S.upsaleText(),children:d.rich("menu.export.upgradeToExportCta",{action:e=>(0,u.jsx)("button",{className:S.upsaleLink(),onClick:eD,children:e})})}):null]}),m||z||eG||k?null:(0,u.jsx)(eS,{text:d("menu.export.maxDimensionsLabel"),onClick:e_,active:eE})]})}),(0,u.jsxs)(h.Ug,{align:"left",spacing:"8px",children:[(0,u.jsx)(ey,{"data-testid":"export-format-select",options:[e$.map(e=>({id:e,value:e,label:d("menu.export.".concat(e)),disabled:ex}))],value:eN,onChange:e=>((0,b.L9)("ExportPanelFormatSelected",{format:e}),eP(e)),onOpenChange:I,trigger:eO,selectItem:eT,selectedContent:ek}),(0,u.jsx)(em,{disabled:r,mode:"secondary","data-testid":"additional-export-options-toggler",onClick:()=>{let e=!eR;return(0,b.L9)(e?"ExportPanelMoreSettingsOpen":"ExportPanelMoreSettingsClose"),eF(e)},children:(0,u.jsx)(ei,{})})]}),(0,u.jsx)(Q.z,{"data-testid":"export-button",variant:"accent",size:"m",disabled:ex,loading:a[eN],className:"w-full",onClick:eZ(eN),children:d("menu.export.export")}),w&&!k?(0,u.jsxs)(ew,{variant:"InterfaceTiny912",children:[d("subscriptions.upsale.shortCtaTitle")," ",(0,u.jsx)(eb,{href:"#",onClick:eD,children:d("subscriptions.upsale.shortCtaLink")})]}):null]}),(0,u.jsx)(ep,{}),eR?(0,u.jsx)(R.LV,{className:S.sidePopupEntry(),children:(0,u.jsxs)("div",{className:"flex flex-col gap-2 p-1",children:[(0,u.jsx)("span",{className:"text-content-2 text-title-3",children:d("menu.export.moreSettingsLabel")}),(0,u.jsxs)(h.gC,{align:"left",spacing:"12px",children:[eB?(0,u.jsx)(eC,{children:(0,u.jsxs)("div",{className:S.inputWrapper({className:"w-full"}),children:[(0,u.jsx)("span",{className:S.inputLabel(),children:d("menu.export.dpi")}),(0,u.jsx)("input",{className:S.input(),value:k?K.kw.toString():ej(eX.presence.dpi),onChange:e=>{eK(e.target.value)},readOnly:k,onClick:eM}),k?(0,u.jsx)("div",{className:"text-content-2 flex size-4 items-center justify-center",children:(0,u.jsx)(P.si,{className:"h-[71.875%] w-[62.5%]"})}):null]})}):null,eH]})]})}):null]})}):null};var eM=n(8554),eI=n(62175),e_=n(5336),eA=n(80047),e$=n(48078),eN=n(41225),eP=n(43866),eR=n(36267),eF=n(34177);let eZ=(0,C.zo)(h.Ug,{position:"relative",cursor:"pointer",borderRadius:"$6",padding:"5px 3px",transition:"all $timings$default ease-in-out","&:hover":{backgroundColor:"$colors$tagsGrey"},variants:{active:{true:{backgroundColor:"$colors$linesGrey"},false:{}},disabled:{true:{pointerEvents:"none",opacity:.3}}}}),eD=(0,C.zo)(eF.yk,{padding:4}),eB=e=>{let{isOpen:t,name:n,caption:r,children:i,isActive:a,disabled:o,tooltip:l,onClick:s,onOpenChange:c,hoverable:d=!1,closeOnOutsideClick:h=!0,icon:g}=e,m=(0,p.useRef)(null),[f,x]=(0,p.useState)(t),C=(0,eR.Z)(m),w=(0,p.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),!o&&((0,b.L9)("ActionCommandMenuClick",{action:n,state:f?"close":"open"}),d||x(!f),s&&s(e))},[f,d,o,n,s]);return(0,p.useEffect)(()=>{C&&a&&d&&x(!0)},[C,d,a]),(0,p.useEffect)(()=>{a||x(!1)},[a]),(0,p.useEffect)(()=>{t&&x(!0)},[t]),(0,u.jsxs)(eF.J2,{open:f,onOpenChange:c,children:[(0,u.jsx)(eF.tW,{ref:m,children:(0,u.jsx)(v.u,{side:"bottom",align:"center",sideOffset:25,content:(0,u.jsx)(T.T,{actionId:n,tooltip:l,mode:"dark"}),children:(0,u.jsx)(eF.xo,{children:(0,u.jsxs)(ta,{onClick:w,withCaption:!!r,children:[(0,u.jsx)(eZ,{align:"center","data-testid":"topbar-action-".concat(n),active:a&&f,disabled:o,children:g}),r?(0,u.jsx)(tl,{children:r}):null]})})})}),f&&(0,u.jsx)(eD,{sideOffset:14,onPointerDownOutside:()=>x(!h),onOpenAutoFocus:e=>e.preventDefault(),children:i})]})},eU=(0,eP.zo)(e_.B,{background:"none !important",padding:"0 4px !important",border:"0 !important"}),eG=e=>{var t,n;let{action:r,name:i}=e,a=(0,H.EP)(),{entity:o}=(0,W.Q_)("mockups"),{activeTool:l}=(0,e$.b5)(),{runRecraft:s}=(0,eA.VW)(),c=r.id===f.X.MOCKUP_MASK_EDIT,d=c?P._x:P.W7,g=l===eI.UA.Mask,m=0===(null!==(n=null==o?void 0:null===(t=o.decalMask)||void 0===t?void 0:t.entries)&&void 0!==n?n:[]).length,{brushSize:x,maskEditIsEraser:v}=(0,Y.S)(e=>{var t;return{brushSize:null!==(t=e.brushSize)&&void 0!==t?t:Z.po,maskEditIsEraser:e.maskEditIsEraser}},eN.Xd),C=(0,p.useCallback)(e=>{a.setEditBrush({brushSize:e})},[a]),w=(0,p.useCallback)(e=>{a.setEditBrush({maskEditIsEraser:e})},[a]);(0,eM.Z)(()=>{r.active&&(0,b.L9)("MaskBrushSizeChange",{eraser:v,size:x,id:r.id})},100,[x,v,r]);let j=(0,p.useCallback)(e=>{let t="eraser"===e;(0,b.L9)("MaskBrushTypeChange",{eraser:t,size:x,id:r.id}),w(t)},[w,r]),y=(0,p.useCallback)(()=>{r.action.dispatch()},[r]),k=(0,p.useCallback)(()=>{s(),(0,b.L9)("RecraftMaskEraser")},[s]);return(0,u.jsx)(eB,{icon:(0,u.jsx)(d,{}),disabled:r.disabled,name:r.id,caption:i,onClick:y,isOpen:g,isActive:g,tooltip:r.action.tooltip,closeOnOutsideClick:!1,children:(0,u.jsxs)(h.Ug,{spacing:8,children:[(0,u.jsx)(eU,{label:c?r.action.tooltip.data.title:void 0,tool:v?"eraser":"marker",brushSize:x,disableEraser:m,onToolChange:j,onBrushSizeChange:C}),c?null:(0,u.jsx)(z.z,{size:"s","data-testid":"topbar-action-inpaint-deterministic-trigger",disabled:m,onClick:k,children:r.action.tooltip.data.title})]})})};var eX=n(5632),eV=n(27147),eH=n(53171),eK=n(81642),eW=n(52599),eY=n(86132);let eq={incrementAppear:(0,C.F4)({"0%":{transform:"translateY(12px)",opacity:"0%"},"25%":{opacity:"0%"},"100%":{transform:"translateY(0px)",opacity:"100%"}}),incrementDisappear:(0,C.F4)({"0%":{transform:"translateY(0px)",opacity:"100%"},"75%":{opacity:"0%"},"100%":{transform:"translateY(-12px)",opacity:"0%"}}),decrementAppear:(0,C.F4)({"0%":{transform:"translateY(-12px)",opacity:"0%"},"25%":{opacity:"0%"},"100%":{transform:"translateY(0px)",opacity:"100%"}}),decrementDisappear:(0,C.F4)({"0%":{transform:"translateY(0px)",opacity:"100%"},"75%":{opacity:"0%"},"100%":{transform:"translateY(12px)",opacity:"0%"}})},eJ=(0,C.zo)("div",{...g.L.InterfaceSmallHeader1114,marginTop:"3px",marginRight:"3px",borderRadius:"3px",background:"$colors$darkGrey",color:"$white",overflow:"hidden",height:"17px",position:"relative"}),eQ=(0,C.zo)("div",{position:"absolute",animationTimingFunction:"cubic-bezier (0.25,0.1,0.25,1)",animationDuration:"$timings$default",animationFillMode:"forwards",margin:"1px 0px 2px 0px",textAlign:"center",width:"100%",variants:{changeType:{increment:{},decrement:{},none:{}},isNewValue:{true:{opacity:"100%"},false:{opacity:"100%"}}},compoundVariants:[{changeType:"increment",isNewValue:!1,css:{animationName:"".concat(eq.incrementDisappear)}},{changeType:"decrement",isNewValue:!1,css:{animationName:"".concat(eq.decrementDisappear)}},{changeType:"increment",isNewValue:!0,css:{animationName:"".concat(eq.incrementAppear)}},{changeType:"decrement",isNewValue:!0,css:{animationName:"".concat(eq.decrementAppear)}}]}),e0=e=>{let{value:t,convertValueToString:n,width:r}=e,[i,a]=(0,p.useState)({previous:null,current:t});(0,p.useEffect)(()=>{a({previous:i.current,current:t})},[t,a]);let o=n(i.current),l=i.previous?n(i.previous):null,s=null===i.previous||l===o?"none":i.previous<i.current?"increment":"decrement";return(0,u.jsxs)(eJ,{className:"counterBlock",css:{width:r},children:[null!==l?(0,u.jsx)(eQ,{changeType:s,isNewValue:!1,children:l},l):null,(0,u.jsx)(eQ,{changeType:s,isNewValue:!0,children:o},l===o?Symbol().toString():o)]})},e1=(0,C.zo)(h.gC,{borderRadius:4,padding:"0 2px",backgroundColor:"transparent",alignItems:"center",marginTop:-2,minWidth:56}),e2=(0,C.zo)("div",{height:"30px",padding:"5px 5px",opacity:"90%"}),e9=(0,C.zo)("div",{position:"relative",display:"flex",height:"20px"}),e4=(0,C.zo)("div",{position:"absolute",right:"0px",top:"0px"}),e3=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e<100?"single":e<100?"double":e<1e3?"triple":"overflow",n="overflow"===t?"...":String(e);return{size:"single"===t||"double"===t?"short":"wide",displayedValue:n}};var e8=n(37706);let e5=e=>{let{option:t,available:n,onClick:r}=e;return(0,u.jsx)(e8.q.ItemWrapper,{disabled:!n,children:(0,u.jsx)(e8.q.Item,{onClick:()=>r(t),value:t.value,children:t.label})})},e7=e=>{let{onClose:t}=e,n=(0,O.T)(),r=(0,eY.ol)(),i=[{label:n("zoomMenu.zoomIn"),action:f.X.CANVAS_ZOOM_IN},{label:n("zoomMenu.zoomOut"),action:f.X.CANVAS_ZOOM_OUT},{label:n("zoomMenu.zoom50"),value:"50",action:f.X.CANVAS_ZOOM},{label:n("zoomMenu.zoom100"),value:"100",action:f.X.CANVAS_ZOOM},{label:n("zoomMenu.zoom200"),value:"200",action:f.X.CANVAS_ZOOM}],a=[{label:n("zoomMenu.zoomFit"),action:f.X.ALL_FOCUS_ANIMATED},{label:n("zoomMenu.zoomSelection"),action:f.X.SELECTION_FOCUS_ANIMATED}];if(!r)return null;let o=e=>{let{action:n,value:i,label:a}=e;if(t(),(0,b.L9)("ZoomMenuItem",{label:a,action:n}),n===f.X.CANVAS_ZOOM&&i){let e=parseFloat(i);r[n].action.dispatch({scale:e/100});return}n in r&&r[n].action.dispatch()};return(0,u.jsxs)(e8.q.Content,{children:[i.map(e=>(0,u.jsx)(e5,{available:r[e.action].available,onClick:o,option:e},e.value||e.label)),(0,u.jsx)(e8.q.Separator,{}),a.map(e=>(0,u.jsx)(e5,{available:r[e.action].available,onClick:o,option:e},e.value||e.label))]})};var e6=n(10078),te=n(13844);let tt=(0,J.tv)({base:"text-body-3 text-content-1 w-14 rounded-md px-2.5 py-1.5 text-center outline-none after:content-['%']",variants:{isBottomBar:{true:"bg-base-3 my-3 border-0",false:"bg-elevated inset-border"}}}),tn=e=>{e.preventDefault()};var tr=n(33755);let ti=(0,w.X6)()?(0,p.lazy)(()=>n.e(4007).then(n.bind(n,40773))):null,ta=(0,C.zo)(h.gC,{borderRadius:4,margin:"0 2px",backgroundColor:"transparent",alignItems:"center",marginTop:-2,cursor:"pointer",variants:{withCaption:{true:{minWidth:56}}}}),to=(0,C.zo)(m.E,{variants:{withCaption:{true:{padding:"6px !important"}}}}),tl=(0,C.zo)(g.Z,{color:"$darkGrey",fontSize:10,textAlign:"center",whiteSpace:"pre",marginTop:2}),ts=e=>e.action.tooltip.data&&"video"in e.action.tooltip.data?"l":!e.action.tooltip.data&&e.action.hotkeyCommand||e.action.tooltip.data&&e.action.tooltip.data.text&&!e.action.tooltip.data.title?"s":void 0,tc={[f.X.SELECTION_EXPORT]:e=>{let{action:t}=e,n=(0,O.T)(),[r,i]=(0,p.useState)(!1),[a,o]=(0,p.useState)({[$.T2.Png]:!1,[$.T2.Jpeg]:!1,[$.T2.Svg]:!1,[$.T2.PngOrSvg]:!1,[$.T2.JpegOrSvg]:!1,[$.T2.Lottie]:!1,[$.T2.TiffCMYK]:!1,[$.T2.PdfAuto]:!1,[$.T2.PdfRaster]:!1,[$.T2.PdfVector]:!1}),l=(0,p.useRef)(null);(0,p.useEffect)(()=>{t.available||i(t.available)},[t.available]);let s=(0,p.useCallback)(()=>{let e=!r;(0,b.L9)(e?"ExportPanelOpen":"ExportPanelClose"),i(e)},[r]),c=(0,p.useCallback)(()=>{(0,b.L9)("ExportPanelClose"),i(!1)},[]),d=(0,p.useCallback)(async e=>{c(),o(t=>({...t,[e.format]:!0}));try{await t.action.dispatch(e)}finally{o(t=>({...t,[e.format]:!1}))}},[c,t.action]);return t.available?(0,u.jsxs)("div",{className:"relative","data-testid":"recraft-topbar-export",children:[(0,u.jsx)(z.z,{"data-testid":"toggler",size:"s",arrow:r?"top":"bottom",pressed:r,ref:l,mode:r?"primary":"accentGreen",onClick:s,children:n("menu.export.label")}),r?(0,u.jsx)(ez,{"data-testid":"new-popup",visible:r,disabled:t.loading,availableFormats:t.action.getAvailableFormats(),exportingFormats:a,targetRef:l,onApply:d,onOutsideClick:c}):null]}):null},[f.X.EARN_CREDITS]:()=>{let e=(0,O.T)(),{workspaceUser:t}=(0,x.a)(),{data:n}=(0,I.m)();return!t&&(null==n?void 0:n.enabled)?(0,u.jsxs)(z.z,{size:"s",mode:"primary",asTag:"a",href:M._j.profileInvite.url,children:[(0,u.jsx)(A,{}),e("menu.earnCredits.label")]}):null},[f.X.CANVAS_ZOOM]:e=>{let{action:t,source:n}=e,r=String((100*(0,Y.S)(e=>e.viewport.scale)||100).toFixed(0)),[i,a]=(0,p.useState)(!1),o=(0,p.useCallback)(e=>{try{let n=parseFloat(e),r=parseFloat(n.toFixed(0))/100;Number.isNaN(r)||r<D.Cn?t.action.dispatch({scale:D.Cn}):r>D.Y1?t.action.dispatch({scale:D.Y1}):t.action.dispatch({scale:n/100})}catch(e){}},[t.action]);return(0,u.jsxs)(te.fC,{open:i,onOpenChange:a,children:[(0,u.jsx)(te.xz,{className:"flex flex-col",children:(0,u.jsx)(e6.s,{className:tt({isBottomBar:"bottom-menu"===n}),pattern:"^\\d+$",value:r,maxLength:4,onChange:o,"data-testid":"topbar-zoom"})}),(0,u.jsx)(te.VY,{onOpenAutoFocus:tn,alignOffset:-92,sideOffset:4,children:(0,u.jsx)(e7,{onClose:()=>a(!1)})})]})},[f.X.SELECTION_ANIMATED_COUNTER]:e=>{let{action:t}=e,n=(0,O.T)(),r=(0,G.NB)(),i=(0,p.useCallback)(e=>e3(e).displayedValue,[]),a=e3(r).size;return!!t.available&&!!r&&!(r<2)&&(0,u.jsxs)(e1,{children:[(0,u.jsx)(e2,{children:(0,u.jsxs)(e9,{children:[(0,u.jsx)(e4,{children:"short"===a?(0,u.jsx)(P.Ps,{}):(0,u.jsx)(P.TU,{})}),(0,u.jsx)(e0,{value:r,convertValueToString:i,width:"short"===a?"17px":"25px"})]})}),(0,u.jsx)(tl,{children:n("captionActions.selection")})]})},[f.X.SHARE_PROJECT]:()=>{let e=(0,O.T)(),{open:t}=(0,N.Rh)(),n=(0,H.EP)(),r=(0,p.useCallback)(()=>{t(N.nK.ShareDialog,{projectId:n.room.id,titleLabel:e("dialogs.share.project.title",{name:n.projectTitle||e("projects.emptyProject")}),source:"share-topbar"}),(0,b.L9)("ShareButtonClick",{source:"topbar"})},[t,n]);return(0,u.jsx)("div",{className:"relative","data-testid":"recraft-topbar-share",children:(0,u.jsx)(z.z,{"data-testid":"toggler",size:"s",mode:"secondary",onClick:r,children:e("menu.share.label")})})},[f.X.DEV_TOOL]:()=>(0,u.jsx)(p.Suspense,{fallback:null,children:ti?(0,u.jsx)(ti,{}):null}),[f.X.MOCKUP_MASK_EDIT]:eG,[f.X.LAYER_MASK_EDIT]:eG,[f.X.DUPLICATE_PROJECT]:e=>{let{action:t}=e,n=(0,O.T)(),r=(0,p.useCallback)(async()=>{await t.action.dispatch(),(0,b.L9)("DuplicateProject",{source:"topbar"})},[t]);return(0,u.jsx)(z.z,{size:"s",mode:"accentGreen",onClick:r,children:n("actions.duplicateProjectLong")})},[f.X.REQUEST_PROJECT_ACCESS]:e=>{let{action:t}=e,n=(0,O.T)(),[r,i]=(0,p.useState)(!1),{addNotification:a}=(0,eY.lm)(),o=(0,p.useCallback)(async()=>{await t.action.dispatch({accessLevel:"commenter"}),i(!0),a({content:n("actions.requestCommentingSent")}),(0,b.L9)("RequestAccessOnTopBar")},[t]);return(0,u.jsx)(z.z,{size:"s",mode:"secondary",onClick:o,disabled:r,children:n("actions.requestCommenting")})},[f.X.PROJECT_ACTIONS]:()=>{let e=(0,O.T)(),t=(0,eK.kB)(),{push:n}=(0,eX.useRouter)(),{setWorkspaceId:r}=(0,x.a)(),i=t.id,{data:a}=(0,eH.g)(i),o=(0,p.useCallback)((e,t)=>{let{id:n}=e;r(t,{nextPath:M._j.project.url.replace("[projectId]",n)})},[]),l=(0,p.useCallback)(()=>{n(M._j.projects.url)},[n]);return a?(0,u.jsx)(eV.g,{project:a,align:"center",onDelete:l,onDuplicate:o,source:"project-topbar",children:(0,u.jsx)(Q.z,{variant:"secondary",size:"s",endContent:(0,u.jsx)(eW.Z,{}),children:(0,u.jsx)("span",{className:"max-w-120 overflow-hidden text-ellipsis whitespace-nowrap",children:a.title||e("projects.emptyProject")})})}):null}},td=e=>{var t,n,r,i;let{action:a,hoverable:o=!0,className:l,source:s,name:c,children:d,onClick:g}=e,{plan:m}=(0,x.a)(),C=!!c,w=(0,tr.f)(a.id,a.action.dispatch),j=a.id===f.X.SELECTION_GENERATIVE_UPSCALE&&!(null==m?void 0:null===(t=m.features)||void 0===t?void 0:t.generativeUpscale),y=(0,p.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),a.disabled||a.loading||j||!a.available||((0,b.L9)("ActionCommandMenuClick",{action:a.id,source:s}),g&&g(a.id),w())},[a,s,j,g,w]),k=(null==a?void 0:null===(n=a.action)||void 0===n?void 0:n.togglable)?"checkbox":void 0,E=!!(a.disabled||a.loading),L=(0,u.jsx)(S,{actionId:a.id,faded:E,enabled:j,children:(0,u.jsx)(to,{"data-testid":"topbar-action-".concat(a.id),className:l,behavior:k,type:a.action.icon,hoverable:o,active:a.active,loading:a.loading,withCaption:C,disabled:a.disabled||a.loading||!a.available})});if(a.id in tc){let e=tc[a.id];return(0,u.jsx)(e,{action:a,name:c,source:s})}let O=ts(a);return(0,u.jsxs)(ta,{className:l,onClick:y,withCaption:C,children:[(0,u.jsxs)(h.Ug,{align:"center",css:{width:"100%",justifyContent:d?"flex-end":"center"},children:[(0,u.jsx)(v.u,{id:a.action.name,size:O,side:"narrow-left-bar"===s?"right":void 0,sideOffset:"group"===s||"narrow-left-bar"===s||"bottom-menu"===s?void 0:20,disableHoverableContent:!(null===(i=a.action.tooltip.data)||void 0===i?void 0:null===(r=i.action)||void 0===r?void 0:r.url),content:(0,u.jsx)(T.T,{actionId:a.id,tooltip:a.action.tooltip,command:a.action.hotkeyCommand,mode:"dark"}),children:(0,u.jsx)(h.Ug,{children:L})}),d]}),C?(0,u.jsx)(tl,{children:c}):null]})}},8677:function(e,t,n){n.d(t,{E:function(){return m}});var r=n(52322),i=n(2784),a=n(87250),o=n(42662),l=n(41376),s=n(2113),c=n(83967),d=n(99104),u=n(90419),p=n(73089);let h=(0,c.zo)(u.a,{"> div":{width:"14px",height:"14px",border:"1px solid $black",borderBottomColor:"transparent"},variants:{disabled:{true:{"> div":{border:"1px solid $arrancia",borderBottomColor:"transparent"}}},active:{true:{}}},compoundVariants:[{active:!0,disabled:!0,css:{"> div":{border:"1px solid $arrancia",borderBottomColor:"transparent"}}},{active:!1,disabled:!0,css:{"> div":{border:"1px solid $black",borderBottomColor:"transparent"}}}]}),g=(0,c.zo)(o.Ug,{...p.L.InterfaceSmall1114,border:"none",background:"none",justifyContent:"center",alignItems:"center",color:"$colors$black",transition:"background-color  $timings$default, color $timings$default",cursor:"pointer",borderRadius:"$6",padding:"5px",whiteSpace:"pre",[".".concat(c.$_," &")]:{color:"$colors$gray"},"&:active":{backgroundColor:"$colors$linesGrey"},"&:checked":{color:"$colors$arrancia",backgroundColor:"".concat((0,d.a7)(s.O9.arrancia,.1))},variants:{hoverable:{true:{"&:hover":{backgroundColor:"$colors$tagsGrey"},[".".concat(c.$_," &:hover")]:{backgroundColor:"".concat((0,d.a7)(s.O9.white,.12)," "),color:"$black !important"}}},size:{s:{flex:"0 0 20px",height:"20px",width:"20px",padding:"0"},m:{flex:"0 0 30px",height:"30px",width:"30px"}},withChildren:{true:{}},active:{true:{backgroundColor:"$colors$linesGrey",[".".concat(c.$_," &")]:{backgroundColor:"$colors$arrancia"},[".".concat(c.$_," &:hover")]:{backgroundColor:"$colors$arrancia"},[".".concat(c.$_," & svg")]:{color:"white"}}},disabled:{true:{pointerEvents:"none",opacity:.3}}},compoundVariants:[{withChildren:!0,size:"m",css:{width:"auto",padding:"0 6px",gap:"5.5px","& svg":{flex:"0 0 20px",width:"20px"},flex:"0 0 auto"}}]}),m=(0,i.forwardRef)((e,t)=>{let{type:n,children:o,title:s,behavior:c,active:d,hoverable:u,disabled:p=!1,size:m="m",loading:f=!1,onClick:x,className:v,...C}=e,b="checkbox"===c,w=f||p,[j,y]=(0,i.useState)(d);(0,i.useEffect)(()=>{y(d)},[d]);let k=(0,i.useCallback)(e=>{b&&y(e=>!e),null==x||x(e)},[x,b]),E=f?(0,r.jsx)(h,{type:"circle",disabled:b&&w,active:j}):(0,r.jsxs)(r.Fragment,{children:[n===l.X.SET_TOOL_VECTOR&&(0,r.jsx)(a.Gh,{}),n===l.X.SET_TOOL_IMAGE&&(0,r.jsx)(a.tG,{}),n===l.X.SET_TOOL_MOCKUP&&(0,r.jsx)(a.T_,{}),n===l.X.SET_TOOL_FRAME&&(0,r.jsx)(a.rK,{}),n===l.X.SET_TOOL_BRUSH&&(0,r.jsx)(a.L4,{}),n===l.X.SET_TOOL_COMMENT&&(0,r.jsx)(a.ge,{}),n===l.X.SET_TOOL_IMAGE_SET&&(0,r.jsx)(a.Pv,{}),n===l.X.SELECTION_VECTORIZE&&(0,r.jsx)(a.$f,{}),n===l.X.SELECTION_RASTERIZE&&(0,r.jsx)(a.RL,{}),n===l.X.SELECTION_RASTERIZE_MOCKUP&&(0,r.jsx)(a.RL,{}),n===l.X.SELECTION_FLATTEN_TEXT&&(0,r.jsx)(a.Gh,{}),n===l.X.SELECTION_REMOVE_BACKGROUND&&(0,r.jsx)(a.JT,{}),n===l.X.SELECTION_MERGE&&(0,r.jsx)(a.Ov,{}),n===l.X.SET_TOOL_GRAB&&(0,r.jsx)(a.tT,{}),n===l.X.HISTORY_UNDO&&(0,r.jsx)(a.WL,{}),n===l.X.HISTORY_REDO&&(0,r.jsx)(a.M1,{}),n===l.X.SELECTION_SWITCH_BACKGROUND&&(0,r.jsx)(a.Ts,{}),n===l.X.SET_TOOL_TEXT&&(0,r.jsx)(a.j0,{}),n===l.X.IMPORT_IMAGE&&(0,r.jsx)(a.$r,{}),n===l.X.SELECTION_SUBTLE_UPSCALE&&(0,r.jsx)(a.o3,{}),n===l.X.SELECTION_GENERATIVE_UPSCALE&&(0,r.jsx)(a.Xi,{}),n===l.X.SELECTION_CONVERT_TO_MOCKUP&&(0,r.jsx)(a.mo,{}),n===l.X.MOCKUP_MASK_EDIT&&(0,r.jsx)(a._x,{}),n===l.X.LAYER_MASK_EDIT&&(0,r.jsx)(a.W7,{}),n===l.X.TOGGLE_LAYER_AREA_SELECTION_TOOL&&(0,r.jsx)(a.Qy,{}),n===l.X.TOGGLE_MOCKUP_AREA_SELECTION_TOOL&&(0,r.jsx)(a._x,{}),n===l.X.SET_TOOL_RECTANGLE&&(0,r.jsx)(a.jJ,{}),n===l.X.SET_TOOL_ELLIPSE&&(0,r.jsx)(a.lr,{}),n===l.X.SET_TOOL_LINE&&(0,r.jsx)(a.XZ,{}),n===l.X.SET_TOOL_ARROW&&(0,r.jsx)(a.CC,{}),n===l.X.SELECTION_HALIGN_START&&(0,r.jsx)(a.EF,{}),n===l.X.SELECTION_HALIGN_CENTER&&(0,r.jsx)(a.Q7,{}),n===l.X.SELECTION_HALIGN_END&&(0,r.jsx)(a.xD,{}),n===l.X.SELECTION_VALIGN_START&&(0,r.jsx)(a.Hg,{}),n===l.X.SELECTION_VALIGN_CENTER&&(0,r.jsx)(a.Ah,{}),n===l.X.SELECTION_VALIGN_END&&(0,r.jsx)(a.vb,{}),"styled-plus"===n&&(0,r.jsx)(a.n$,{}),"simple-plus"===n&&(0,r.jsx)(a.jO,{}),"select"===n&&(0,r.jsx)(a.xG,{}),"minus"===n&&(0,r.jsx)(a.Ur,{}),"plus"===n&&(0,r.jsx)(a.SC,{}),"return"===n&&(0,r.jsx)(a.BK,{}),"settings"===n&&(0,r.jsx)(a.iC,{}),"layers"===n&&(0,r.jsx)(a.lJ,{}),"trash"===n&&(0,r.jsx)(a.IT,{}),"like"===n&&(0,r.jsx)(a.Ml,{}),"dislike"===n&&(0,r.jsx)(a.R7,{}),"help"===n&&(0,r.jsx)(a.T0,{}),"editImage"===n&&(0,r.jsx)(a.QS,{}),"edit"===n&&(0,r.jsx)(a.yl,{}),"export"===n&&(0,r.jsx)(a.b8,{}),"jpg"===n&&(0,r.jsx)(a.Vy,{}),"png"===n&&(0,r.jsx)(a.f4,{}),"svg"===n&&(0,r.jsx)(a.uh,{}),"roundEye"===n&&(0,r.jsx)(a.aQ,{}),"roundHelp"===n&&(0,r.jsx)(a.oO,{}),"history"===n&&(0,r.jsx)(a.Hl,{})]});return(0,r.jsxs)(g,{as:"button",size:m,"aria-label":s,title:s,disabled:w,active:j,hoverable:u,onClick:k,withChildren:!!o,ref:t,className:v,...C,children:[E,o]})})},74821:function(e,t,n){n.d(t,{f:function(){return r}});let r=(0,n(43866).zo)("div",{cursor:"pointer","&:hover":{opacity:.7}})},2405:function(e,t,n){n.d(t,{z:function(){return C}});var r,i,a=n(52322),o=n(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var s=function(e){return o.createElement("svg",l({width:20,height:21,viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("g",{clipPath:"url(#clip0_20087_112954)"},o.createElement("path",{d:"M17.8917 2.11827C16.9372 1.16374 15.3762 1.16374 14.4217 2.11827L12.8734 3.66654C12.1803 3.07417 11.1244 3.10214 10.4697 3.75691L10.2769 3.94969C9.58934 4.63722 9.58934 5.7683 10.2769 6.45584L10.3733 6.55223L3.43316 13.4923C2.90891 14.0166 2.69337 14.7077 2.68614 15.396L2.0837 15.9985C1.75963 16.3225 1.51225 16.7054 1.43909 17.1612C1.36592 17.617 1.52045 18.1342 1.89092 18.5046C2.26138 18.8751 2.77853 19.0296 3.23436 18.9565C3.69018 18.8833 4.073 18.6359 4.39706 18.3118L4.9995 17.7094C5.68787 17.7022 6.37897 17.4866 6.90321 16.9624L12.6866 11.179C12.7384 11.1286 12.7797 11.0684 12.8081 11.002C12.8365 10.9355 12.8513 10.8641 12.8518 10.7918C12.8523 10.7195 12.8385 10.6479 12.8111 10.581C12.7837 10.5142 12.7432 10.4534 12.6921 10.4023C12.641 10.3512 12.5803 10.3108 12.5134 10.2834C12.4466 10.256 12.3749 10.2421 12.3027 10.2426C12.2304 10.2431 12.159 10.258 12.0925 10.2864C12.026 10.3147 11.9659 10.356 11.9155 10.4078L6.13209 16.1913C5.76257 16.5608 5.27101 16.7138 4.79468 16.6612C4.71338 16.6522 4.6311 16.6616 4.55393 16.6887C4.47676 16.7158 4.40668 16.7599 4.34887 16.8178L3.62594 17.5407C3.41601 17.7507 3.20434 17.8549 3.05965 17.8781C2.91498 17.9013 2.82558 17.897 2.66204 17.7335C2.4985 17.57 2.49425 17.4806 2.51745 17.3359C2.54068 17.1912 2.64488 16.9795 2.85482 16.7696L3.57775 16.0467C3.63562 15.9889 3.67974 15.9188 3.70686 15.8416C3.73397 15.7644 3.74338 15.6822 3.73438 15.6009C3.68178 15.1245 3.83476 14.633 4.20428 14.2635L11.1444 7.32335L13.9397 10.1187C14.6272 10.8062 15.7583 10.8062 16.4459 10.1187L16.6386 9.92589C17.2934 9.27112 17.3214 8.21526 16.729 7.52215L18.2773 5.97388C19.2318 5.01935 19.2318 3.45837 18.2773 2.50383L17.8917 2.11827ZM17.1206 2.88939L17.5061 3.27496C18.0468 3.81563 18.0468 4.66209 17.5061 5.20276L15.9639 6.74501L13.6505 4.43164L15.1928 2.88939C15.7335 2.34872 16.5799 2.34872 17.1206 2.88939ZM12.2047 4.52803L12.4095 4.73286C12.4505 4.79524 12.5038 4.84855 12.5661 4.88949L15.4579 7.7812C15.5104 7.88519 15.5948 7.96963 15.6988 8.02218L15.8675 8.19086C16.1412 8.46453 16.1412 8.8811 15.8675 9.15477L15.6747 9.34755C15.4011 9.62121 14.9845 9.62122 14.7108 9.34755L11.048 5.68471C10.7743 5.41104 10.7743 4.99448 11.048 4.72081L11.2408 4.52803C11.5144 4.25436 11.931 4.25436 12.2047 4.52803Z",fill:"currentColor"}))),i||(i=o.createElement("defs",null,o.createElement("clipPath",{id:"clip0_20087_112954"},o.createElement("rect",{width:20,height:20,fill:"white",transform:"translate(0 0.5)"})))))},c=n(42662),d=n(73089),u=n(60603),p=n(83967),h=n(25262),g=n(93679),m=n(72470);let f=(0,p.zo)(c.gC,{position:"relative",variants:{disabled:{true:{"div > *":{pointerEvents:"none !important"},".w-color-editable-input input":{color:"$colors$darkGrey !important"}},false:{}}}}),x=(0,p.zo)(m.z,{marginTop:"10px",position:"absolute",width:"30px !important",height:"30px !important",bottom:32,right:0,variants:{pressed:{true:{backgroundColor:"$mediumDarkGrey !important"}}}}),v=(0,p.zo)(g.Z,{boxShadow:"none !important",width:"100% !important",minWidth:"190px",variants:{wide:{true:{minWidth:"230px"}}},"div:has(> .w-color-editable-input:not(.w-color-editable-input-rgba .w-color-editable-input))":{display:"block !important","> .w-color-editable-input input":{height:"30px !important",width:"calc(100% - 36px) !important",textAlign:"center !important"}},".w-color-editable-input":{alignItems:"start !important",input:{...d.L.InterfaceSmallHeader1114,outline:"none !important",background:"$mediumGrey !important",boxShadow:"none !important",color:"$black !important",borderRadius:"$6",padding:"1.5px 4px 2.5px !important",textAlign:"center"},span:{...d.L.InterfaceSmallHeader1114,color:"$darkGrey !important",display:"none"}},".w-color-editable-input-rgba":{margin:"14px 0 0 !important",gap:"8px",".w-color-editable-input":{display:"flex",flexDirection:"row-reverse !important",gap:"4px",span:{display:"block"}}},"> div":{padding:"5px 0 10px 0 !important",margin:"0 !important","&:first-child":{paddingTop:"0 !important"},"&:last-child":{paddingBottom:"0 !important"}}}),C=e=>{let{onChangeEnd:t,onChange:n,disabled:r,disableAlpha:i,source:l,color:c,...d}=e,p=(0,o.useRef)(),g=(0,o.useCallback)(e=>{let t=(0,h.$_)((0,h.t1)({...e,a:e.a?Number((e.a/255).toFixed(3)):1}));null==n||n(t)},[n]),m=(0,o.useCallback)(e=>{null==n||n(e),p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{null==t||t()},1e3)},[n,t]),{startColorPicker:C,stopColorPicker:b,isColorPickerOnCanvasActive:w}=(0,u.tG)(g,l);return(0,o.useEffect)(()=>b,[b]),(0,a.jsxs)(f,{disabled:r,spacing:14,children:[(0,a.jsx)(v,{...d,color:c,disableAlpha:i,wide:!i,autoFocus:!0,onChange:m}),(0,a.jsx)(x,{mode:"secondary",pressed:w,onClick:w?b:C,children:(0,a.jsx)(s,{})})]})}},10078:function(e,t,n){n.d(t,{s:function(){return c}});var r=n(52322),i=n(2784),a=n(16689),o=n(83967),l=n(6287);let s=(0,o.zo)("span",{cursor:"text",overflow:"hidden",whiteSpace:"nowrap","&:focus":{position:"relative"},variants:{disabled:{true:{cursor:"default"}}}}),c=e=>{let{disabled:t=!1,value:n,controlled:o=!0,onChange:c,onKeyDown:d,onKeyUp:u,onFocus:p,maxLength:h,className:g,pattern:m,dataTestId:f,emptyValue:x="",selectContentOnFocus:v=!1,textRef:C,...b}=e,[w,j]=(0,i.useState)(n||x),y=(0,i.useRef)(null),k=null!=C?C:y;return(0,i.useEffect)(()=>{o&&j(n||x)},[n,x,o]),(0,r.jsx)(s,{ref:k,contentEditable:!t,className:g,disabled:t,onBlur:e=>{let t=e.currentTarget.innerText||x;if(e.currentTarget.scrollTop=0,!e.currentTarget.innerText.trim()){j(x),e.currentTarget.innerText=n;return}c&&t!==n&&(c(t),e.currentTarget.innerText=n)},onFocus:e=>{window.setTimeout(()=>{if((0,l.j)()&&k.current&&v){let e=document.createRange(),t=window.getSelection();e.selectNodeContents(k.current),null==t||t.removeAllRanges(),null==t||t.addRange(e)}},50),null==p||p()},onKeyDown:e=>{e.stopPropagation();let t=window.getSelection(),n=(null==t?void 0:t.toString())||"",r=e.currentTarget.innerText.length-n.length+1;h&&r>h&&e.key!==a.A.Backspace&&e.key!==a.A.Delete&&e.preventDefault(),1===e.key.length&&m&&!new RegExp(m).test(e.key)&&e.preventDefault(),"Enter"===e.key&&(e.preventDefault(),k.current&&k.current.blur()),e.code===a.A.Escape&&k.current&&k.current.blur(),null==d||d(e)},onKeyUp:u,suppressContentEditableWarning:!0,"data-testid":f,"data-enable-grammarly":"false",...b,children:w})}},63300:function(e,t,n){n.d(t,{OX:function(){return l},e6:function(){return d},fZ:function(){return u}});var r=n(52322),i=n(2784),a=n(61021),o=n(83967);let l=(0,o.zo)("input",{width:"100%","-webkit-appearance":"none",background:"transparent",padding:"0",margin:"0",height:"22px","&::-webkit-slider-runnable-track":{height:"1px",border:0},"&::-webkit-slider-thumb":{"-webkit-appearance":"none",position:"relative",width:"15px",height:"15px",borderRadius:"100%",marginTop:"-7px",zIndex:"$zIndices$default",background:"$colors$white"},"&::-moz-range-thumb":{"-webkit-appearance":"none",position:"relative",width:"15px",height:"15px",borderRadius:"100%",marginTop:"-7px",border:"1px solid $colors$darkGrey",zIndex:"$zIndices$default",background:"$colors$white"},variants:{hasStripe:{true:{"&::-webkit-slider-runnable-track":{background:"transparent"}},false:{"&::-webkit-slider-runnable-track":{background:"$colors$linesGrey"}}},frozen:{true:{"&::-webkit-slider-thumb":{border:"1px solid $colors$linesGrey"}},false:{"&::-webkit-slider-thumb":{border:"1px solid $colors$darkGrey"}}}}}),s=(0,o.zo)("div",{position:"absolute",top:"50%",marginTop:"-1.5px",height:"3px",width:"100%",borderRadius:"$3"}),c=(0,o.zo)("div",{height:"22px",position:"relative",width:"100%"}),d=e=>{let{className:t,name:n,min:a=0,max:o,step:d=.01,value:u,disabled:p,stripeColors:h,frozen:g=!1,onChange:m,onStop:f}=e,x=(0,i.useId)(),v=h?{background:1===h.length?h[0]:"padding-box linear-gradient(to right, ".concat(h.join(", "),")")}:{};return(0,r.jsxs)(c,{className:t,children:[(0,r.jsx)(l,{type:"range",list:x,step:d,min:a,max:o,value:u,name:n,disabled:p,frozen:g,hasStripe:!!h,onChange:e=>{null==m||m({name:n,value:Number(e.target.value)})},onPointerUp:f,onPointerCancel:f}),(null==h?void 0:h.length)?(0,r.jsx)(s,{css:v}):null]})},u=e=>{let{batch:t,stop:n}=(0,a.i)(),i={...e,onChange:n=>{t(()=>{var t;null===(t=e.onChange)||void 0===t||t.call(e,n)})},onStop:()=>{var t;null===(t=e.onStop)||void 0===t||t.call(e),n()}};return(0,r.jsx)(d,{...i})}},40714:function(e,t,n){n.d(t,{P:function(){return E}});var r=n(52322),i=n(2784),a=n(87250),o=n(73089),l=n(72470),s=n(24513),c=n(2113),d=n(83967),u=n(99104);let p=(0,d.zo)(s.i4,{all:"unset",".faded":{display:"none"},variants:{stretch:{true:{all:"unset",width:"100%"}}}}),h=(0,d.zo)(a.g6,{transform:"rotate(-180deg)"}),g=(0,d.zo)(s.VY,{overflow:"hidden",backgroundColor:"white",borderRadius:10,border:"1px solid $colors$linesGrey",boxShadow:"0px 4px 6px rgba(206, 199, 199, 0.5), 0px 1px 2px rgba(198, 192, 192, 0.25)",minWidth:"var(--radix-select-trigger-width)",maxHeight:"var(--radix-select-content-available-height)",zIndex:"$zIndices$selects"}),m=(0,d.zo)(s.l_,{padding:"12px 8px  !important",gap:"1px !important"}),f=(0,d.zo)(s.ZA,{gap:"4px",display:"flex",flexDirection:"column"}),x=(0,i.forwardRef)((e,t)=>{let{children:n,selectItem:i,...a}=e;return(0,r.jsx)(i,{...a,ref:t,children:(0,r.jsx)(s.eT,{children:n})})}),v=(0,d.zo)("span",{}),C=(0,d.zo)(s.ck,{position:"relative",background:"$white",cursor:"pointer",padding:"5px 8px 6px 10px",color:"$colors$black",borderRadius:"$4",outline:"none",alignItems:"center",whiteSpace:"nowrap",".faded":{color:"$darkDarkGrey"},"&[data-highlighted]":{background:"$colors$arrancia",color:"$colors$white","*":{color:"$colors$white"},".faded":{color:(0,u.a7)(c.O9.white,.6)}},"&[data-disabled]":{opacity:.5,cursor:"default"},variants:{size:{sl:{...o.L.InterfaceBody1518},s:{...o.L.InterfaceSmallMighty1215}}},defaultVariants:{size:"s"}}),b=(0,d.zo)(s.Z0,{display:"block",borderTop:"$borders$default",borderColor:"$colors$linesGrey",margin:"2px 8px",width:"auto"}),w={display:"flex",alignItems:"center",justifyContent:"center",height:25,backgroundColor:"$white",color:"$black",cursor:"default"},j=(0,d.zo)(s.u_,w),y=(0,d.zo)(s.$G,w),k=(0,d.zo)(l.z,{justifyContent:"space-between !important",paddingLeft:"7.5px !important"}),E=e=>{var t,n,i;let{className:o,css:l,options:c,size:d="s",stretch:u=!1,mode:w="faded",onChange:E,value:L,defaultValue:S,portalRoot:T,checkEqual:O=(e,t)=>e===t,disabled:z,trigger:M=k,selectItem:I=C,sideOffset:_=6,alignOffset:A=0,selectedContent:$=g,onOpenChange:N,maxSelectionListHeight:P,...R}=e,F=null!==(i=null!=L?L:S)&&void 0!==i?i:null==c?void 0:null===(n=c[0])||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.value,Z=c.flat(2).find(e=>O(e.value,F)),D=(0,r.jsxs)($,{position:"popper",alignOffset:A,sideOffset:_,children:[(0,r.jsx)(j,{children:(0,r.jsx)(h,{})}),(0,r.jsx)(m,{css:{maxHeight:P},children:c.map((e,t)=>(0,r.jsxs)(f,{children:[e.map((e,n)=>{let{label:i,id:a,disabled:o}=e;return(0,r.jsx)(x,{size:d,disabled:o,value:a,"data-testid":"select-option",selectItem:I,children:i},"".concat(n," ").concat(t))}),t!==c.length-1?(0,r.jsx)(b,{},"divider-".concat(t)):null]},t))}),(0,r.jsx)(y,{children:(0,r.jsx)(a.g6,{})})]});return(0,r.jsxs)(s.fC,{value:String(L),onValueChange:e=>{var t;let n=null===(t=c.flat(2).find(t=>t.id===e))||void 0===t?void 0:t.value;void 0!==n&&E(n)},disabled:z,onOpenChange:N,children:[(0,r.jsx)(p,{"aria-label":"select",stretch:u,...R,children:(0,r.jsx)(M,{mode:w,size:d,disabled:z,stretch:u,asTag:"div","data-testid":"toggler",arrow:"bottom",css:l,className:o,children:(0,r.jsx)(v,{children:(null==Z?void 0:Z.label)||S})})}),T?(0,r.jsx)(s.h_,{container:T,children:D}):D]})}},75131:function(e,t,n){n.d(t,{$o:function(){return f},Gr:function(){return m},L8:function(){return x},NS:function(){return v}});var r=n(2784),i=n(19204),a=n(89612),o=n(23558),l=n(2374),s=n(44574),c=n(20814),d=n(14010),u=n(87686),p=n(16355);let h=e=>{var t,n;return{sortBy:null!==(t=e[a.S.PROJECTS_SORT_BY])&&void 0!==t?t:i.c93.UpdateTime,order:null!==(n=e[a.S.PROJECTS_SORT_ORDER])&&void 0!==n?n:"desc"}},g=e=>{var t,n;return{[a.S.PROJECTS_SORT_BY]:null!==(t=e.sortBy)&&void 0!==t?t:i.c93.UpdateTime,[a.S.PROJECTS_SORT_ORDER]:null!==(n=e.order)&&void 0!==n?n:"desc"}},m=()=>{let{isLoading:e,value:t,set:n}=(0,o.sx)();return(0,r.useMemo)(()=>({isLoading:e,value:t?h(t):t,set:e=>n(g(e))}),[e,t,n])},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{projectApi:n}=(0,p.hU)(),{workspaceId:r}=(0,s.a)(),a={ownershipFilter:i.jQR.My,workspaceId:r,...e},{isLoading:o,data:d,fetchNextPage:u,hasNextPage:h}=(0,c.N)({queryKey:l.OV.projectsList(a),queryFn:async e=>{let{pageParam:t}=e;return await n.listProjects({limit:l.Nn,offset:t,workspaceId:r,...a})},initialPageParam:0,getNextPageParam:(e,t)=>e.projects.length===l.Nn?t.length*l.Nn:void 0,select:e=>({pages:e.pages,pageParams:e.pageParams}),refetchOnMount:!1,...t}),g=null==d?void 0:d.pages.reduce((e,t)=>e.concat(t.projects),[]);return{isLoading:o,data:g,hasNextPage:h,fetchNextPage:u,isEmptySearch:!o&&!(null==g?void 0:g.length)}},x=()=>{let{projectApi:e}=(0,p.hU)(),t=(0,d.NL)();return(0,u.D)({mutationFn:t=>e.deleteProject({projectId:t}),onSuccess:async()=>{await t.invalidateQueries({queryKey:l.OV.projectsList()})}})},v=()=>{let{projectApi:e}=(0,p.hU)(),t=(0,d.NL)();return(0,u.D)({mutationFn:t=>{let{id:n,workspaceId:r}=t;return e.copyProject({projectId:n,workspaceId:r,copyProjectRequest:{}})},onSuccess:async()=>{await t.invalidateQueries({queryKey:l.OV.projectsList()})}})}},77970:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(32814),i=n(16355),a=n(42180),o=n(35200);let l=()=>{let{userApi:e}=(0,i.hU)();return(0,a.a)({queryKey:(0,o.AZ)(["getUserStatistics"]),queryFn:()=>e.getCurrentUserStatistics(),notifyOnChangeProps:"all",refetchInterval:e=>{var t;return!(((null===(t=e.state.data)||void 0===t?void 0:t.recraftCount)||0)>=r.Oo)&&5e3}})}},6401:function(e,t,n){n.d(t,{I:function(){return w},KF:function(){return E},N$:function(){return C},iy:function(){return b},vQ:function(){return g},xb:function(){return k}});var r=n(52322),i=n(2784),a=n(97512),o=n(96938),l=n(41225),s=n(81642),c=n(8710);let d=(0,i.createContext)(null),u=()=>{let e=(0,i.useContext)(d);if(!e)throw Error("useStorageContext must be used within a StorageContext");return e},p=e=>{let t=(0,i.useRef)(new Map),n=(0,i.useRef)(new Map),r=(0,i.useCallback)((e,n)=>{let r=t.current.get(e);if(r)for(let e of r)e(n)},[]);return(0,i.useLayoutEffect)(()=>{let t=n.current,i=null!=e?e:new Map;for(let[e,n]of t)i.has(e)||r(e,null);for(let[e,n]of i){var a;let i=null!==(a=t.get(e))&&void 0!==a?a:null;(0,l.Xd)(i,n)||r(e,n)}n.current=i},[e,r]),(0,i.useCallback)((e,n)=>{let r=t.current.get(e);return r||(r=new Set,t.current.set(e,r)),r.add(n),()=>{let r=t.current.get(e);null==r||r.delete(n),(null==r?void 0:r.size)||t.current.delete(e)}},[])},h=e=>{let t=(0,i.useRef)(new Map),n=(0,i.useRef)(new Map),r=(0,i.useCallback)((e,t)=>{let r=n.current.get(e);return r||(r=new Set,n.current.set(e,r)),r.add(t),()=>{let r=n.current.get(e);r&&(r.delete(t),0===r.size&&n.current.delete(e))}},[]);return(0,i.useLayoutEffect)(()=>{let r=t.current,i=e?(0,a.B1)(e):null;i||(i=new Map);let o=new Map;for(let[e,t]of i.entries())o.set(e,new Map(t.map(e=>{let[t,n,r]=e;return[n,t]})));for(let e of new Set([...r.keys(),...o.keys()])){let t=n.current.get(e);if(!t)continue;let i=r.get(e);i||(i=new Map);let a=o.get(e);for(let[e,n]of(a||(a=new Map),i.entries()))if(!a.has(e))for(let r of t)r({id:e,type:n},!1);for(let[e,n]of a)if(!i.has(e))for(let r of t)r({id:e,type:n},!0)}t.current=o},[e]),{subscribeToChildren:r,getChildren:(0,i.useCallback)(e=>{var n;return null!==(n=t.current.get(e))&&void 0!==n?n:null},[])}},g=e=>{let{children:t}=e,n=(0,s.bF)(e=>e),a=(0,i.useRef)({subscribeToSnapshot:{layers:p(null==n?void 0:n.layers),mockups:p(null==n?void 0:n.mockups),frames:p(null==n?void 0:n.frames),imageSets:p(null==n?void 0:n.imageSets),textLayers:p(null==n?void 0:n.textLayers),figures:p(null==n?void 0:n.figures),brushStrokes:p(null==n?void 0:n.brushStrokes)},...h(null!=n?n:void 0)});return(0,r.jsx)(d.Provider,{value:a.current,children:t})},m=(e,t)=>t?{[t.type]:e.object[t.type].get(t.id)}:{},f=(e,t)=>t.reduce((t,n)=>t.set(n.id,m(e,n)),new Map),x=e=>{let t=(0,o.EP)(),{subscribeToSnapshot:n}=u(),[r,a]=(0,i.useState)(m(t,e));return(0,i.useLayoutEffect)(()=>a(m(t,e)),[null==e?void 0:e.id,null==e?void 0:e.type]),(0,i.useLayoutEffect)(()=>e?n[e.type](e.id,t=>a({[e.type]:t})):void 0,[null==e?void 0:e.id,null==e?void 0:e.type]),r},v=()=>{let e=(0,c.SP)(),t=(null==e?void 0:e.length)===1?e[0]:void 0,n=x(t);return{ref:t,snapshot:n}},C=(e,t)=>{var n;return null!==(n=x(t?{type:e,id:t}:void 0)[e])&&void 0!==n?n:null},b=(e,t)=>{let n=j((0,i.useMemo)(()=>t.map(t=>({id:t,type:e})),[t]));return(0,i.useMemo)(()=>Array.from(n.idToSnapshot).flatMap(t=>{let[n,r]=t;return r[e]?[[n,r[e]]]:[]}),[n])},w=e=>{let{ref:t,snapshot:n}=v(),r=null==t?void 0:t.id,i=(null==t?void 0:t.type)===e?n[e]:void 0;return r&&i?{id:r,entity:i}:{id:void 0,entity:void 0}},j=e=>{let t=(0,o.EP)(),{subscribeToSnapshot:n}=u(),r=(0,i.useRef)(f(t,e)),[a,l]=(0,i.useState)({idToSnapshot:r.current});return(0,i.useLayoutEffect)(()=>{r.current=f(t,e),l({idToSnapshot:r.current})},[e]),(0,i.useLayoutEffect)(()=>{let t=e.map(e=>n[e.type](e.id,t=>{t?r.current.set(e.id,{[e.type]:t}):r.current.delete(e.id),l({idToSnapshot:r.current})}));return()=>t.forEach(e=>e())},[e]),a},y=e=>{let{getChildren:t,subscribeToChildren:n}=u(),r=(0,i.useRef)(void 0===e?null:new Map(t(e))),[a,o]=(0,i.useState)({children:r.current});return(0,i.useLayoutEffect)(()=>void 0===e?void 0:n(e,(e,t)=>{r.current||(r.current=new Map),t?r.current.set(e.id,e.type):r.current.delete(e.id),o({children:r.current})}),[e]),a},k=(e,t)=>{let n=y(e);return(0,i.useMemo)(()=>{var e,r;return Array.from(null!==(r=null===(e=n.children)||void 0===e?void 0:e.entries())&&void 0!==r?r:[]).filter(e=>{let[n,r]=e;return!t||r===t}).map(e=>{let[t,n]=e;return{id:t,type:n}})},[n])},E=(e,t)=>{let n=k(e,t);return(0,i.useMemo)(()=>n.map(e=>{let{id:t,type:n}=e;return t}),[n])}},5356:function(e,t,n){n.d(t,{JJ:function(){return o},ew:function(){return a},lX:function(){return l}});var r=n(52322),i=n(2784);let a=(0,i.createContext)(null),o=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("usUIAndCanvasCommon must be used within a UIAndCanvasCommonProvider");return e},l=e=>{let{children:t}=e,n=(0,i.useState)(!1),o=(0,i.useMemo)(()=>({tweakingBrushSize:n}),[n]);return(0,r.jsx)(a.Provider,{value:o,children:t})}},97512:function(e,t,n){n.d(t,{B1:function(){return c},hn:function(){return u},q1:function(){return p},s:function(){return h},ud:function(){return s},vT:function(){return d}});var r=n(62175),i=n(22877),a=n(94526),o=n(51764),l=n(65001);class s{getHitboxById(e){let t=this.engine.shapeObserver.getShape(e);if(t)return{id:e,shape:t,inversedTransform:(0,a.SO)(t.transform),zIndex:this.engine.zOrder.getZOrder(e)}}async attachResources(e,t){}finishCopy(e,t){let{copyId:n,replaceParentId:r,under:a,zKey:o,removeSnapshotParentId:s}=t;this.createCopy(e,n,r,s);let c=(0,i.nn)(this.getLive(n));return o?c.set("zKey",o):a?c.set("zKey",(0,l.v)(void 0,e.zKey)):c.set("zKey",(0,l.v)(e.zKey,void 0)),c.toImmutable()}startCopy(e){let t=(0,i.nn)(this.get(e));return{createCopy:e=>{this.finishCopy(t,e)}}}getLive(e){var t;return null!==(t=this.all.get(e))&&void 0!==t?t:null}delete(e){this.engine.room.batch(()=>{this.all.delete(e);let t={type:this.type,id:e};this.engine.selection.isSelected(t)&&this.engine.selection.toggle({selection:[t]})})}constructor(e){this.engine=e,this.generateSnapPoints=!0,this.snapOnMove=!0,this.canRotate=!1,this.canResize=!1,this.attachImage=async(e,t)=>{if("vector"!==t.type&&"pastedVector"!==t.type){let{blob:n}=await this.engine.imageStore.downloadImage(t.id);e.imageBlobs[t.id]=n}else if(t.hasRector){let n=await this.engine.imageStore.downloadRector(t.id);e.rectors[t.id]={rector:n}}else{let{blob:n}=await this.engine.imageStore.downloadImage(t.id);e.svgs[t.id]=await n.text()}},this.get=e=>{var t,n;return null!==(n=null===(t=this.all.get(e))||void 0===t?void 0:t.toImmutable())&&void 0!==n?n:null}}}let c=e=>{let t=new Map;for(let a of r.g)for(let[r,o]of(e[a]||new Map).entries()){var n,i;let e=null!==(n=o.frameId)&&void 0!==n?n:null,l=null!==(i=t.get(e))&&void 0!==i?i:[];0===l.length&&t.set(e,l),l.push([a,r,o])}for(let e of t.values())e.sort((e,t)=>(0,o.EY)(e[2].zKey,t[2].zKey,e[1],t[1]));return t},d=(e,t,n)=>{let r=new Set(t.map(e=>{let{id:t}=e;return t})),i=(t,a)=>{var o,l;for(let[s,c]of null!==(l=e.get(null!==(o=null==t?void 0:t.id)&&void 0!==o?o:null))&&void 0!==l?l:[]){let e=r.has(c)?{type:s,id:c}:a;e&&n({type:s,id:c},c==e.id,e),i({type:s,id:c},e)}};i(null,null)},u=(e,t,n)=>{p(e.snapshot,t,n)},p=(e,t,n)=>{d(c(e),t,n)},h=(e,t)=>({[t.type]:e.object[t.type].getLive(t.id)})},51764:function(e,t,n){n.d(t,{EY:function(){return l},G6:function(){return m},zx:function(){return h}});var r=n(29190),i=n(15356),a=n(22877),o=n(65001);let l=(e,t,n,r)=>e<t?-1:e>t?1:n<r?-1:n>r?1:0,s=e=>{let t=[];for(let n of e){if(0===t.length)t.push([]);else{let e=t[t.length-1];e[e.length-1]+1!==n&&t.push([])}t[t.length-1].push(n)}return t},c=(e,t,n)=>{for(let r of s(t)){if(r[r.length-1]+1==e.length)continue;let[t,i,a]=e.slice(r[r.length-1]);for(let e of r){let t=(0,o.v)(i,a);n(e,t),i=t}}},d=(e,t,n)=>{if(0===t.length||e.length==t.length)return;let r=s(t),i=r[r.length-1],a=i[i.length-1]+1===e.length,l=a?e[i[0]]:void 0,c=a?e[i[0]-1]:e[e.length-1];for(let t of r.reverse())if(t[t.length-1]+1!==e.length)for(let e of t.reverse()){let t=(0,o.v)(c,l);n(e,t),l=t}},u=(e,t,n)=>{for(let r of s(t)){if(0==r[0])continue;let[t,i,a]=e.slice(0,r[0]+1).reverse();for(let e of r){let t=(0,o.v)(a,i);n(e,t),a=t}}},p=(e,t,n)=>{if(0===t.length||e.length==t.length)return;let r=s(t),i=r[0],a=0!==i[0]?void 0:e[i[i.length-1]],l=0!==i[0]?e[0]:e[i[i.length-1]+1];for(let e of r)if(0!=e[0])for(let t of e){let e=(0,o.v)(a,l);n(t,e),a=e}},h=(e,t,n)=>{var r;let i;let a=null!==(r=e.get(t))&&void 0!==r?r:[],l=-1,s=a.length;for(;s-l>1;){let e=l+s>>1,t=a[e][2];t.zKey<=n?l=e:(s=e,i=t.zKey)}return(0,o.v)(n,i)};var g=new WeakSet;class m{findPosition(e){let t=n=>{let r=[];for(let[i,a]of n.entries()){e.find(e=>e.id===a.id)&&r.push(i);let n=t(a.children);if(n)return n}return 0!==r.length?{list:n,indices:r}:null};return t(this.zStack)}bringForward(e){(0,r._)(this,g,f).call(this,e,c)}bringToFront(e){(0,r._)(this,g,f).call(this,e,d)}sendBackward(e){(0,r._)(this,g,f).call(this,e,u)}sendToBack(e){(0,r._)(this,g,f).call(this,e,p)}getNextZKeyUnder(e){this.sort();let t=e=>e.length>0?(0,o.v)(e[e.length-1].object.get("zKey")):(0,o.v)();if(!e)return t(this.zStack);{let n=this.idIndex.get(e);return t(n?n.children:[])}}getZOrder(e){return this.sort(),this.zOrder.get(e)||0}fixupDuplicateZKey(){let e=t=>{let n;for(let[r,i]of t.entries()){e(i.children);let a=t[r+1];a&&a.object.get("zKey")===i.object.get("zKey")&&i.object.set("zKey",(0,o.v)(n,a.object.get("zKey"))),n=i.object.get("zKey")}};e(this.zStack)}groupByParent(e){let t=new Map;for(let r of e){var n;let e=this.idIndex.get(r.id);if(!e)continue;let i=null!==(n=e.object.get("frameId"))&&void 0!==n?n:"",a=t.get(i);void 0==a&&(a=[],t.set(i,a)),a.push(r)}return[...t.values()]}visitNodes(e){for(let t of Object.values(this.engine.object))for(let[n,r]of t.all.entries())e(n,r)}sort(){if(this.sorted)return;this.idIndex.clear(),this.zStack=[],this.visitNodes((e,t)=>{this.idIndex.set(e,{id:e,object:t,children:[]})}),this.visitNodes((e,t)=>{let n;let r=t.get("frameId");if(r){let e=this.idIndex.get(r);e?n=e.children:(console.warn("can't find parent ".concat(r," during pre-order traversal")),n=this.zStack)}else n=this.zStack;n.push((0,a.nn)(this.idIndex.get(e)))});let e=t=>{for(let n of(t.sort((e,t)=>l(e.object.get("zKey"),t.object.get("zKey"),e.id,t.id)),t))e(n.children)};e(this.zStack);let t=this.zOrder;this.zOrder=new Map;let n=0,r=e=>{for(let t of e)this.zOrder.set(t.id,n),n++,r(t.children)};for(let[e,n]of(r(this.zStack),this.zOrder.entries()))if(n!==t.get(e)){var i;null===(i=this.subscribers.get(e))||void 0===i||i.forEach(e=>e())}this.sorted=!0}subscribe(){return this.engine.room.subscribe((0,a.nn)(this.engine.room.getStorageSnapshot()),e=>this.onUpdate(e),{isDeep:!0})}setUnsorted(){this.sorted=!1}onUpdate(e){for(let t of e)"LiveObject"===t.type?("zKey"in t.updates&&(this.sorted=!1),"frameId"in t.updates&&(this.sorted=!1)):"LiveMap"==t.type&&(this.sorted=!1);this.sorted=!1,this.sort()}constructor(e){(0,i._)(this,g),this.engine=e,this.zStack=[],this.idIndex=new Map,this.zOrder=new Map,this.subscribers=new Map,this.sorted=!1}}function f(e,t){this.engine.room.batch(()=>{for(let n of(this.sort(),this.fixupDuplicateZKey(),this.groupByParent(e))){let e=this.findPosition(n);if(!e)continue;let{list:r,indices:i}=e;t(r.map(e=>e.object.get("zKey")),i,(e,t)=>{this.sorted=!1,r[e].object.set("zKey",t)})}})}},65001:function(e,t,n){n.d(t,{Y:function(){return m},v:function(){return c}});var r=n(72918);let i=r.fj-r.$+1,a=e=>{let t=r.$+(e<0?i+e:e);if(t<r.$||t>r.fj)throw Error("Invalid n value: ".concat(e));return String.fromCharCode(t)},o=a(0),l=a(1),s=o+a(-1),c=(e,t)=>void 0!==e&&void 0!==t?p(e,t):void 0!==e?u(e):void 0!==t?d(t):l,d=e=>{let t=e.length-1;for(let n=0;n<=t;n++){let i=e.charCodeAt(n);if(!(i<=r.$)){if(n!==t)return e.substring(0,n+1);if(i===r.$+1)return e.substring(0,n)+s;return e.substring(0,n)+String.fromCharCode(i-1)}}return l},u=e=>{for(let t=0;t<=e.length-1;t++){let n=e.charCodeAt(t);if(!(n>=r.fj))return e.substring(0,t)+String.fromCharCode(n+1)}return e+l},p=(e,t)=>{if(e<t)return h(e,t);if(e>t)return h(t,e);throw Error("Cannot compute value between two equal positions")},h=(e,t)=>{let n=0,i=e.length,a=t.length;for(;;){let l=n<i?e.charCodeAt(n):r.$,s=n<a?t.charCodeAt(n):r.fj;if(l===s){n++;continue}if(s-l!=1)return g(e,n)+String.fromCharCode(s+l>>1);{let t=n+1,r=e.substring(0,t);return r.length<t&&(r+=o.repeat(t-r.length)),r+h(e.substring(t),"")}}},g=(e,t)=>t<e.length?e.substring(0,t):e+o.repeat(t-e.length),m=e=>e.reduce((e,t)=>t&&(!e||t>e)?t:e,void 0)||""},61021:function(e,t,n){n.d(t,{i:function(){return a}});var r=n(2784),i=n(96938);let a=()=>{let e=(0,i.EP)(),t=(0,r.useRef)(!1);return{batch:(0,r.useCallback)(n=>{t.current||(e.history.pause(),t.current=!0),n()},[]),stop:(0,r.useCallback)(()=>{t.current&&(e.history.resume(),t.current=!1)},[])}}},17758:function(e,t,n){n.d(t,{V:function(){return i}});var r=n(70522);let i=(e,t,n,i)=>(0,r.Z)(e,e=>{(null==n?void 0:n.some(t=>(null==t?void 0:t.current)&&e.composedPath().includes(t.current)))||t(e)},i)},28608:function(e,t,n){n.d(t,{ZI:function(){return l},kw:function(){return s},sX:function(){return c}});var r=n(24918),i=n(2784),a=n(55742),o=n(44574);let l=512,s=72,c=()=>{let e="on"===(0,a.jc)("highqualityexportpaywall"),{plan:t,workspaceUser:n,user:l}=(0,o.a)();return{isExportPaywallEnabled:(0,i.useMemo)(()=>{let i=!!(null==t?void 0:t.isFree)&&!n,a=!(null==l?void 0:l.registrationTime)||!(0,r.R)(l.registrationTime,new Date("2025-10-22"));return i&&a&&e},[e,null==t?void 0:t.isFree,null==l?void 0:l.registrationTime,n])}}},48078:function(e,t,n){n.d(t,{OZ:function(){return u},b5:function(){return p}});var r=n(2784),i=n(2180),a=n(62175),o=n(42444),l=n(41225),s=n(96938);let c=e=>!!(e&&(e===a.UA.Selection||e===a.UA.Grab||e===a.UA.ColorPicker)),d=e=>!!(e&&(e===a.UA.AreaSelection||e===a.UA.AreaMockupMask)),u=e=>c(e)||e===a.UA.Mask||e===a.UA.AreaMockupMask,p=()=>{let e=(0,s.EP)(),{activeTool:t,selectionMaskMode:n}=(0,o.S)(t=>({activeTool:t.activeTool,selectionMaskMode:e.selectionMaskMode}),l.Xd),a=(0,i.Z)(e.lastActiveToolBeforeGrabAndColorPicker),u=(0,r.useCallback)(t=>()=>{e.setActiveTool({activeTool:t})},[e]);return{activeTool:t,selectionMaskMode:n,lastActiveToolBeforeGrabAndColorPicker:a,isMoveTool:c(t),isAreaTool:d(t),toolSetter:u}}},7374:function(e,t,n){n.d(t,{B:function(){return r}});let r=(e,t,n)=>{let r=Math.max(e,t);if(r<=n)return{width:e,height:t};let i=n/r;return{width:Math.ceil(e*i),height:Math.ceil(t*i)}}},95832:function(e,t,n){n.d(t,{S:function(){return r},Y:function(){return i}});let r=e=>e.sort(()=>Math.random()>.5?1:-1),i=e=>{let t=Array.from({length:e},(e,t)=>t);for(let n=1;n<e;++n){let e=Math.floor(Math.random()*(n+1));n!==e&&([t[n],t[e]]=[t[e],t[n]])}return t}}}]);