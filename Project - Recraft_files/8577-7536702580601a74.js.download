try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="39a01b31-aff4-4b7a-a2f2-52eec571bde9",e._sentryDebugIdIdentifier="sentry-dbid-39a01b31-aff4-4b7a-a2f2-52eec571bde9")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8577],{81806:function(e,t,a){var r,n=a(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}t.Z=function(e){return n.createElement("svg",l({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=n.createElement("path",{d:"M14.0429 2.61134C14.2575 2.35896 14.6361 2.3284 14.8886 2.54298C15.1409 2.75761 15.1715 3.13623 14.9569 3.38868L6.64149 13.1719C6.30945 13.5625 5.70901 13.5727 5.36415 13.1934L0.555552 7.90333L0.483286 7.80567C0.341006 7.56577 0.382122 7.25062 0.596567 7.05567C0.811018 6.86101 1.12823 6.85029 1.3534 7.01466L1.44422 7.09669L5.98426 12.0899L14.0429 2.61134Z",fill:"currentColor"})))}},21032:function(e,t,a){var r,n=a(2784);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}t.Z=function(e){return n.createElement("svg",l({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=n.createElement("path",{d:"M13.4004 13.8008C13.7315 13.801 14.001 14.0692 14.001 14.4004C14.0008 14.7314 13.7314 14.9997 13.4004 15L2.59961 15C2.26859 14.9997 2.00021 14.7314 2 14.4004C2 14.069 2.26922 13.8008 2.60059 13.8008L13.4004 13.8008ZM8 0.900391C8.33137 0.900391 8.59961 1.16863 8.59961 1.5V10.2549L11.5762 7.27832C11.8105 7.04404 12.1895 7.04404 12.4238 7.27832C12.6581 7.51263 12.6581 7.89166 12.4238 8.12598L8.60059 11.9492C8.26865 12.2811 7.73135 12.2811 7.39941 11.9492L3.57617 8.12598C3.34188 7.89166 3.34186 7.51263 3.57617 7.27832C3.81048 7.04404 4.18952 7.04404 4.42383 7.27832L7.40039 10.2549L7.40039 1.5C7.40039 1.16863 7.66863 0.900391 8 0.900391Z",fill:"currentColor"})))}},98577:function(e,t,a){a.d(t,{S:function(){return eT}});var r,n,l,i,s=a(52322),o=a(15089),c=a.n(o),d=a(19204),u=a(15078),m=a(7614),p=a(44574),h=a(15254),g=a(75641),f=a(32447),x=a(31745),v=a(67154),b=a(4984),C=a(2784),y=a(4286),j=a(7616),k=a(65503),w=a(11261),I=a(85693);(r=n||(n={})).Default="default",r.Confirmation="confirmation";let L=(0,C.createContext)({previewImageId:null,setPreviewImageId:()=>{},selectedImageIds:[],toggleImageSelection:()=>{},setSelectedImageIds:()=>{},selectionModeIsActive:!1,status:"default",setStatus:()=>{},showMaxImagesWarning:!1}),N=e=>{let{children:t}=e,[a,r]=(0,I.v1)("imageId"),[n,l]=(0,C.useState)([]),[i,o]=(0,C.useState)("default"),[c,d]=(0,C.useState)(!1),u=(0,C.useRef)(null),m=(0,C.useCallback)(()=>{d(!0),u.current&&clearTimeout(u.current),u.current=window.setTimeout(()=>{d(!1)},3e3)},[]);(0,C.useEffect)(()=>()=>{u.current&&window.clearTimeout(u.current)},[]);let p=(0,C.useCallback)(e=>{l(t=>{let a=t.includes(e)?t.filter(t=>t!==e):[...t,e];return a.length>20?(m(),t):(u.current&&(window.clearTimeout(u.current),u.current=null),d(!1),a)})},[l,m]),h=(0,C.useMemo)(()=>n.length>0,[n]);return(0,s.jsx)(L.Provider,{value:{previewImageId:a,setPreviewImageId:r,selectedImageIds:n,toggleImageSelection:p,setSelectedImageIds:l,selectionModeIsActive:h,status:i,setStatus:o,showMaxImagesWarning:c},children:t})},D=()=>(0,C.useContext)(L);var T=a(41906),E=a(15952),z=a(81806);function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}var R=function(e){return C.createElement("svg",Z({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=C.createElement("g",{clipPath:"url(#clip0_40_1771)"},C.createElement("path",{d:"M8 4.2002C8.54993 4.2002 8.99978 4.19979 9.36328 4.22949C9.73352 4.2598 10.0685 4.32426 10.3809 4.4834C10.8697 4.73262 11.2674 5.13026 11.5166 5.61914C11.6758 5.93168 11.7412 6.26717 11.7715 6.6377C11.8012 7.00119 11.8008 7.45013 11.8008 8V11.3994C11.8008 11.9494 11.8012 12.3991 11.7715 12.7627C11.7412 13.133 11.6757 13.4679 11.5166 13.7803C11.2674 14.2692 10.8697 14.6668 10.3809 14.916C10.0685 15.0752 9.73353 15.1406 9.36328 15.1709C8.99978 15.2006 8.54993 15.2002 8 15.2002H4.60059C4.05086 15.2002 3.60174 15.2005 3.23828 15.1709C2.86779 15.1406 2.53223 15.0752 2.21973 14.916C1.73075 14.6668 1.3332 14.2693 1.08398 13.7803C0.924778 13.4678 0.860374 13.1331 0.830078 12.7627C0.800384 12.3991 0.800782 11.9495 0.800782 11.3994V8C0.800781 7.45009 0.8004 7.0012 0.830078 6.6377C0.860366 6.26718 0.924745 5.93167 1.08398 5.61914C1.33322 5.13033 1.73087 4.73257 2.21973 4.4834C2.53219 4.3243 2.86786 4.25976 3.23828 4.22949C3.60174 4.19985 4.05084 4.2002 4.60059 4.2002H8ZM4.60059 5.39941C4.03114 5.39941 3.63923 5.40008 3.33594 5.42481C3.03994 5.44899 2.87984 5.49414 2.76465 5.55273C2.50155 5.68686 2.28752 5.901 2.15332 6.16406C2.09462 6.27926 2.04961 6.4391 2.02539 6.73535C2.00063 7.03868 2 7.43034 2 8V11.3994C2 11.969 2.00065 12.3608 2.02539 12.6641C2.04961 12.9605 2.09461 13.1201 2.15332 13.2354C2.28755 13.4987 2.50127 13.7135 2.76465 13.8477C2.87985 13.9063 3.03985 13.9504 3.33594 13.9746C3.63924 13.9993 4.03111 14 4.60059 14H8C8.56939 14 8.9614 13.9994 9.26465 13.9746C9.56055 13.9504 9.72079 13.9063 9.83594 13.8477C10.0992 13.7134 10.3141 13.4986 10.4482 13.2354C10.5068 13.1202 10.551 12.96 10.5752 12.6641C10.5999 12.3608 10.6006 11.9689 10.6006 11.3994V8C10.6006 7.43034 10.6 7.03868 10.5752 6.73535C10.551 6.43914 10.5069 6.27927 10.4482 6.16406C10.3141 5.90077 10.0992 5.68697 9.83594 5.55273C9.72077 5.49405 9.56075 5.44903 9.26465 5.42481C8.9614 5.40006 8.56938 5.39942 8 5.39941H4.60059ZM8.59961 6.90039C8.93098 6.90039 9.2002 7.16863 9.2002 7.5C9.2002 7.83137 8.93098 8.09961 8.59961 8.09961H6.90039V12C6.90039 12.3314 6.63118 12.5996 6.29981 12.5996C5.96851 12.5995 5.7002 12.3313 5.7002 12V8.09961H4C3.66863 8.09961 3.40039 7.83137 3.40039 7.5C3.40039 7.16863 3.66863 6.90039 4 6.90039H8.59961ZM11.3994 0.800782C11.9496 0.800782 12.3991 0.800371 12.7627 0.830078C13.1331 0.860376 13.4678 0.924783 13.7803 1.08398C14.2692 1.3332 14.6668 1.73079 14.916 2.21973C15.0752 2.53223 15.1406 2.8678 15.1709 3.23828C15.2005 3.60175 15.2002 4.05082 15.2002 4.60059V8C15.2002 8.54997 15.2006 8.99976 15.1709 9.36328C15.1406 9.73357 15.0752 10.0685 14.916 10.3809C14.6668 10.8697 14.2692 11.2674 13.7803 11.5166C13.4778 11.6707 13.1542 11.7351 12.7979 11.7666C12.7982 11.6467 12.8008 11.5239 12.8008 11.3994V10.5596C13.0119 10.534 13.1393 10.4971 13.2354 10.4482C13.4987 10.3141 13.7134 10.0992 13.8477 9.83594C13.9063 9.72077 13.9504 9.56062 13.9746 9.26465C13.9994 8.96138 14 8.56944 14 8V4.60059C14 4.03106 13.9993 3.63925 13.9746 3.33594C13.9504 3.03986 13.9063 2.87985 13.8477 2.76465C13.7135 2.50131 13.4987 2.28755 13.2354 2.15332C13.1201 2.09461 12.9604 2.04961 12.6641 2.02539C12.3607 2.00064 11.9691 2 11.3994 2H8C7.43024 2 7.03871 2.00063 6.73535 2.02539C6.43897 2.04961 6.27929 2.09461 6.16406 2.15332C5.90092 2.28751 5.68689 2.50148 5.55273 2.76465C5.50375 2.8609 5.46521 2.98822 5.43945 3.2002H4.60059C4.47616 3.2002 4.35324 3.20088 4.2334 3.20117C4.26491 2.84524 4.32953 2.52186 4.4834 2.21973C4.7326 1.73081 5.13024 1.33322 5.61914 1.08398C5.93172 0.924715 6.2671 0.860359 6.6377 0.830078C7.00125 0.800396 7.45 0.800782 8 0.800782H11.3994Z",fill:"currentColor"}))),i||(i=C.createElement("defs",null,C.createElement("clipPath",{id:"clip0_40_1771"},C.createElement("rect",{width:16,height:16,fill:"white"})))))},S=a(79567);let M=e=>{let{prompt:t}=e,{onCopy:a,copied:r}=(0,T.V)(),n=(0,h.T)(),l=(0,C.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),t&&(await a(t),(0,k.L9)("GalleryCopyPrompt",{stringToCopy:t}))},[a,t]);return t?(0,s.jsx)(S.u,{content:n("gallery.actions.copyPrompt"),children:(0,s.jsx)(E.z,{onClick:l,className:"w-full",variant:"elevated",size:"m",icon:!0,children:r?(0,s.jsx)(z.Z,{}):(0,s.jsx)(R,{})})}):null};var P=a(87855),W=a(71088),V=a(94357),G=a(60485);let H=e=>{let{imageId:t}=e,{open:a}=(0,W.R)(),r=(0,h.T)(),{mutate:n}=(0,V.Vl)(),l=(0,C.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),a(P.n.ConfirmModal,{source:"gallery-delete-item",titleLabel:r("dialogs.delete.titleLabel"),description:r("dialogs.delete.description.historyItem"),variant:"destructive",onConfirm:()=>{(0,k.L9)("GalleryDelete",{imageId:t}),n(t)}})},[a,r,n,t]);return(0,s.jsx)(S.u,{content:r("gallery.actions.delete"),children:(0,s.jsx)(E.z,{onClick:l,className:"w-full",variant:"elevated",size:"m",icon:!0,children:(0,s.jsx)(G.Z,{className:"text-accent-red-1"})})})};var O=a(5632),_=a(16355),q=a(21032),B=a(98489);let F=e=>{let{prompt:t,imageId:a,liked:r}=e,[n,l]=(0,C.useState)(!1),i=(0,h.T)(),{asPath:o}=(0,O.useRouter)(),{mutate:c}=(0,V.Zc)({imageId:a,liked:r,reactionType:d.DG4.SaveFromHistory}),{imageApi:u}=(0,_.hU)(),m=(0,C.useCallback)(async()=>{if(!n){if(!a){l(!1);return}await (0,B.LR)({filename:(0,B.SU)(t||"image"),fetchBlob:()=>u.downloadImage({imageId:a,rasterImageContentType:d.X5Q.Png})}),(0,k.L9)("GalleryLoad",{imageId:a,page:o}),c(),l(!1)}},[n,a,t,o,c,u,l]),p=(0,C.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!0),m()},[m]);return(0,s.jsx)(S.u,{content:i("gallery.actions.download"),children:(0,s.jsx)(E.z,{onClick:p,className:"w-full",variant:"elevated",size:"m",icon:!0,children:(0,s.jsx)(q.Z,{})})})};var Q=a(57027),$=a(92966);let A=e=>{let{imageId:t}=e,[a,r]=(0,C.useState)(!0),n=(0,h.T)(),{mutate:l}=(0,V.db)({imageId:t,liked:!0}),i=(0,C.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),r(!1),(0,k.L9)("GalleryLike",{imageId:t}),l()},[l,t]),o=a?Q.Z:$.Z;return(0,s.jsx)(S.u,{content:n("gallery.actions.like"),children:(0,s.jsx)(E.z,{className:"w-full",variant:"elevated",size:"m",icon:!0,onClick:i,children:(0,s.jsx)(o,{})})})},U=e=>{let{prompt:t,imageId:a,liked:r,canDelete:n,canLike:l}=e,{selectionModeIsActive:i}=D();return i?null:(0,s.jsx)("div",{className:"to-content-6 absolute inset-0 flex flex-col justify-end [border-radius:inherit] bg-gradient-to-b from-transparent p-3 opacity-0 transition-opacity duration-150 ease-out group-hover:opacity-100",children:(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(M,{prompt:t}),(0,s.jsx)(F,{prompt:t,imageId:a,liked:r}),n?(0,s.jsx)(H,{imageId:a}):null,l?(0,s.jsx)(A,{imageId:a}):null]})})};var K=a(70988);let J=(0,j.tv)({base:"absolute top-1 left-1 flex cursor-pointer items-center justify-center p-2 transition-opacity duration-150 ease-out group-hover:opacity-100",variants:{selectionModeIsActive:{true:"opacity-100",false:"opacity-0"}}}),X=e=>{let{imageId:t}=e,{toggleImageSelection:a,selectedImageIds:r,selectionModeIsActive:n}=D(),l=(0,C.useMemo)(()=>r.includes(t),[t,r]),i=(0,C.useCallback)(e=>{(0,k.L9)("GallerySelectImage",{imageId:t}),e.preventDefault(),e.stopPropagation(),a(t)},[t,a]);return(0,s.jsx)("div",{role:"button",onClick:i,className:J({selectionModeIsActive:n}),children:(0,s.jsx)(K.X,{variant:"elevated",checked:l})})},Y=(0,j.tv)({slots:{root:"group xs:rounded-xl bg-base-2 xs:p-[31px] xs:aspect-square relative flex cursor-pointer items-center justify-center overflow-hidden rounded-xs border-1 border-transparent bg-clip-padding p-0",image:"xs:rounded-lg h-auto max-h-full w-auto max-w-full overflow-hidden rounded-xs"},variants:{selected:{true:{root:"bg-accent-teal-3 border-accent-teal-2 xs:p-[31px]"}}}}),ee=e=>{let{imageId:t,liked:a,width:r,height:n,prompt:l="",imageType:i,canDelete:o,canLike:c}=e,{setPreviewImageId:d,selectedImageIds:u,selectionModeIsActive:m,toggleImageSelection:p}=D(),h=(0,C.useMemo)(()=>u.includes(t),[t,u]),g=(0,C.useCallback)(()=>{m?((0,k.L9)("GallerySelectImage"),p(t)):d(t)},[t,m,d,p]),{root:f,image:x}=Y({selected:h});return(0,s.jsxs)("div",{onClick:g,role:"button",className:f(),children:[(0,s.jsx)(y.G,{imageId:t,width:r,height:n,alt:l,extension:(0,w.aV)(i)?"svg":void 0,className:x()}),(0,s.jsx)(U,{prompt:l,imageId:t,liked:a,canDelete:o,canLike:c}),(0,s.jsx)(X,{imageId:t})]})},et=e=>{let{children:t}=e,{isMobile:a}=(0,x.d)();return a?(0,s.jsx)(g.Z,{gutter:"4px",columnsCount:2,children:t}):(0,s.jsx)("div",{className:"3xl:grid-cols-7 relative grid grid-cols-3 gap-1 md:grid-cols-4 xl:grid-cols-5",children:t})},ea=e=>{let{isLoading:t,elements:a,canDelete:r,canLike:n}=e,l=(0,h.T)();return t||(null==a?void 0:a.length)?(0,s.jsx)(et,{children:t?Array.from({length:35}).map((e,t)=>(0,s.jsx)(b.O,{className:"xs:rounded-xl aspect-square w-full rounded-xs"},t)):null==a?void 0:a.map(e=>(0,s.jsx)(ee,{canDelete:r,canLike:n,...e},e.imageId))}):(0,s.jsx)(f.u,{title:l("gallery.emptyResults.title"),description:l("gallery.emptyResults.description"),icon:(0,s.jsx)(v.Z,{className:"size-10"})})};var er=a(64907),en=a(57567);let el=()=>{let e=(0,h.T)(),{push:t}=(0,O.useRouter)(),a=(0,C.useCallback)(()=>{t(er._j.projects.url)},[t]);return(0,s.jsx)(f.u,{title:e("gallery.emptyRecrafts.title"),description:e("gallery.emptyRecrafts.description"),icon:(0,s.jsx)(en.Z,{className:"size-10"}),footer:(0,s.jsx)(E.z,{onClick:a,children:e("gallery.emptyRecrafts.actionButton")})})};var ei=a(200),es=a(96220),eo=a(40);let ec=e=>{let{canDelete:t,searchQueryType:a}=e,r=(0,ei.Z)(),{open:n}=(0,es.Rh)(),l=(0,h.T)(),{previewImageId:i,setPreviewImageId:o}=D(),{mutate:c}=(0,V.Vl)(),u=(0,C.useCallback)(()=>{o(null)},[o]),m=(0,C.useCallback)(e=>{n(es.nK.ConfirmModal,{source:"gallery-delete-item",titleLabel:l("dialogs.delete.titleLabel"),description:a===d.$WI.History?l("dialogs.delete.description.historyItem"):l("dialogs.delete.description.feedItem"),variant:"destructive",onConfirm:()=>(u(),c(e))})},[n,u,c,a,l]);return r()&&i?(0,s.jsx)(eo.V,{canDelete:t,onDelete:m,onClose:u,recraftImage:{imageId:i}}):null};var ed=a(46663),eu=a(32087),em=a(16689),ep=a(9453),eh=a(84828);let eg=()=>{let e=(0,h.T)(),{setStatus:t,selectedImageIds:a,setSelectedImageIds:r}=D(),{mutate:l,isPending:i}=(0,ep.L5)(),o=(0,C.useCallback)(()=>{(0,k.L9)("GalleryDeleteBatchCancel"),t(n.Default)},[t]),c=(0,C.useCallback)(()=>{(0,k.L9)("GalleryDeleteBatchConfirm",{countOfImages:a.length}),l(a,{onSuccess:()=>{r([]),t(n.Default)},onError:()=>{t(n.Default)}})},[l,a,r,t]);return(0,s.jsxs)("div",{className:"flex min-h-[270px] w-full flex-col justify-center p-3",children:[(0,s.jsx)("div",{className:"bg-accent-red-3 mx-auto mt-2 flex size-20 shrink-0 items-center justify-center rounded-xl",children:(0,s.jsx)(G.Z,{className:"text-accent-red-1 size-10"})}),(0,s.jsx)("div",{className:"text-headline-3 text-content-1 mt-5 text-center",children:e("dialogs.delete.titleLabel")}),(0,s.jsx)("div",{className:"text-body-2 text-content-2 mt-1.5 text-center whitespace-pre-line",children:e("dialogs.delete.description.historyBatch")}),(0,s.jsxs)("div",{className:"mt-6 flex w-full gap-2",children:[(0,s.jsx)(E.z,{variant:"secondary",size:"m",className:"w-full",onClick:o,disabled:i,children:e("dialogs.delete.cancelLabel")}),(0,s.jsx)(E.z,{variant:"primary",size:"m",className:"w-full",onClick:c,loading:i,children:e("dialogs.delete.confirmLabel")})]})]})},ef=e=>{let{disabled:t}=e,{setStatus:a}=D(),r=(0,C.useCallback)(()=>{(0,k.L9)("GalleryDeleteBatch"),a(n.Confirmation)},[a]);return(0,s.jsx)(E.z,{size:"l",className:"bg-accent-red-3 enabled:hover:bg-accent-red-2",variant:"secondary",onClick:r,disabled:t,icon:!0,children:(0,s.jsx)(G.Z,{className:"text-accent-red-1 size-5"})})},ex=e=>{let{disabled:t,searchQueryType:a}=e,{selectedImageIds:r}=D(),{mutate:n}=(0,ep.JE)(),{mutateAsync:l,isPending:i}=(0,ep.xW)(),o=(0,C.useCallback)(()=>l({imageIds:r}),[l,r]),c=(0,C.useCallback)(()=>{r.length&&((0,k.L9)("GalleryDownloadBatch",{countOfImages:r.length}),(0,B.LR)({filename:"recraft-images",fetchBlob:o}),n({imageIds:r,reactionType:a===d.$WI.History?d.DG4.SaveFromHistory:d.DG4.SaveFromGallery}))},[o,n,a,r]);return(0,s.jsx)(E.z,{size:"l",variant:"secondary",icon:!0,disabled:t,loading:i,onClick:c,children:(0,s.jsx)(q.Z,{className:"size-5"})})},ev=e=>{let{isLiked:t,disabled:a}=e,{selectedImageIds:r,setSelectedImageIds:n}=D(),[l,i]=(0,C.useState)(t),{mutate:o,isPending:c}=(0,ep.sq)();(0,C.useEffect)(()=>{i(t)},[r,t]);let d=(0,C.useCallback)(()=>{(0,k.L9)("GalleryLikeBatch"),i(e=>!e),o({imageIds:r,liked:t},{onSuccess:()=>{t&&n([])},onError:()=>{i(t)}})},[t,o,r,n]),u=l?Q.Z:$.Z;return(0,s.jsx)(E.z,{size:"l",variant:"secondary",icon:!0,loading:c,disabled:a,onClick:d,children:(0,s.jsx)(u,{className:"size-5"})})},eb=(0,j.tv)({slots:{root:"dark bg-elevated inset-border ease fixed bottom-3 left-1/2 w-100 -translate-x-1/2 overflow-hidden rounded-xl transition-all duration-200",content:"ease-out-quart flex w-full justify-between p-3 transition-[height] duration-200",actionsWrapper:"flex items-center gap-1",textWrapper:"flex flex-col gap-0.5",selectedText:"text-content-1 text-body-1",warningText:"text-body-3 text-accent-red-1 hidden",buttonsWrapper:"flex items-center gap-2"},variants:{visible:{true:{root:"translate-y-0 opacity-100"},false:{root:"pointer-events-none translate-y-full opacity-0"}},status:{confirmation:{content:"h-[294px]"},default:{content:"h-[72px]"}},warning:{true:{root:"animate-shake",selectedText:"animate-in slide-in-from-bottom",warningText:"animate-in slide-in-from-bottom block"}}}}),eC=e=>{let{searchQueryType:t}=e,a=(0,h.T)(),{isPending:r}=(0,ep.L5)(),{isPending:l}=(0,ep.sq)(),{isPending:i}=(0,ep.xW)(),{selectedImageIds:o,setSelectedImageIds:c,showMaxImagesWarning:u,status:m}=D(),p=(0,C.useCallback)(()=>{o.length>0&&c([])},[o,c]);(0,ed.Z)(em.A.Escape,p,{},[p]);let g=t===d.$WI.History,f=t===d.$WI.Liked,{root:x,content:v,actionsWrapper:b,textWrapper:y,selectedText:j,warningText:k,buttonsWrapper:w}=eb({visible:o.length>0,status:m,warning:u});return(0,s.jsx)("div",{className:x(),children:(0,s.jsx)("div",{className:v(),children:(0,eu.EQ)(m).with(n.Confirmation,()=>(0,s.jsx)(eg,{})).with(n.Default,()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:b(),children:[(0,s.jsx)(E.z,{size:"l",variant:"transparent",className:"text-content-3",icon:!0,onClick:p,children:(0,s.jsx)(eh.Z,{className:"size-5"})}),(0,s.jsxs)("div",{className:y(),children:[(0,s.jsx)("div",{className:j(),children:a("gallery.bottomSelectionMenu.selectedImages",{count:o.length})}),(0,s.jsx)("div",{className:k(),children:a("gallery.bottomSelectionMenu.maxImagesWarning",{count:20})})]})]}),(0,s.jsxs)("div",{className:w(),children:[(0,s.jsx)(ex,{searchQueryType:t,disabled:r||l}),(0,s.jsx)(ev,{disabled:r||i,isLiked:f}),g?(0,s.jsx)(ef,{disabled:l||i}):null]})]})).exhaustive()})})};var ey=a(91443),ej=a(25782),ek=a(39975),ew=a(23995),eI=a(77970),eL=a(35200);let eN=e=>{var t,a;let{imageParentType:r,searchQueryType:n,searchQuery:l}=e,i=(0,ei.Z)(),{data:s,isLoading:o}=(0,ew.RG)(),c=(0,C.useMemo)(()=>{if(r&&r!==ej.I&&s)return(0,ey.qS)(s,r)},[r,s]),d=(0,C.useMemo)(()=>(0,eL.l$)({type:n,filter:l,imageTypes:c}),[n,l,c]),u=(0,C.useMemo)(()=>{if(r&&r!==ej.I){var e;return!!(null==d?void 0:null===(e=d.imageTypes)||void 0===e?void 0:e.length)}return!0},[r,null==d?void 0:null===(t=d.imageTypes)||void 0===t?void 0:t.length]),m=(0,C.useCallback)(()=>{(0,k.L9)("GallerySearch",d)},[d]),{isLoading:p,images:h,hasNextPage:g,fetchNextPage:f}=(0,ek.Ql)({payload:d,onSuccess:m,enabled:u}),{data:x,isLoading:v}=(0,eI.Z)();return{isLoading:v||p||o||!i(),images:h,hasNextPage:g,fetchNextPage:f,recraftCount:null!==(a=null==x?void 0:x.recraftCount)&&void 0!==a?a:0}},eD=e=>{let[t]=(0,I.v1)("q",{defaultValue:""}),[a]=(0,I.v1)("imageParentType",(0,I.km)(ej.i));return{searchQuery:e?t:"",imageParentType:a}},eT=e=>{let{searchQueryType:t=d.$WI.Community,hasSearch:a=!1,placeholder:r}=e,{user:n}=(0,p.a)(),{searchQuery:l,imageParentType:i}=eD(a),{isLoading:o,images:h,hasNextPage:g,fetchNextPage:f,recraftCount:x}=eN({searchQuery:l,imageParentType:i,searchQueryType:t}),v=0===x&&0===h.length&&!o,b=t===d.$WI.Liked,C=t===d.$WI.History;return(0,s.jsxs)(N,{children:[(0,s.jsx)(c(),{loadMore:()=>f(),hasMore:g,children:v?(0,s.jsx)(el,{}):(0,s.jsxs)("div",{className:"xs:gap-6 xs:min-h-[calc(100vh-48px)] relative flex min-h-[calc(100vh-65px)] flex-1 flex-shrink-0 flex-col gap-4 p-0",children:[(0,s.jsx)(u.Z,{hasSearch:a,placeholder:r}),(0,s.jsx)(ea,{isLoading:o,elements:h,canDelete:C,canLike:b})]})}),(0,s.jsx)(ec,{canDelete:C,searchQueryType:t}),(0,s.jsx)(m.Qg,{className:"max-xs:hidden ".concat(n?"":"z-sidebar bottom-28")}),(0,s.jsx)(eC,{searchQueryType:t})]})}},9453:function(e,t,a){a.d(t,{JE:function(){return p},L5:function(){return m},iN:function(){return d},sq:function(){return u},xW:function(){return h}});var r=a(19204),n=a(86132),l=a(87686),i=a(14010),s=a(16355),o=a(2374),c=a(35200);let d=()=>{let{imageApi:e}=(0,s.hU)();return(0,l.D)({mutationFn:t=>e.uploadImage(t)})},u=()=>{let{defaultApi:e}=(0,s.hU)(),t=(0,i.NL)();return(0,l.D)({mutationFn:t=>{let{imageIds:a,liked:n}=t;return e.postImagesReaction({postImagesReactionRequest:{reaction:r.DG4.Like,cancel:n,imageIds:a}})},onSuccess:(e,a)=>{let{imageIds:n}=a;t.invalidateQueries({queryKey:(0,c.AZ)([o.VJ,{type:r.$WI.Liked}]),refetchType:"all"}),n.forEach(e=>{t.invalidateQueries({queryKey:(0,c.AZ)([o.Wb,e]),refetchType:"all"})})}})},m=()=>{let{defaultApi:e}=(0,s.hU)(),t=(0,i.NL)(),{addNotification:a}=(0,n.lm)();return(0,l.D)({mutationFn:t=>e.postImagesReaction({postImagesReactionRequest:{reaction:r.DG4.RemoveFromHistory,imageIds:t}}),onSuccess:()=>{t.invalidateQueries({queryKey:(0,c.AZ)([o.VJ])})},onError:e=>{a({error:e})}})},p=()=>{let{defaultApi:e}=(0,s.hU)();return(0,l.D)({mutationFn:t=>{let{imageIds:a,liked:r,reactionType:n}=t;return e.postImagesReaction({postImagesReactionRequest:{reaction:n,cancel:r,imageIds:a}})}})},h=()=>{let{imageApi:e}=(0,s.hU)(),{addNotification:t}=(0,n.lm)();return(0,l.D)({mutationFn:t=>{let{imageIds:a,rasterImageContentType:r}=t;return e.batchDownloadImages({imageId:a,rasterImageContentType:r})},onError:e=>{t({error:e})}})}},70988:function(e,t,a){a.d(t,{X:function(){return m}});var r,n=a(52322),l=a(23681),i=a(7616),s=a(2784);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}var c=function(e){return s.createElement("svg",o({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=s.createElement("path",{d:"M1.77002 6H10.23",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})))},d=a(19567);let u=(0,i.tv)({slots:{root:["group text-content-inverted-1 bg-base-12 hover:bg-base-11 border-base-12 hover:border-base-11 ease-in-out-quad inline-flex h-5 min-h-5 w-5 min-w-5 cursor-pointer items-center justify-center rounded-md border-1 bg-clip-padding transition-colors duration-150","disabled:border-base-3 disabled:bg-base-2 disabled:text-content-3 disabled:pointer-events-none disabled:cursor-default disabled:shadow-none","disabled:aria-unchecked:border-base-3 disabled:aria-unchecked:bg-base-2 disabled:aria-unchecked:shadow-none"],indicator:["inline-flex items-center opacity-100 transition-opacity duration-150","group-aria-unchecked:scale-0 group-aria-unchecked:opacity-0","group-active:scale-90 group-active:transition-transform group-active:duration-150 group-active:ease-in-out","group-aria-checked:scale-100 group-aria-checked:transition-transform group-aria-checked:duration-305 group-aria-checked:ease-[linear(0.00,-0.199,-0.00574,0.348,0.685,0.928,1.07,1.12,1.11,1.08,1.05,1.02,0.999,0.990,0.988,0.990,0.993,0.997,0.999,1.00,1.00)]","group-aria-checked:group-active:scale-90 group-aria-checked:group-active:duration-150 group-aria-checked:group-active:ease-in-out"]},variants:{variant:{secondary:{root:"aria-unchecked:bg-base-4 aria-unchecked:border-base-4 aria-unchecked:hover:bg-base-3 aria-unchecked:hover:border-base-3"},elevated:{root:["aria-unchecked:bg-elevated aria-unchecked:border-base-4 aria-unchecked:shadow-xs","aria-unchecked:hover:border-base-5 aria-unchecked:hover:shadow-s"]}}}}),m=e=>{let{className:t,variant:a="secondary",checked:r,...i}=e,{root:s,indicator:o}=u({variant:a});return(0,n.jsx)(l.fC,{className:s({className:t}),checked:r,...i,children:(0,n.jsx)(l.z$,{forceMount:!0,className:o(),children:"indeterminate"===r?(0,n.jsx)(c,{}):(0,n.jsx)(d.Z,{})})})}},23681:function(e,t,a){a.d(t,{fC:function(){return y},z$:function(){return k}});var r=a(2784),n=a(62656),l=a(92211),i=a(17998),s=a(87695),o=a(90022),c=a(35019),d=a(79616),u=a(72714),m=a(52322),p="Checkbox",[h,g]=(0,l.b)(p),[f,x]=h(p);function v(e){let{__scopeCheckbox:t,checked:a,children:n,defaultChecked:l,disabled:i,form:o,name:c,onCheckedChange:d,required:u,value:h="on",internal_do_not_use_render:g}=e,[x,v]=(0,s.T)({prop:a,defaultProp:l??!1,onChange:d,caller:p}),[b,C]=r.useState(null),[y,j]=r.useState(null),k=r.useRef(!1),w=!b||!!o||!!b.closest("form"),I={checked:x,disabled:i,setChecked:v,control:b,setControl:C,name:c,form:o,value:h,hasConsumerStoppedPropagationRef:k,required:u,defaultChecked:!L(l)&&l,isFormControl:w,bubbleInput:y,setBubbleInput:j};return(0,m.jsx)(f,{scope:t,...I,children:"function"==typeof g?g(I):n})}var b="CheckboxTrigger",C=r.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...l},s)=>{let{control:o,value:c,disabled:d,checked:p,required:h,setControl:g,setChecked:f,hasConsumerStoppedPropagationRef:v,isFormControl:C,bubbleInput:y}=x(b,e),j=(0,n.e)(s,g),k=r.useRef(p);return r.useEffect(()=>{let e=o?.form;if(e){let t=()=>f(k.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,f]),(0,m.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":L(p)?"mixed":p,"aria-required":h,"data-state":N(p),"data-disabled":d?"":void 0,disabled:d,value:c,...l,ref:j,onKeyDown:(0,i.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.Mj)(a,e=>{f(e=>!!L(e)||!e),y&&C&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});C.displayName=b;var y=r.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:r,checked:n,defaultChecked:l,required:i,disabled:s,value:o,onCheckedChange:c,form:d,...u}=e;return(0,m.jsx)(v,{__scopeCheckbox:a,checked:n,defaultChecked:l,disabled:s,required:i,onCheckedChange:c,name:r,form:d,value:o,internal_do_not_use_render:({isFormControl:e})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(C,{...u,ref:t,__scopeCheckbox:a}),e&&(0,m.jsx)(I,{__scopeCheckbox:a})]})})});y.displayName=p;var j="CheckboxIndicator",k=r.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:r,...n}=e,l=x(j,a);return(0,m.jsx)(d.z,{present:r||L(l.checked)||!0===l.checked,children:(0,m.jsx)(u.WV.span,{"data-state":N(l.checked),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});k.displayName=j;var w="CheckboxBubbleInput",I=r.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:l,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:d,required:p,disabled:h,name:g,value:f,form:v,bubbleInput:b,setBubbleInput:C}=x(w,e),y=(0,n.e)(a,C),j=(0,o.D)(s),k=(0,c.t)(l);r.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!i.current;if(j!==s&&e){let a=new Event("click",{bubbles:t});b.indeterminate=L(s),e.call(b,!L(s)&&s),b.dispatchEvent(a)}},[b,j,s,i]);let I=r.useRef(!L(s)&&s);return(0,m.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??I.current,required:p,disabled:h,name:g,value:f,form:v,...t,tabIndex:-1,ref:y,style:{...t.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function L(e){return"indeterminate"===e}function N(e){return L(e)?"indeterminate":e?"checked":"unchecked"}I.displayName=w}}]);