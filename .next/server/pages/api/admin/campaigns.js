"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/campaigns";
exports.ids = ["pages/api/admin/campaigns"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcampaigns&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Ccampaigns%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcampaigns&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Ccampaigns%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_campaigns_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\admin\\campaigns\\index.ts */ \"(api)/./pages/api/admin/campaigns/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_campaigns_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_campaigns_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/campaigns\",\n        pathname: \"/api/admin/campaigns\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_campaigns_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGY2FtcGFpZ25zJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNhZG1pbiU1Q2NhbXBhaWducyU1Q2luZGV4LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3FFO0FBQ3JFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxnRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsZ0VBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hhcnRlci1ib29raW5nLXBsYXRmb3JtLz8yOWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcYWRtaW5cXFxcY2FtcGFpZ25zXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vY2FtcGFpZ25zXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vY2FtcGFpZ25zXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcampaigns&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Ccampaigns%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/admin/campaigns/index.ts":
/*!********************************************!*\
  !*** ./pages/api/admin/campaigns/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://rdbuwyefbgnbuhmjrizo.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\nasync function handler(req, res) {\n    if (req.method === \"GET\") {\n        return getCampaigns(req, res);\n    } else if (req.method === \"POST\") {\n        return createCampaign(req, res);\n    } else {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n}\nasync function getCampaigns(req, res) {\n    try {\n        const { data: campaigns, error } = await supabase.from(\"email_campaigns\").select(`\r\n        *,\r\n        template:email_campaign_templates(name),\r\n        recipients:email_campaign_recipients(count)\r\n      `).order(\"created_at\", {\n            ascending: false\n        });\n        if (error) throw error;\n        // Transform data to include recipient count\n        const campaignsWithStats = await Promise.all((campaigns || []).map(async (campaign)=>{\n            const { data: stats } = await supabase.rpc(\"get_campaign_stats\", {\n                campaign_uuid: campaign.id\n            });\n            return {\n                ...campaign,\n                recipientCount: stats?.[0]?.total_recipients || 0,\n                sentCount: stats?.[0]?.sent_count || 0\n            };\n        }));\n        return res.status(200).json({\n            campaigns: campaignsWithStats\n        });\n    } catch (error) {\n        console.error(\"Error fetching campaigns:\", error);\n        return res.status(500).json({\n            error: error.message\n        });\n    }\n}\nasync function createCampaign(req, res) {\n    try {\n        const { name, subject, body, recipients, sendNow = true } = req.body;\n        if (!name || !subject || !body || !recipients) {\n            return res.status(400).json({\n                error: \"Missing required fields\"\n            });\n        }\n        // Parse recipients\n        const recipientList = Array.isArray(recipients) ? recipients : recipients.split(\",\").map((r)=>r.trim()).filter(Boolean);\n        if (recipientList.length === 0) {\n            return res.status(400).json({\n                error: \"No valid recipients provided\"\n            });\n        }\n        // Create campaign\n        const { data: campaign, error: campaignError } = await supabase.from(\"email_campaigns\").insert({\n            name,\n            subject,\n            body,\n            status: sendNow ? \"sending\" : \"draft\",\n            sender_id: req.body.userId || null // TODO: Get from auth session\n        }).select().single();\n        if (campaignError) throw campaignError;\n        // Create recipient records\n        const recipientRecords = recipientList.map((email)=>({\n                campaign_id: campaign.id,\n                email,\n                name: email.split(\"@\")[0],\n                status: \"pending\"\n            }));\n        const { error: recipientsError } = await supabase.from(\"email_campaign_recipients\").insert(recipientRecords);\n        if (recipientsError) throw recipientsError;\n        // If sendNow, trigger email sending\n        if (sendNow) {\n            // Call the send endpoint\n            await fetch(`${\"http://localhost:3000\" || 0}/api/admin/campaigns/${campaign.id}/send`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        return res.status(201).json({\n            campaign,\n            recipientCount: recipientList.length\n        });\n    } catch (error) {\n        console.error(\"Error creating campaign:\", error);\n        return res.status(500).json({\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWRtaW4vY2FtcGFpZ25zL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNxRDtBQUVyRCxNQUFNQyxXQUFXRCxtRUFBWUEsQ0FDM0JFLDBDQUFvQyxFQUNwQ0EsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUI7QUFHeEIsZUFBZUMsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsT0FBT0MsYUFBYUgsS0FBS0M7SUFDM0IsT0FBTyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUNoQyxPQUFPRSxlQUFlSixLQUFLQztJQUM3QixPQUFPO1FBQ0wsT0FBT0EsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0FBQ0Y7QUFFQSxlQUFlSixhQUFhSCxHQUFtQixFQUFFQyxHQUFvQjtJQUNuRSxJQUFJO1FBQ0YsTUFBTSxFQUFFTyxNQUFNQyxTQUFTLEVBQUVGLEtBQUssRUFBRSxHQUFHLE1BQU1iLFNBQ3RDZ0IsSUFBSSxDQUFDLG1CQUNMQyxNQUFNLENBQUMsQ0FBQzs7OztNQUlULENBQUMsRUFDQUMsS0FBSyxDQUFDLGNBQWM7WUFBRUMsV0FBVztRQUFNO1FBRTFDLElBQUlOLE9BQU8sTUFBTUE7UUFFakIsNENBQTRDO1FBQzVDLE1BQU1PLHFCQUFxQixNQUFNQyxRQUFRQyxHQUFHLENBQzFDLENBQUNQLGFBQWEsRUFBRSxFQUFFUSxHQUFHLENBQUMsT0FBT0M7WUFDM0IsTUFBTSxFQUFFVixNQUFNVyxLQUFLLEVBQUUsR0FBRyxNQUFNekIsU0FBUzBCLEdBQUcsQ0FBQyxzQkFBc0I7Z0JBQy9EQyxlQUFlSCxTQUFTSSxFQUFFO1lBQzVCO1lBRUEsT0FBTztnQkFDTCxHQUFHSixRQUFRO2dCQUNYSyxnQkFBZ0JKLE9BQU8sQ0FBQyxFQUFFLEVBQUVLLG9CQUFvQjtnQkFDaERDLFdBQVdOLE9BQU8sQ0FBQyxFQUFFLEVBQUVPLGNBQWM7WUFDdkM7UUFDRjtRQUdGLE9BQU96QixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVHLFdBQVdLO1FBQW1CO0lBQzlELEVBQUUsT0FBT1AsT0FBWTtRQUNuQm9CLFFBQVFwQixLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPTixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU9BLE1BQU1xQixPQUFPO1FBQUM7SUFDckQ7QUFDRjtBQUVBLGVBQWV4QixlQUFlSixHQUFtQixFQUFFQyxHQUFvQjtJQUNyRSxJQUFJO1FBQ0YsTUFBTSxFQUFFNEIsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsVUFBVSxFQUFFQyxVQUFVLElBQUksRUFBRSxHQUFHakMsSUFBSStCLElBQUk7UUFFcEUsSUFBSSxDQUFDRixRQUFRLENBQUNDLFdBQVcsQ0FBQ0MsUUFBUSxDQUFDQyxZQUFZO1lBQzdDLE9BQU8vQixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQTBCO1FBQ2pFO1FBRUEsbUJBQW1CO1FBQ25CLE1BQU0yQixnQkFBZ0JDLE1BQU1DLE9BQU8sQ0FBQ0osY0FDaENBLGFBQ0FBLFdBQVdLLEtBQUssQ0FBQyxLQUFLcEIsR0FBRyxDQUFDLENBQUNxQixJQUFjQSxFQUFFQyxJQUFJLElBQUlDLE1BQU0sQ0FBQ0M7UUFFOUQsSUFBSVAsY0FBY1EsTUFBTSxLQUFLLEdBQUc7WUFDOUIsT0FBT3pDLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBK0I7UUFDdEU7UUFFQSxrQkFBa0I7UUFDbEIsTUFBTSxFQUFFQyxNQUFNVSxRQUFRLEVBQUVYLE9BQU9vQyxhQUFhLEVBQUUsR0FBRyxNQUFNakQsU0FDcERnQixJQUFJLENBQUMsbUJBQ0xrQyxNQUFNLENBQUM7WUFDTmY7WUFDQUM7WUFDQUM7WUFDQTFCLFFBQVE0QixVQUFVLFlBQVk7WUFDOUJZLFdBQVc3QyxJQUFJK0IsSUFBSSxDQUFDZSxNQUFNLElBQUksS0FBSyw4QkFBOEI7UUFDbkUsR0FDQ25DLE1BQU0sR0FDTm9DLE1BQU07UUFFVCxJQUFJSixlQUFlLE1BQU1BO1FBRXpCLDJCQUEyQjtRQUMzQixNQUFNSyxtQkFBbUJkLGNBQWNqQixHQUFHLENBQUMsQ0FBQ2dDLFFBQW1CO2dCQUM3REMsYUFBYWhDLFNBQVNJLEVBQUU7Z0JBQ3hCMkI7Z0JBQ0FwQixNQUFNb0IsTUFBTVosS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUN6QmhDLFFBQVE7WUFDVjtRQUVBLE1BQU0sRUFBRUUsT0FBTzRDLGVBQWUsRUFBRSxHQUFHLE1BQU16RCxTQUN0Q2dCLElBQUksQ0FBQyw2QkFDTGtDLE1BQU0sQ0FBQ0k7UUFFVixJQUFJRyxpQkFBaUIsTUFBTUE7UUFFM0Isb0NBQW9DO1FBQ3BDLElBQUlsQixTQUFTO1lBQ1gseUJBQXlCO1lBQ3pCLE1BQU1tQixNQUFNLENBQUMsRUFBRXpELHVCQUErQixJQUFJLEVBQXdCLHFCQUFxQixFQUFFdUIsU0FBU0ksRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNuSHBCLFFBQVE7Z0JBQ1JvRCxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFDaEQ7UUFDRjtRQUVBLE9BQU9yRCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVZO1lBQVVLLGdCQUFnQlcsY0FBY1EsTUFBTTtRQUFDO0lBQy9FLEVBQUUsT0FBT25DLE9BQVk7UUFDbkJvQixRQUFRcEIsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT04sSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPQSxNQUFNcUIsT0FBTztRQUFDO0lBQ3JEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGFydGVyLWJvb2tpbmctcGxhdGZvcm0vLi9wYWdlcy9hcGkvYWRtaW4vY2FtcGFpZ25zL2luZGV4LnRzPzAxNGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICByZXR1cm4gZ2V0Q2FtcGFpZ25zKHJlcSwgcmVzKTtcclxuICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUNhbXBhaWduKHJlcSwgcmVzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Q2FtcGFpZ25zKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YTogY2FtcGFpZ25zLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2VtYWlsX2NhbXBhaWducycpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdGVtcGxhdGU6ZW1haWxfY2FtcGFpZ25fdGVtcGxhdGVzKG5hbWUpLFxyXG4gICAgICAgIHJlY2lwaWVudHM6ZW1haWxfY2FtcGFpZ25fcmVjaXBpZW50cyhjb3VudClcclxuICAgICAgYClcclxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcblxyXG4gICAgLy8gVHJhbnNmb3JtIGRhdGEgdG8gaW5jbHVkZSByZWNpcGllbnQgY291bnRcclxuICAgIGNvbnN0IGNhbXBhaWduc1dpdGhTdGF0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICAoY2FtcGFpZ25zIHx8IFtdKS5tYXAoYXN5bmMgKGNhbXBhaWduKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBzdGF0cyB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdnZXRfY2FtcGFpZ25fc3RhdHMnLCB7XHJcbiAgICAgICAgICBjYW1wYWlnbl91dWlkOiBjYW1wYWlnbi5pZFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4uY2FtcGFpZ24sXHJcbiAgICAgICAgICByZWNpcGllbnRDb3VudDogc3RhdHM/LlswXT8udG90YWxfcmVjaXBpZW50cyB8fCAwLFxyXG4gICAgICAgICAgc2VudENvdW50OiBzdGF0cz8uWzBdPy5zZW50X2NvdW50IHx8IDBcclxuICAgICAgICB9O1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBjYW1wYWlnbnM6IGNhbXBhaWduc1dpdGhTdGF0cyB9KTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYW1wYWlnbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVDYW1wYWlnbihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IG5hbWUsIHN1YmplY3QsIGJvZHksIHJlY2lwaWVudHMsIHNlbmROb3cgPSB0cnVlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIW5hbWUgfHwgIXN1YmplY3QgfHwgIWJvZHkgfHwgIXJlY2lwaWVudHMpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUGFyc2UgcmVjaXBpZW50c1xyXG4gICAgY29uc3QgcmVjaXBpZW50TGlzdCA9IEFycmF5LmlzQXJyYXkocmVjaXBpZW50cylcclxuICAgICAgPyByZWNpcGllbnRzXHJcbiAgICAgIDogcmVjaXBpZW50cy5zcGxpdCgnLCcpLm1hcCgocjogc3RyaW5nKSA9PiByLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xyXG5cclxuICAgIGlmIChyZWNpcGllbnRMaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIHZhbGlkIHJlY2lwaWVudHMgcHJvdmlkZWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSBjYW1wYWlnblxyXG4gICAgY29uc3QgeyBkYXRhOiBjYW1wYWlnbiwgZXJyb3I6IGNhbXBhaWduRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdlbWFpbF9jYW1wYWlnbnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIHN1YmplY3QsXHJcbiAgICAgICAgYm9keSxcclxuICAgICAgICBzdGF0dXM6IHNlbmROb3cgPyAnc2VuZGluZycgOiAnZHJhZnQnLFxyXG4gICAgICAgIHNlbmRlcl9pZDogcmVxLmJvZHkudXNlcklkIHx8IG51bGwgLy8gVE9ETzogR2V0IGZyb20gYXV0aCBzZXNzaW9uXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGNhbXBhaWduRXJyb3IpIHRocm93IGNhbXBhaWduRXJyb3I7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHJlY2lwaWVudCByZWNvcmRzXHJcbiAgICBjb25zdCByZWNpcGllbnRSZWNvcmRzID0gcmVjaXBpZW50TGlzdC5tYXAoKGVtYWlsOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgIGNhbXBhaWduX2lkOiBjYW1wYWlnbi5pZCxcclxuICAgICAgZW1haWwsXHJcbiAgICAgIG5hbWU6IGVtYWlsLnNwbGl0KCdAJylbMF0sIC8vIEV4dHJhY3QgbmFtZSBmcm9tIGVtYWlsIGZvciBub3dcclxuICAgICAgc3RhdHVzOiAncGVuZGluZydcclxuICAgIH0pKTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yOiByZWNpcGllbnRzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdlbWFpbF9jYW1wYWlnbl9yZWNpcGllbnRzJylcclxuICAgICAgLmluc2VydChyZWNpcGllbnRSZWNvcmRzKTtcclxuXHJcbiAgICBpZiAocmVjaXBpZW50c0Vycm9yKSB0aHJvdyByZWNpcGllbnRzRXJyb3I7XHJcblxyXG4gICAgLy8gSWYgc2VuZE5vdywgdHJpZ2dlciBlbWFpbCBzZW5kaW5nXHJcbiAgICBpZiAoc2VuZE5vdykge1xyXG4gICAgICAvLyBDYWxsIHRoZSBzZW5kIGVuZHBvaW50XHJcbiAgICAgIGF3YWl0IGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCd9L2FwaS9hZG1pbi9jYW1wYWlnbnMvJHtjYW1wYWlnbi5pZH0vc2VuZGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBjYW1wYWlnbiwgcmVjaXBpZW50Q291bnQ6IHJlY2lwaWVudExpc3QubGVuZ3RoIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhbXBhaWduOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJnZXRDYW1wYWlnbnMiLCJjcmVhdGVDYW1wYWlnbiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImRhdGEiLCJjYW1wYWlnbnMiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJjYW1wYWlnbnNXaXRoU3RhdHMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiY2FtcGFpZ24iLCJzdGF0cyIsInJwYyIsImNhbXBhaWduX3V1aWQiLCJpZCIsInJlY2lwaWVudENvdW50IiwidG90YWxfcmVjaXBpZW50cyIsInNlbnRDb3VudCIsInNlbnRfY291bnQiLCJjb25zb2xlIiwibWVzc2FnZSIsIm5hbWUiLCJzdWJqZWN0IiwiYm9keSIsInJlY2lwaWVudHMiLCJzZW5kTm93IiwicmVjaXBpZW50TGlzdCIsIkFycmF5IiwiaXNBcnJheSIsInNwbGl0IiwiciIsInRyaW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwibGVuZ3RoIiwiY2FtcGFpZ25FcnJvciIsImluc2VydCIsInNlbmRlcl9pZCIsInVzZXJJZCIsInNpbmdsZSIsInJlY2lwaWVudFJlY29yZHMiLCJlbWFpbCIsImNhbXBhaWduX2lkIiwicmVjaXBpZW50c0Vycm9yIiwiZmV0Y2giLCJORVhUX1BVQkxJQ19BUFBfVVJMIiwiaGVhZGVycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/campaigns/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcampaigns&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Ccampaigns%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();