try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="20353278-af38-4f10-a298-6138874f293e",e._sentryDebugIdIdentifier="sentry-dbid-20353278-af38-4f10-a298-6138874f293e")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7279],{130:function(e,t,n){n.d(t,{e:function(){return z}});var o=n(52322),r=n(15254),i=n(85693),a=n(2784),l=n(5857),s=n(4286),c=n(42662),u=n(72918),d=n(6451),g=n(83967),m=n(65503),f=n(11261),h=n(22877),p=n(6287),v=n(47181),x=n(79143);let y=(e,t)=>{let n=t.getContext("webgl");if(!n)return;let o=x.EK(n,["\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec2 u_resolution;\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = ((a_position / u_resolution) * 2.0 - 1.0) * vec2(1, -1);\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}","\nprecision mediump float;\n\nuniform sampler2D u_image;\nuniform vec2 u_textureSize;\nuniform float u_kernel[9];\nuniform float u_kernelWeight;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n\n  vec4 trueCoord = texture2D(u_image, v_texCoord);\n  vec4 borderColor = vec4(0.5, 0.2, 0.1, 1.0);\n  vec4 spotColor = vec4(1.0, 0.30, 0.08, 0.52);\n  float size = 16.0;\n\n\n  vec4 color;\n  float x = gl_FragCoord.x / size;\n  float y = gl_FragCoord.y / size;\n  float sum = x + y;\n\n\n  if (int(mod(float(sum), float(1.2))) == 0 && trueCoord.a > 0.0) {\n    color = spotColor;\n  } else if (trueCoord.a > 0.0) {\n    color = borderColor;\n  } else {\n    color = trueCoord;\n  }\n\n  gl_FragColor = color;\n\n//   if (trueCoord.a > 0.0 && mod(trueCoord.x, size) == 0.0) {\n//     gl_FragColor = vec4(1.0, 0.30, 0.08, 0.52);\n//   } else {\n//     gl_FragColor = trueCoord;\n//   }\n}\n"]),r={a_position:{numComponents:2,data:[0,0,e.width,0,0,e.height,0,e.height,e.width,0,e.width,e.height]},a_texCoord:{numComponents:2,data:[0,0,1,0,0,1,0,1,1,0,1,1]}},i=x.cU(n,{src:e,flipY:0,wrapS:n.CLAMP_TO_EDGE,min:n.NEAREST,mag:n.NEAREST}),a=[-1,-1,-1,-1,8,-1,-1,-1,-1].reduce((e,t)=>e+t),l={u_textureSize:[e.width,e.height],u_resolution:[e.width,e.height],u_image:i,u_kernel:[-1,-1,-1,-1,8,-1,-1,-1,-1],u_kernelWeight:a<=0?1:a},s=x.qX(n,r);n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.useProgram(o.program),x.o8(n,o,s),x.N9(o,l),n.drawArrays(n.TRIANGLES,0,6)},b=(0,g.zo)("img",{width:"100%",maxHeight:"100%",height:"auto",ojectFit:"contain",position:"absolute",borderRadius:"$10",border:"1px solid transparent"}),C=e=>{let{w:t,h:n,imageMaskId:r}=e,i=(0,a.useRef)((0,p.j)()?new Image:null),l=(0,a.useRef)(null),[s,c]=(0,a.useState)(null),u=(0,a.useMemo)(()=>(0,v.jj)({width:t,height:n,extension:"png",imageId:r}),[r,t,n]);return(0,a.useEffect)(()=>{l.current||(l.current=document.createElement("canvas"),l.current.width=t,l.current.height=n),i.current&&(i.current.crossOrigin="anonymous",i.current.onload=()=>{let e=(0,h.nn)(l.current);i.current&&y(i.current,e),c(e.toDataURL())},i.current.src=u)},[u,n,t]),s?(0,o.jsx)(b,{src:s}):null},w=(0,g.zo)("div",{width:"100%",height:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",gap:20,padding:20,"@tabletS":{flexDirection:"column",gap:12,padding:"12px 16px 20px"}}),_=(0,g.zo)(s.G,{width:"auto",maxWidth:"100%",overflow:"hidden",borderRadius:"$10",border:"1px solid $black",maxHeight:"min(calc(100vh - 160px), 500px)",height:"auto",backgroundColor:"$white !important","@tabletS":{borderRadius:"$8",border:"none"},variants:{orientation:{vertical:{height:"100%"},horizontal:{weight:"100%"}}}}),k=(0,g.zo)(c.gC,{position:"relative",maxHeight:"70vh",height:"auto",variants:{extension:{svg:{width:"100%",justifyContent:"center",alignItems:"center"}}}}),I=(0,g.zo)(l.C,{position:"absolute",top:"-5px",left:"50%",zIndex:1,transform:"translateX(-50%)"}),j=e=>{let{isVector:t,w:n,h:o}=e;return t?{imageExtension:"svg",imageOrientation:n>o?"horizontal":"vertical",containerStylesCss:{aspectRatio:"auto ".concat(n," / ").concat(o)}}:{}},z=e=>{var t,n,l,s,c,g;let{previewDetails:h,skipSmallPreview:p=!1}=e,v=(0,r.T)(),[x,y]=(0,i.v1)("imageId"),b=(0,d.z)(),z=null==h?void 0:null===(n=h.recraft)||void 0===n?void 0:null===(t=n.sourceImage)||void 0===t?void 0:t.imageId,R=null==h?void 0:null===(s=h.recraft)||void 0===s?void 0:null===(l=s.maskImage)||void 0===l?void 0:l.imageId;(0,a.useEffect)(()=>{(0,m.L9)("OpenedPreview",{imageId:h.imageId})},[]);let S=b||p?null!==(c=null==h?void 0:h.width)&&void 0!==c?c:u.By:u.bg,L=b||p?null!==(g=null==h?void 0:h.height)&&void 0!==g?g:u.By:u.bg,{imageExtension:$,imageOrientation:E,containerStylesCss:D}=j({isVector:(0,f.aV)(h.imageType),w:S,h:L});return(0,o.jsxs)(w,{children:[z?(0,o.jsxs)(k,{css:{cursor:"pointer",...D},onClick:()=>y(z),extension:$,children:[b?(0,o.jsx)(I,{children:v("recraftPreview.badges.original")}):null,R&&b&&h.width&&h.height?(0,o.jsx)(C,{w:h.width,h:h.height,imageMaskId:R}):null,(0,o.jsx)(_,{imageId:z,alt:h.prompt||"",width:S,height:L,extension:$,orientation:E})]}):null,h.imageId&&(0,o.jsxs)(k,{css:D,extension:$,children:[z&&b&&(0,o.jsx)(I,{secondary:!0,children:v("recraftPreview.badges.modified")}),(0,o.jsx)(_,{imageId:h.imageId,alt:h.prompt||"",width:S,height:L,extension:$,orientation:E})]})]})}},9738:function(e,t,n){n.d(t,{E:function(){return _}});var o=n(52322),r=n(5632),i=n(2784),a=n(19204),l=n(87250),s=n(72470),c=n(37182),u=n(64907);let d=(0,n(83967).zo)(s.z,{color:"$colors$darkDarkGrey",transition:"opacity $timings$default"}),g=e=>{let{canExport:t,onClick:n,className:i}=e,{asPath:a}=(0,r.useRouter)(),s=t?{onClick:n}:{asTag:"a",href:(0,u.Zd)(a)};return(0,o.jsx)(d,{className:i,size:"m",mode:"secondary",...s,children:(0,o.jsx)(l.b8,{})})};var m=n(43866);let f=(0,m.F4)({"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.6)"},"100%":{transform:"scale(1)"}}),h=(0,m.zo)(l.Ml,{variants:{liked:{true:{animation:"".concat(f," 400ms ease-in-out")}}}}),p=e=>{let{liked:t=!1,interactive:n,canLike:i,onLike:a,className:l}=e,{asPath:c}=(0,r.useRouter)(),d=i?{onClick:a}:{asTag:"a",href:(0,u.Zd)(c)};return(0,o.jsx)(s.z,{className:l,size:"m",mode:t?"accent":"secondary",interactive:n,...d,children:(0,o.jsx)(h,{liked:t})})};var v=n(16355),x=n(94357),y=n(44574),b=n(65503),C=n(98489),w=n(6287);let _=e=>{let{prompt:t,previewDetails:{liked:n,imageType:d,imageId:m},canDelete:f=!1,onDelete:h,variant:_="default"}=e,{user:k}=(0,y.a)(),{asPath:I}=(0,r.useRouter)(),{mutate:j}=(0,x.db)({imageId:m,liked:n}),{mutate:z}=(0,x.Zc)({imageId:m,liked:n,reactionType:I===u._j.history.url?a.DG4.SaveFromHistory:a.DG4.SaveFromGallery}),R=(0,v.hU)(),S=(0,i.useCallback)(async()=>{m&&((0,C.LR)({filename:(0,C.SU)(t||"image"),fetchBlob:()=>R.imageApi.downloadImage({imageId:m,rasterImageContentType:a.X5Q.Png})}),(0,b.L9)("GalleryLoad",{imageId:m,page:I}),z())},[t,m,z]),L=(0,i.useCallback)(()=>{f&&h&&h(m)},[h]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p,{liked:n,canLike:!!k,onLike:()=>{(0,b.L9)("GalleryLike",{imageType:d}),j()}}),(0,o.jsx)(c.q,{stringToCopy:(0,w.j)()?location.href:"",analyticEvent:"GalleryCopyLink",initialIcon:(0,o.jsx)(l.JH,{}),successIcon:(0,o.jsx)(l.EZ,{})}),(0,o.jsx)(g,{canExport:!!k,onClick:S}),f?(0,o.jsx)(s.z,{size:"m",mode:"secondary",onClick:L,interactive:!0,children:(0,o.jsx)(l.IT,{})}):null]})}},5857:function(e,t,n){n.d(t,{C:function(){return i}});var o=n(83967),r=n(73089);let i=(0,o.zo)("div",{...r.L.InterfaceTiny912,letterSpacing:"-$8",color:"$colors$white",backgroundColor:"$colors$black",borderRadius:"$3",border:"1px solid $colors$white",boxShadow:"0px 1px 1px 0px #00000033",display:"inline-flex",textTransform:"uppercase",padding:"1px 5px",variants:{secondary:{true:{backgroundColor:"$colors$arrancia"}}},[".".concat(o.$_," &")]:{color:"$colors$black",border:"1px solid $colors$black"}})},37182:function(e,t,n){n.d(t,{q:function(){return u}});var o=n(52322),r=n(2784),i=n(72470),a=n(41906),l=n(83967),s=n(65503);let c=(0,l.zo)(i.z,{width:"104px"}),u=e=>{let{stringToCopy:t,initialLabel:n,successLabel:i,initialIcon:l,successIcon:u,analyticEvent:d,...g}=e,{onCopy:m,copied:f}=(0,a.V)(),h=(0,r.useCallback)(async e=>{e.stopPropagation(),e.preventDefault(),await m(t),(0,s.L9)(d,"ExternalApiTokenCopied"===d?{}:{stringToCopy:t})},[m,t,d]);return(0,o.jsxs)(c,{size:"m",onClick:h,mode:"secondary",...g,children:[f?u:l,f?i:n]})}},94357:function(e,t,n){n.d(t,{Vl:function(){return d},Zc:function(){return u},db:function(){return c}});var o=n(19204),r=n(86132),i=n(14010),a=n(87686),l=n(16355),s=n(2374);let c=e=>{let{imageId:t,liked:n}=e,r=(0,i.NL)(),{defaultApi:c}=(0,l.hU)();return(0,a.D)({mutationFn:()=>c.postImageReaction({imageId:t,postImageReactionRequest:{reaction:o.DG4.Like,cancel:n}}),onMutate:async()=>{r.setQueryData([s.Wb,t],e=>({...e,liked:!n}))},onSuccess:()=>{r.invalidateQueries({queryKey:[s.VJ]})}})},u=e=>{let{imageId:t,liked:n,reactionType:o}=e,{defaultApi:r}=(0,l.hU)();return(0,a.D)({mutationFn:()=>r.postImageReaction({imageId:t,postImageReactionRequest:{reaction:o,cancel:n}})})},d=()=>{let{defaultApi:e}=(0,l.hU)(),t=(0,i.NL)(),{addNotification:n}=(0,r.lm)();return(0,a.D)({mutationFn:t=>e.postImageReaction({imageId:t,postImageReactionRequest:{reaction:o.DG4.RemoveFromHistory}}),onSuccess:()=>{t.invalidateQueries({queryKey:[s.VJ]})},onError:e=>{n({error:e})}})}},2374:function(e,t,n){n.d(t,{Nn:function(){return d},OV:function(){return g},PZ:function(){return r},VJ:function(){return l},Wb:function(){return u},Y2:function(){return c},ZV:function(){return i},bt:function(){return a},tK:function(){return s}});var o=n(35200);let r=60,i="listStyles",a="listStylesSave",l="galleryList",s=30,c=200,u="galleryPreview",d=30,g={project:e=>["userProject",e],projectsList:e=>e?(0,o.AZ)(["userProjectsList",e]):["userProjectsList"]}},76108:function(e,t,n){n.d(t,{k:function(){return a}});var o=n(3581),r=n(83967),i=n(31745);let a=()=>{let{isMobile:e,isTablet:t}=(0,i.d)(),n=(0,o.Z)(r.BC.tabletS,!!e),a=(0,o.Z)(r.BC.tabletL,!!t);return{isMobile:n,isDesktop:(0,o.Z)(r.BC.desktopL,!e),isTabletSmall:a}}},6451:function(e,t,n){n.d(t,{z:function(){return r}});var o=n(2784);let r=()=>{let[e,t]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{t(!0)},[]),e}}}]);